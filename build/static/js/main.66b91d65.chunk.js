(this['webpackJsonp@nyaruka/flow-editor'] = this['webpackJsonp@nyaruka/flow-editor'] || []).push([
  [0],
  [
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        sim_container: 'Simulator_sim_container__H7rj0',
        simulator: 'Simulator_simulator__2tU1d',
        sim_hidden: 'Simulator_sim_hidden__1ggwF',
        screen: 'Simulator_screen__2Qp5p',
        header: 'Simulator_header__2r6Gy',
        close: 'Simulator_close__1RMuB',
        time: 'Simulator_time__3FKl6',
        battery: 'Simulator_battery__3Wa1Y',
        wifi: 'Simulator_wifi__2E-6D',
        footer: 'Simulator_footer__1_obl',
        show_context_button: 'Simulator_show_context_button__20XVs',
        reset: 'Simulator_reset__1A78l',
        inactive: 'Simulator_inactive__3bLl7',
        active: 'Simulator_active__1MwaM',
        messages: 'Simulator_messages__3Oalm',
        controls: 'Simulator_controls__1TlMu',
        show_attachments_button: 'Simulator_show_attachments_button__3LFcV',
        attachment_buttons: 'Simulator_attachment_buttons__hDIT5',
        visible: 'Simulator_visible__3BBvQ',
        drawer: 'Simulator_drawer__340zx',
        drawer_visible: 'Simulator_drawer_visible__1jBzI',
        forced: 'Simulator_forced__19aUl',
        drawer_header: 'Simulator_drawer_header__nlorO',
        map_thumb: 'Simulator_map_thumb__1zB9o',
        audio_picker: 'Simulator_audio_picker__V2K8X',
        audio_icon: 'Simulator_audio_icon__Ve23Y',
        audio_message: 'Simulator_audio_message___4Yvw',
        keypad: 'Simulator_keypad__29cCi',
        keypad_entry: 'Simulator_keypad_entry__2S4e_',
        keys: 'Simulator_keys__W8GcS',
        row: 'Simulator_row__mtRhr',
        key: 'Simulator_key__Wv2KS',
        drawer_items: 'Simulator_drawer_items__PYHpL',
        drawer_item: 'Simulator_drawer_item__yZRIg',
        simulator_tab: 'Simulator_simulator_tab__uRMHB',
        tab_hidden: 'Simulator_tab_hidden__1BDkU',
        simulator_tab_icon: 'Simulator_simulator_tab_icon__3cmxe',
        simulator_tab_text: 'Simulator_simulator_tab_text__1aI0Q',
        detail_webhook_called: 'Simulator_detail_webhook_called__1A8Iu',
        quick_replies: 'Simulator_quick_replies__3wan9',
        quick_reply: 'Simulator_quick_reply__sSRfK'
      };
    },
    ,
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        hidden: 'TranslatorTab_hidden__n6TH8',
        message: 'TranslatorTab_message__94Qv_',
        header: 'TranslatorTab_header__D3V8v',
        translations_wrapper: 'TranslatorTab_translations_wrapper__3D6T-',
        complete: 'TranslatorTab_complete__30vNJ',
        language: 'TranslatorTab_language__2b3mU',
        options: 'TranslatorTab_options__hKEsd',
        options_visible: 'TranslatorTab_options_visible__1Iv7O',
        filters: 'TranslatorTab_filters__3qwqM',
        pct_complete: 'TranslatorTab_pct_complete__3sHbg',
        toggle: 'TranslatorTab_toggle__35-qI',
        change_visible: 'TranslatorTab_change_visible__1P3qg',
        changeLanguage: 'TranslatorTab_changeLanguage__RxYLJ',
        progress_bar: 'TranslatorTab_progress_bar__cWMo0',
        filled: 'TranslatorTab_filled__OKNl9',
        hundredpct: 'TranslatorTab_hundredpct__2ltPG',
        checkboxes: 'TranslatorTab_checkboxes__3MIKA',
        translate_block: 'TranslatorTab_translate_block__1htQy',
        item: 'TranslatorTab_item__3Q3JG',
        text: 'TranslatorTab_text__2HqtQ',
        from_text: 'TranslatorTab_from_text__3_B24',
        to_text: 'TranslatorTab_to_text__z4k-b',
        needs_translation: 'TranslatorTab_needs_translation__1FKjj',
        type_name: 'TranslatorTab_type_name__OdM8M',
        attribute: 'TranslatorTab_attribute__bQi14',
        translated: 'TranslatorTab_translated__K2ZMS',
        check: 'TranslatorTab_check__1ymTu'
      };
    },
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        evt: 'LogEvent_evt__1J8Uq',
        fadein: 'LogEvent_fadein__kgfF4',
        msg_text: 'LogEvent_msg_text__1HqoJ',
        ivr_msg: 'LogEvent_ivr_msg__2pGYZ',
        send_msg: 'LogEvent_send_msg__195Tn',
        msg_received: 'LogEvent_msg_received__gf2kP',
        image_attachment: 'LogEvent_image_attachment__2Ku4T',
        error: 'LogEvent_error__2oBQ9',
        info: 'LogEvent_info__12nsu',
        email: 'LogEvent_email__1XyUb',
        webhook: 'LogEvent_webhook__3jEK2',
        video_attachment: 'LogEvent_video_attachment__2xn3C',
        audio_attachment: 'LogEvent_audio_attachment__2iBWG',
        media_player: 'LogEvent_media_player__22CtH',
        audio_text: 'LogEvent_audio_text__3j-uW',
        email_details: 'LogEvent_email_details__1f2TW',
        to: 'LogEvent_to__H-JTa',
        subject: 'LogEvent_subject__mN7Lz',
        body: 'LogEvent_body__2hSdi',
        webhook_details: 'LogEvent_webhook_details__3mtJW',
        response: 'LogEvent_response__2oEy0',
        event_viewer: 'LogEvent_event_viewer__2D4uw',
        has_detail: 'LogEvent_has_detail__ZRVpP',
        classification: 'LogEvent_classification__2arCX'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        clickable: 'Dialog_clickable__1gSoh',
        dialog: 'Dialog_dialog__16A3R',
        header: 'Dialog_header__YD-Nm',
        header_overlay: 'Dialog_header_overlay__1Of6F',
        header_icon: 'Dialog_header_icon__2z4U8',
        title: 'Dialog_title__1IRe1',
        barber: 'Dialog_barber__3x6cp',
        iconed: 'Dialog_iconed__2eQKD',
        title_container: 'Dialog_title_container__2HiUa',
        content: 'Dialog_content__1YGhY',
        footer: 'Dialog_footer__3UylY',
        gutter: 'Dialog_gutter__1Xxy-',
        buttons: 'Dialog_buttons__1T0cB',
        left_buttons: 'Dialog_left_buttons__31hp_',
        right_buttons: 'Dialog_right_buttons__3NHBO',
        tabs: 'Dialog_tabs__2gLgU',
        tab: 'Dialog_tab__1x47g',
        tab_icon: 'Dialog_tab_icon__28etF',
        active: 'Dialog_active__3yOgq'
      };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        action: 'Action_action__NVQRK',
        has_router: 'Action_has_router__1Ad-S',
        body: 'Action_body__RtQCZ',
        add_contact_urn: 'Action_add_contact_urn__3Z706',
        add_input_labels: 'Action_add_input_labels__3IeO3',
        send_msg: 'Action_send_msg__1QYPk',
        set_contact_field: 'Action_set_contact_field__1HDvu',
        set_contact_name: 'Action_set_contact_name__1woBb',
        call_webhook: 'Action_call_webhook__2kR_s',
        call_resthook: 'Action_call_resthook__2zGlX',
        set_contact_language: 'Action_set_contact_language__G9Ko5',
        set_contact_status: 'Action_set_contact_status__2inqU',
        set_contact_channel: 'Action_set_contact_channel__1YEwX',
        add_contact_groups: 'Action_add_contact_groups__3H0fU',
        remove_contact_groups: 'Action_remove_contact_groups__3h7vs',
        play_audio: 'Action_play_audio__ShGHx',
        say_msg: 'Action_say_msg__3CqFc',
        set_run_result: 'Action_set_run_result__1CLz_',
        send_email: 'Action_send_email__2MDnO',
        send_broadcast: 'Action_send_broadcast__1SCyf',
        transfer_airtime: 'Action_transfer_airtime__2LvoA',
        open_ticket: 'Action_open_ticket__3afC2',
        missing: 'Action_missing__1Ghl9',
        wait_for_time: 'Action_wait_for_time__1PGd4',
        enter_flow: 'Action_enter_flow__2ogxI',
        call_classifier: 'Action_call_classifier__tKBlJ',
        start_session: 'Action_start_session__1yM-7',
        not_localizable: 'Action_not_localizable__2rKMk',
        overlay: 'Action_overlay__ZEDK0',
        immutable: 'Action_immutable__qAZdN',
        translate_from: 'Action_translate_from__3BID_',
        translate_to: 'Action_translate_to__TPeJw',
        translating: 'Action_translating__2n0n7',
        missing_localization: 'Action_missing_localization__1zslf',
        localized: 'Action_localized__3Mwip',
        url_attachment: 'Action_url_attachment__5X1Iv',
        remove_upload: 'Action_remove_upload__7muTz',
        url: 'Action_url__2NeuQ',
        remove: 'Action_remove__13eCi',
        type_choice: 'Action_type_choice__3N8iO'
      };
    },
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        exit: 'Exit_exit__36tB1',
        translating: 'Exit_translating__mA2Hf',
        unnamed_exit: 'Exit_unnamed_exit__1H6-H',
        endpoint: 'Exit_endpoint__1D08c',
        missing_localization: 'Exit_missing_localization__h2WGJ',
        name: 'Exit_name__22WdX',
        confirm_delete: 'Exit_confirm_delete__26Wo-',
        activity: 'Exit_activity__11sTW',
        count: 'Exit_count__1tNM8',
        confirm_x: 'Exit_confirm_x__1AODA',
        recent_messages: 'Exit_recent_messages__1wUzf',
        no_recents: 'Exit_no_recents__R97kK',
        title: 'Exit_title__3Ugsu',
        loading: 'Exit_loading__37ssZ',
        message: 'Exit_message__Q_zU9',
        text: 'Exit_text__1-x4W',
        sent: 'Exit_sent__1DkCx'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        context_explorer: 'ContextExplorer_context_explorer__wmqkX',
        visible: 'ContextExplorer_visible__2gRjv',
        panel: 'ContextExplorer_panel__gz824',
        close_button: 'ContextExplorer_close_button__26zA3',
        row: 'ContextExplorer_row__2rF84',
        arrow_right: 'ContextExplorer_arrow_right__22xI1',
        has_children: 'ContextExplorer_has_children__2eFg-',
        open: 'ContextExplorer_open__2duis',
        key: 'ContextExplorer_key__AE_c_',
        clipboard: 'ContextExplorer_clipboard__ZgQfN',
        key_summary: 'ContextExplorer_key_summary__2xvsu',
        colon: 'ContextExplorer_colon__3TZUN',
        str_value: 'ContextExplorer_str_value__2W3Fs',
        footer: 'ContextExplorer_footer__xM3R1',
        hide_checkbox: 'ContextExplorer_hide_checkbox__w80HV',
        help: 'ContextExplorer_help__23pVD',
        empty_toggle: 'ContextExplorer_empty_toggle__29mpj',
        message: 'ContextExplorer_message__2x4s4',
        expression: 'ContextExplorer_expression__3MKM4'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        yellow: 'Sticky_yellow__39XW4',
        color_option: 'Sticky_color_option__32vU5',
        sticky: 'Sticky_sticky__3QUKK',
        blue: 'Sticky_blue__3s2JL',
        purple: 'Sticky_purple__278EO',
        gray: 'Sticky_gray__39re9',
        green: 'Sticky_green__3BQ0M',
        color_chooser_container: 'Sticky_color_chooser_container__2lT4F',
        color_chooser: 'Sticky_color_chooser__3Jbqj',
        sticky_container: 'Sticky_sticky_container__CAgg9',
        selected: 'Sticky_selected__1Ra33',
        removal: 'Sticky_removal__2Ktvw',
        title_wrapper: 'Sticky_title_wrapper__2QWs9',
        remove_button: 'Sticky_remove_button__2jDO8',
        title: 'Sticky_title__1kkPN',
        confirmation: 'Sticky_confirmation__wEJ6P',
        body_wrapper: 'Sticky_body_wrapper__3vHL0',
        body: 'Sticky_body__18mNO'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        node_container: 'Node_node_container__2eaRs',
        uuid: 'Node_uuid__1gU_w',
        ghost: 'Node_ghost__1rJWj',
        nondragged: 'Node_nondragged__3odZa',
        selected: 'Node_selected__1ck3F',
        node: 'Node_node__2ympr',
        immutable: 'Node_immutable__2NDYM',
        save_as: 'Node_save_as__27Fv-',
        save_result: 'Node_save_result__cnC6y',
        result_name: 'Node_result_name__1F10Q',
        cropped: 'Node_cropped__3mV37',
        exit_table: 'Node_exit_table__3NybR',
        exits: 'Node_exits__3zABv',
        add: 'Node_add__3PamH',
        drag_group: 'Node_drag_group__1h4JV',
        flow_start: 'Node_flow_start__2ZLmX',
        flow_start_message: 'Node_flow_start_message__21Gdu',
        active: 'Node_active__31xXM',
        pulse: 'Node_pulse__14AYP'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        random: 'shared_random__URuHQ',
        issues: 'shared_issues__2JPEb',
        header: 'shared_header__whMnp',
        icon: 'shared_icon__1igRB',
        title: 'shared_title__1WSZR',
        summary: 'shared_summary__1XTGq',
        issue_help: 'shared_issue_help__1XuTL',
        wait_for_audio: 'shared_wait_for_audio__1LjH-',
        wait_for_image: 'shared_wait_for_image__3VU9W',
        wait_for_video: 'shared_wait_for_video__1nv-a',
        wait_for_location: 'shared_wait_for_location__2al5E',
        wait_for_menu: 'shared_wait_for_menu__hot7M',
        wait_for_digits: 'shared_wait_for_digits__35WPZ',
        wait_for_response: 'shared_wait_for_response__ZKUbx',
        wait_for_time: 'shared_wait_for_time__1_P0u',
        add_contact_groups: 'shared_add_contact_groups__2dqfS',
        remove_contact_groups: 'shared_remove_contact_groups__1dJrQ',
        send_email: 'shared_send_email__dY51y',
        send_broadcast: 'shared_send_broadcast__3LXs5',
        msg: 'shared_msg__28OwU',
        say_msg: 'shared_say_msg__2U3R0',
        send_msg: 'shared_send_msg__2tEfv',
        open_ticket: 'shared_open_ticket__2NPzK',
        transfer_airtime: 'shared_transfer_airtime__1H5tV',
        enter_flow: 'shared_enter_flow__XHnXb',
        start_session: 'shared_start_session__1f3aq',
        set_run_result: 'shared_set_run_result__1QltP',
        add_input_labels: 'shared_add_input_labels__2pTX0',
        add_contact_urn: 'shared_add_contact_urn__3nXG-',
        set_contact_name: 'shared_set_contact_name__KV1Re',
        set_contact_field: 'shared_set_contact_field__3VSZH',
        set_contact_language: 'shared_set_contact_language__4ZBkW',
        set_contact_status: 'shared_set_contact_status__2iexL',
        set_contact_channel: 'shared_set_contact_channel__3NhjI',
        play_audio: 'shared_play_audio__2OF7K',
        missing: 'shared_missing__2oICX',
        missing_asset: 'shared_missing_asset__b9Nts',
        call_classifier: 'shared_call_classifier__3zcuw',
        split_by_random: 'shared_split_by_random__Zh1SY',
        split_by_expression: 'shared_split_by_expression__3k23C',
        split_by_groups: 'shared_split_by_groups__5EnH4',
        split_by_contact_field: 'shared_split_by_contact_field__1XjX5',
        split_by_intent: 'shared_split_by_intent__1H9sN',
        split_by_run_result: 'shared_split_by_run_result__X4-Wp',
        split_by_scheme: 'shared_split_by_scheme__3L9lW',
        call_resthook: 'shared_call_resthook__16wqp',
        call_webhook: 'shared_call_webhook__1h1Cb',
        breaks: 'shared_breaks__2F4AL',
        url: 'shared_url__1vtQK',
        node_asset: 'shared_node_asset__2MOdQ',
        node_group: 'shared_node_group__ju7iK',
        node_label: 'shared_node_label__1lQNA',
        advanced_title: 'shared_advanced_title__2auaT',
        alert: 'shared_alert__1JnkA'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        group: 'CaseElement_group__1fyWB',
        divider: 'CaseElement_divider__mkeU9',
        kase: 'CaseElement_kase__2vP_O',
        has_intent: 'CaseElement_has_intent__z8znp',
        choice: 'CaseElement_choice__2RZct',
        has_top_intent: 'CaseElement_has_top_intent__3fsYv',
        multi_operand: 'CaseElement_multi_operand__eTLuc',
        form_group: 'CaseElement_form_group__1PJTx',
        single_operand: 'CaseElement_single_operand__o0kaN',
        categorize_as: 'CaseElement_categorize_as__XFySp',
        category: 'CaseElement_category__2yfW1',
        remove_icon: 'CaseElement_remove_icon__1PFzv',
        dnd_icon: 'CaseElement_dnd_icon__wjvHF',
        relative_date: 'CaseElement_relative_date__DGZXt',
        empty: 'CaseElement_empty__35kBB'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        hidden: 'RevisionExplorer_hidden__N5tXK',
        mask: 'RevisionExplorer_mask__14GgE',
        visible: 'RevisionExplorer_visible__365U6',
        explorer_wrapper: 'RevisionExplorer_explorer_wrapper__3FIUU',
        explorer: 'RevisionExplorer_explorer__1yYSY',
        revisions: 'RevisionExplorer_revisions__1nYCu',
        revision: 'RevisionExplorer_revision__3f_kl',
        selected: 'RevisionExplorer_selected__2zSg4',
        button: 'RevisionExplorer_button__2srjQ',
        current: 'RevisionExplorer_current__Zlqcr',
        publish: 'RevisionExplorer_publish__O5LsS',
        created_on: 'RevisionExplorer_created_on__qKoNX',
        email: 'RevisionExplorer_email__Z9xlH'
      };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        link: 'WebhookRouterForm_link__1jXIk',
        info: 'WebhookRouterForm_info__qgGFO',
        method: 'WebhookRouterForm_method__1IR0U',
        url: 'WebhookRouterForm_url__T29iJ',
        code: 'WebhookRouterForm_code__3x1A-',
        instructions: 'WebhookRouterForm_instructions__3LG_X',
        headers_title: 'WebhookRouterForm_headers_title__1GMIG',
        remove_ico: 'WebhookRouterForm_remove_ico__l-jUh',
        example: 'WebhookRouterForm_example__1ev4D',
        header: 'WebhookRouterForm_header__2waYT',
        header_name: 'WebhookRouterForm_header_name__3eQVG',
        header_value: 'WebhookRouterForm_header_value__1Fxrk',
        body_form: 'WebhookRouterForm_body_form__3BHas',
        req_body: 'WebhookRouterForm_req_body__1rKz_'
      };
    },
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        checkbox: 'SendMsgForm_checkbox__-JOyy',
        quick_reply_summary: 'SendMsgForm_quick_reply_summary__DkA4i',
        type_choice: 'SendMsgForm_type_choice__1dciq',
        url_attachment: 'SendMsgForm_url_attachment__1Su5F',
        remove_upload: 'SendMsgForm_remove_upload__2qqap',
        url: 'SendMsgForm_url__2eR-o',
        remove: 'SendMsgForm_remove__20sFL',
        existing_quick_replies: 'SendMsgForm_existing_quick_replies__W866I',
        existing_quick_reply: 'SendMsgForm_existing_quick_reply__2C65m',
        add_quick_replies: 'SendMsgForm_add_quick_replies__3vLIC',
        template_text: 'SendMsgForm_template_text__1zkKJ',
        variable: 'SendMsgForm_variable__3mVDI'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        delimited: 'ResultRouterForm_delimited__D-_e5',
        non_delimited: 'ResultRouterForm_non_delimited__yDNVq',
        lead_in_sub: 'ResultRouterForm_lead_in_sub__3oqJC',
        result_select: 'ResultRouterForm_result_select__1cu2c',
        result_select_delimited: 'ResultRouterForm_result_select_delimited__f-y6Z',
        should_delimit: 'ResultRouterForm_should_delimit__1Z8-4',
        field_number: 'ResultRouterForm_field_number__2WFxV',
        delimiter: 'ResultRouterForm_delimiter__2i5Hr'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        titlebar: 'TitleBar_titlebar__1_zDw',
        titletext: 'TitleBar_titletext__3s2we',
        normal: 'TitleBar_normal__z0QaD',
        remove_confirm: 'TitleBar_remove_confirm__3ywj-',
        remove_button: 'TitleBar_remove_button__2lO9D',
        up_button: 'TitleBar_up_button__2Imiq'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        pop_wrapper: 'PopTab_pop_wrapper__2kOzQ',
        visible: 'PopTab_visible__2udNm',
        popped: 'PopTab_popped__2Imlz',
        tab_wrapper: 'PopTab_tab_wrapper__3n1QM',
        tab: 'PopTab_tab__2Rm5M',
        label: 'PopTab_label__nf1JX',
        icon: 'PopTab_icon__irClb',
        header: 'PopTab_header__1NqmE',
        header_label: 'PopTab_header_label__2YD7z',
        close: 'PopTab_close__3O5BS'
      };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        ele: 'FormElement_ele__1FpYO',
        border: 'FormElement_border__3bx0s',
        error_list: 'FormElement_error_list__1SrT3',
        error: 'FormElement_error__1Peb9',
        arrow_up: 'FormElement_arrow_up__2HvAv',
        send_msg_error: 'FormElement_send_msg_error__3LIUw',
        label: 'FormElement_label__2dN0p',
        invalid: 'FormElement_invalid__1fOa-',
        help_text: 'FormElement_help_text__a6EcV'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        hidden: 'IssuesTab_hidden__1l3_C',
        message: 'IssuesTab_message__AofWc',
        header: 'IssuesTab_header__273ne',
        issues_wrapper: 'IssuesTab_issues_wrapper__3mP8X',
        language: 'IssuesTab_language__3MoIp',
        mask: 'IssuesTab_mask__1b_sl',
        visible: 'IssuesTab_visible__2FRUR'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        title: 'SequenceForm_title__3dDd1',
        delay_container: 'SequenceForm_delay_container__2oN3-',
        input: 'SequenceForm_input__3biT1',
        error: 'SequenceForm_error__Rj6o2'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        player: 'MediaPlayer_player__gYGWS',
        playing: 'MediaPlayer_playing__2Jrw_',
        button: 'MediaPlayer_button__rRXz1',
        circles: 'MediaPlayer_circles__1pr_0',
        circle_background: 'MediaPlayer_circle_background__OMPcS',
        circle_foreground: 'MediaPlayer_circle_foreground__1L6K9'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        translating_categories: 'RouterLocalizationForm_translating_categories__34-3g',
        translating_category: 'RouterLocalizationForm_translating_category__1GtBO',
        translating_from: 'RouterLocalizationForm_translating_from__1jvjb',
        translating_to: 'RouterLocalizationForm_translating_to__1m7uk',
        translating_operator_title: 'RouterLocalizationForm_translating_operator_title__3vA3V',
        translating_operator_instructions:
          'RouterLocalizationForm_translating_operator_instructions___Yv3N',
        translating_operator_container:
          'RouterLocalizationForm_translating_operator_container__39jsM',
        translating_operator: 'RouterLocalizationForm_translating_operator__AgpTS'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        drag_helper: 'DragHelper_drag_helper__a_fFa',
        visible: 'DragHelper_visible__1Z4lg',
        arrow: 'DragHelper_arrow__YH1ED',
        tail: 'DragHelper_tail__12x7O',
        help_text: 'DragHelper_help_text__2luNE',
        head: 'DragHelper_head__3ViUG',
        bold: 'DragHelper_bold__2v--u'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        editor: 'components_editor__36a9s',
        translating: 'components_translating__1uBgy',
        footer: 'components_footer__1OFgP',
        download_button: 'components_download_button__392jz',
        alert_body: 'components_alert_body__2Bxt0',
        alert_modal: 'components_alert_modal__3xFu-',
        saving: 'components_saving__1mebj'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        quick_replies: 'SendMsg_quick_replies__2bre8',
        attachment: 'SendMsg_attachment__1JoQl',
        summary: 'SendMsg_summary__2c05X',
        whatsapp: 'SendMsg_whatsapp__2O95I',
        facebook: 'SendMsg_facebook__30JZ8',
        line: 'SendMsg_line__LMI4I'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        label: 'CheckboxElement_label__3vFGD',
        title: 'CheckboxElement_title__3QShp',
        description: 'CheckboxElement_description__3BguK',
        description_solo: 'CheckboxElement_description_solo__2o0rh'
      };
    },
    function(e, t, a) {
      e.exports = {
        form_element: 'CurrencyElement_form_element__F0wio',
        transfer: 'CurrencyElement_transfer__1IAVm',
        currency: 'CurrencyElement_currency__278L2',
        amount: 'CurrencyElement_amount__fJKsJ',
        remove: 'CurrencyElement_remove__3D5_y'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        options: 'RandomRouterForm_options__1AgXA',
        bucket_select: 'RandomRouterForm_bucket_select__5jt8Q',
        bucket_list: 'RandomRouterForm_bucket_list__14I85',
        bucket_name: 'RandomRouterForm_bucket_name__t3I5z'
      };
    },
    function(e, t, a) {
      e.exports = {
        params: 'SubflowRouterForm_params__2LM8K',
        param: 'SubflowRouterForm_param__Vq8O7',
        param_name: 'SubflowRouterForm_param_name__1GlRT',
        param_input: 'SubflowRouterForm_param_input__2fL5q'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        btn: 'Button_btn__1hdG6',
        disabled: 'Button_disabled__xk6Qi',
        primary: 'Button_primary__3PDu-',
        active: 'Button_active__3BxT0',
        secondary: 'Button_secondary__1LfJY',
        tertiary: 'Button_tertiary__3UJsa'
      };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        pill: 'Pill_pill__3FyMl',
        clickable: 'Pill_clickable__24gn3',
        icon: 'Pill_icon__QZrb0',
        large: 'Pill_large__3mcHa'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        recipients: 'SendBroadcast_recipients__1ZSQV',
        node: 'SendBroadcast_node__26RLX',
        to: 'SendBroadcast_to__25_7K',
        name: 'SendBroadcast_name__RNJWu',
        icon: 'SendBroadcast_icon__2YfpF',
        more: 'SendBroadcast_more__11MJm',
        message: 'SendBroadcast_message__6ZIco',
        line: 'SendBroadcast_line__3Dm3R'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        case_list_container: 'CaseList_case_list_container__3PSnP',
        scrolling: 'CaseList_scrolling__2HZTN',
        case_list: 'CaseList_case_list__8CbuZ',
        kase: 'CaseList_kase__1FwXZ',
        dnd_icon: 'CaseList_dnd_icon__2Hrke'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        lead_in: 'MenuRouterForm_lead_in__253j6',
        digit: 'MenuRouterForm_digit__ruJhi',
        category: 'MenuRouterForm_category__2Khjv',
        menu: 'MenuRouterForm_menu__OrNSa',
        menu_option: 'MenuRouterForm_menu_option__2e-jl'
      };
    },
    function(e, t, a) {
      e.exports = {
        timeout_control_container: 'TimeoutControl_timeout_control_container__ChGjA',
        left_section: 'TimeoutControl_left_section__23W9H',
        label: 'TimeoutControl_label__3L-JA',
        checkbox: 'TimeoutControl_checkbox__NYV4k',
        drop_down: 'TimeoutControl_drop_down__2Yy9r'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        canvas_container: 'Canvas_canvas_container__oR3SR',
        canvas_background: 'Canvas_canvas_background__3UutW',
        canvas: 'Canvas_canvas__XH7zY',
        drag_selection: 'Canvas_drag_selection__3wxA2'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        language: 'LanguageSelector_language__3Q3TZ',
        language_link: 'LanguageSelector_language_link__32yIO',
        active: 'LanguageSelector_active__3RqNy',
        separator: 'LanguageSelector_separator__2oanc'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13'
      };
    },
    function(e, t, a) {
      e.exports = {
        ele: 'SendEmailForm_ele__2CvL5',
        subject: 'SendEmailForm_subject__U7jTR',
        message: 'SendEmailForm_message__1k6GE'
      };
    },
    function(e, t, a) {
      e.exports = {
        form: 'SetRunResultForm_form__HNnt4',
        name: 'SetRunResultForm_name__1aW9R',
        value: 'SetRunResultForm_value__36pab',
        category: 'SetRunResultForm_category__TuHWy'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        node: 'StartSession_node__d1IsL',
        to: 'StartSession_to__2uqPY',
        name: 'StartSession_name__HfSVl',
        icon: 'StartSession_icon__1l-0q',
        more: 'StartSession_more__8uoUD',
        message: 'StartSession_message__1KRsK',
        flow: 'StartSession_flow__zPhXS'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        counter: 'Counter_counter__1_pCt',
        visible: 'Counter_visible__3Avdq',
        clickable: 'Counter_clickable__3pprF'
      };
    },
    function(e, t, a) {
      e.exports = {
        wrapper: 'MountScroll_wrapper__1Stx4',
        pulse: 'MountScroll_pulse__uwbnk',
        pulse_animation: 'MountScroll_pulse_animation__2SL8_'
      };
    },
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        small: 'TembaSelect_small__1oIi4',
        normal: 'TembaSelect_normal__3v4Gh',
        error: 'TembaSelect_error__118Nd'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        small: 'TextInputElement_small__2eK3R',
        option_list: 'TextInputElement_option_list__18zXF',
        option_summary: 'TextInputElement_option_summary__qaT6A',
        option_signature: 'TextInputElement_option_signature__3c1zs',
        option: 'TextInputElement_option__5N_r_',
        selected: 'TextInputElement_selected__2bCI1',
        first_option: 'TextInputElement_first_option__2owME',
        fn_marker: 'TextInputElement_fn_marker__38I-n',
        function_help: 'TextInputElement_function_help__2jwVQ',
        completion_container: 'TextInputElement_completion_container__3c00R',
        options_wrapper: 'TextInputElement_options_wrapper__2knDu',
        fn_container: 'TextInputElement_fn_container__3tmtw',
        option_name: 'TextInputElement_option_name__2G-0k',
        option_examples: 'TextInputElement_option_examples__2l6sa',
        example_header: 'TextInputElement_example_header__3a5qK',
        example: 'TextInputElement_example__3MAGO',
        fn_signature: 'TextInputElement_fn_signature__efYOL',
        wrapper: 'TextInputElement_wrapper__1q0lN',
        help: 'TextInputElement_help__1dGMQ',
        hidden: 'TextInputElement_hidden__3Xul8',
        textinput: 'TextInputElement_textinput__2eOxW'
      };
    },
    function(e, t, a) {
      e.exports = {
        scheme_selection: 'AddURNForm_scheme_selection__3qqeb',
        path: 'AddURNForm_path__vTuFJ'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        text: 'SayMsg_text__2WoYr',
        recording: 'SayMsg_recording__3JHw8'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        code: 'TransferAirtime_code__3WV9i',
        amount: 'TransferAirtime_amount__3mMNG'
      };
    },
    function(e, t, a) {
      e.exports = {
        optional_text_input: 'OptionalTextInput_optional_text_input__N6zb8',
        toggle_link: 'OptionalTextInput_toggle_link__3-B4a'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        errors: 'ValidationFailures_errors__3qGX8',
        error: 'ValidationFailures_error__2Q3Gg'
      };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        lead_in: 'FieldRouterForm_lead_in__ShYLI',
        field_select: 'FieldRouterForm_field_select__n0Csy'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        subject: 'TicketRouterForm_subject__3A23k',
        body: 'TicketRouterForm_body__lfD63'
      };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        draggable: 'CanvasDraggable_draggable__cqsGq',
        selected: 'CanvasDraggable_selected__2GgF7'
      };
    },
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = a.p + 'static/media/map.5e547148.jpg';
    },
    ,
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        message: 'AssetSelector_message__1viBV'
      };
    },
    ,
    function(e) {
      e.exports = JSON.parse(
        '{"actions":{"add_contact_groups":{"description":"Add the contact to a group","name":"Add to Group"},"add_contact_urn":{"description":"Add a URN for the contact","name":"Add URN"},"add_input":{"description":"Label the incoming message","name":"Add Labels"},"call_resthook":{"description":"Call Zapier","name":"Call Zapier"},"call_webhook":{"description":"Call a webhook","name":"Call Webhook"},"enter_flow":{"description":"Enter another flow","name":"Enter a Flow"},"open_ticket":{"description":"Open a ticket with a human agent","name":"Open Ticket"},"play_audio":{"description":"Play a contact recording","name":"Play Recording"},"play_message":{"description":"Play a message","name":"Play Message"},"remove_contact_groups":{"description":"Remove the contact from a group","name":"Remove from Group"},"say_msg":{"placeholder":"Send a message to the contact"},"send_broadcast":{"description":"Send somebody else a message","name":"Send Broadcast","placeholder":"Send a message to the contact"},"send_email":{"description":"Send an email","name":"Send Email"},"send_msg":{"description":"Send the contact a message","name":"Send Message","placeholder":"Send a message to the contact"},"set_contact_field":{"description":"Update the contact","name":"Update Contact"},"set_run_result":{"description":"Save a result for this flow","name":"Save Flow Result"},"split_by_contact_field":{"description":"Split by a contact field","name":"Split by Contact Field"},"split_by_expression":{"description":"Split by a custom expression","name":"Split by Expression"},"split_by_groups":{"description":"Split by group membership","name":"Split by Group Membership"},"split_by_intent":{"description":"Split by intent","name":"Split by Intent"},"split_by_random":{"description":"Split by random chance","name":"Split Randomly"},"split_by_run_result":{"description":"Split by a result in the flow","name":"Split by Flow Result"},"split_by_scheme":{"description":"Split by URN type","name":"Split by URN Type"},"start_session":{"description":"Start somebody else in a flow","name":"Start Somebody Else"},"transfer_airtime":{"description":"Send the contact airtime","name":"Send Airtime"},"wait_for_audio":{"description":"Wait for an audio recording","name":"Wait for Audio"},"wait_for_digits":{"description":"Wait for multiple digits","name":"Wait for Digits"},"wait_for_image":{"description":"Wait for an image","name":"Wait for Image"},"wait_for_location":{"description":"Wait for location GPS coordinates","name":"Wait for Location"},"wait_for_menu":{"description":"Wait for menu selection","name":"Wait for Menu Selection"},"wait_for_response":{"description":"Wait for the contact to respond","name":"Wait for Response"},"wait_for_time":{"description":"Wait for time","name":"Wait for time"},"wait_for_video":{"description":"Wait for a video","name":"Wait for Video"}},"add":"Add","asset_selector":{"placeholder":"Select existing [[name]] or enter a new one","placeholder_plural":"Select existing [[name]] or enter a new one"},"assets":{"classifier":"Call [[name]] classifier","ticketer":"Using [[name]] service"},"body":"Body","buttons":{"cancel":"Cancel","create_message":"Create Message","download":"Download","ok":"Ok"},"contact_statuses":{"active":"Active","blocked":"Blocked - remove from groups, ignore forever","stopped":"Stopped - remove from groups, ignore until they message again","archived":"Archived - remove from groups, ignore forever"},"context_explorer":{"copied_expression":"Copied <1>[[expression]]</1> to clipboard","hide_empty":"Showing keys with values","show_empty":"Showing all keys"},"create_group":"Create Group","create_label":"Create Label","drag_helper":"To connect nodes, <1>drag</1> from the red circle.","email":{"subject":"Subject","to":"To"},"empty_flow_message":"<0>Let\'s get started</0><1>We recommend starting your flow by sending a message. This message will be sent to anybody right after they join the flow. This is your chance to send a single message or ask them a question.</1>","enter_to_create_group":"Enter a name to create a new group","enter_to_create_label":"Enter the name of an existing label or create a new one","errors":{"group_not_found":"Enter the name of an existing group","http_header_missing_name":"HTTP headers must have a name","network":"Hmm, we ran into a problem trying to save your changes. It could just be that your internet connection is not working well at the moment. Please wait a minute or so and try again."},"forms":{"add_groups_summary":"Select the groups to add the contact to.","add_labels_summary":"Select the labels to apply to the incoming message.","add_quick_reply":"Add a new Quick Reply and press enter.","add_urn_summary":"Add a new URN to reach the contact such as a phone number.","all_destinations":"All Destinations","are_required":"are required","arguments":"arguments","audio_url":"Audio URL","body":"Body","buckets":"Buckets","categories":"categories","category":"Category","channel":"Channel","channel_type":"Channel Type","classifier":"Classifier","confidence":"confidence","contact_field":"Contact Field","contact_query":"Contact Query","create_prefix":"New: ","currency":"Currency","day":"day","days":"days","delimit":"Delimit","delimit_result":"Delimit Result","delimit_result_description":"Evaluate your rules against a delimited part of your result","delimiter":"Delimiter","district":"District","email_recipient_name":"Recipient","email_recipient_placeholder":"To","email_recipient_prompt":"Enter email address","enter_a_body":"Enter a body","enter_a_subject":"Enter a subject","enter_a_url":"Enter a URL","enter_flow_parameters_summary":"<0>[[flow]]</0> expects the following parameters to be set by this flow. These can be set using a <4>Save Flow Result</4> action or directly below.","enter_flow_parameters_tab":"Parameters","exit_name":"Exit Name","expression_label":"If the expression...","field_number":"Field Number","field_value":"Field Value","flow":"Flow","flow_result":"Flow Result","groups":"Groups","header_name":"Header name","image_url":"Image URL","intent":"Intent","is_not_a_valid_regex":"is not a valid regex","is_not_finished":"is not finished","is_required":"is required","labels":"Labels","language":"Language","localize_rules":"Sometimes languages need special rules to route things properly. If a translation is not provided, the original rule will be used.","localized_quick_replies":"Add a new [[language]] Quick Reply and press enter.","maximum_value":"Maximum value","message":"Message","message_label":"If the message response...","method":"Method","minimum_value":"Minimum value","must_be_less_than":"must be less than","name":"Name","operand":"Operand","operator":"operator","play_audio_help_text":"Enter a variable that contains a recording the contact has previously recorded. For example, @results.voicemail or @fields.short_bio.","quick_replies":"Quick Replies","quick_replies_summary":"Quick Replies are made into buttons for supported channels. For example, when asking a question, you might add a Quick Reply for \\"Yes\\" and one for \\"No\\".","quick_reply":"Quick Reply","recipients":"Recipients","recording":"Recording","recording_label":"Previous Recording","remove_from_all_label":"Remove from all","remove_from_all_summary":"Remove the active contact from all groups they\'re a member of.","remove_groups_placeholder":"Enter the name of an existing group","remove_groups_summary":"Select the groups to remove the contact from.","resthook":"Resthook","resthook_to_call":"Select the resthook to call","result":"Result","result_name":"Result Name","result_name_help":"By naming the result, you can reference it later using [[resultFormat]]","result_to_split_on":"Result to split on","rules":"rules","save_as_title":"Save as..","save_result_name":"Result Name","select_result":"Select Result","send_msg_facebook_topic_placeholder":"Select a topic to use over Facebook","send_msg_facebook_warning":"Sending bulk messages over a Facebook channel requires that a topic be specified if the user has not sent a message in the last 24 hours. Setting a topic to use over Facebook is especially important for the first message in your flow.","send_msg_summary":"Add an attachment to each message. The attachment can be a file you upload or a dynamic URL using expressions and variables from your Flow.","send_msg_summary_plural":"Add an attachment to each message. The attachment can be a file you upload or a dynamic URL using expressions and variables from your Flow.","split_by_channel_placeholder":"Select the channels to split by","split_by_groups":"Select the groups you\'d like to split by below","split_by_scheme":"Channel types","split_by_scheme_summary":"The contact\'s URN is the address they used to reach you such as their phone number or a Facebook ID. Select which URN types to split by below.","start_type":"Start Type","state":"State","status":"Status","subject":"Subject","template":"template","the_maximum":"the maximum","the_minimum":"the minimum","ticketer":"Ticketer","timeout":"Timeout","timeout_1 day":"1 day","timeout_1 hour":"1 hour","timeout_1 minute":"1 minute","timeout_1 week":"1 week","timeout_10 minutes":"10 minutes","timeout_12 hours":"12 hours","timeout_15 minutes":"15 minutes","timeout_18 hours":"18 hours","timeout_2 days":"2 days","timeout_2 hours":"2 hours","timeout_2 minutes":"2 minutes","timeout_3 days":"3 days","timeout_3 hours":"3 hours","timeout_3 minutes":"3 minutes","timeout_4 minutes":"4 minutes","timeout_5 minutes":"5 minutes","timeout_6 hours":"6 hours","today":"today","today_proper":"Today","translation":"Translation","type":"Type","type_label":"When a contact arrives at this point in your flow...","type_options":"Type Options","url":"URL","urn":"URN","urn_type":"URN Type","use_as_default_language":"Use as default language","value":"Value","variable":"Variable","video_url":"Video URL","webhook_body_summary":"Modify the body of the [[method]] request that will be sent to your webhook.(Please update only custom-key value pairs)","webhook_example":"This response would add <1>@webhook.product</1> and <4>@webhook[\\"stock level\\"]</4> for use in the flow.","webhook_header":"Header","webhook_header_name":"Header Name","webhook_header_summary":"Add any additional headers below that you would like to send along with your request.","webhook_help":"If your server responds with JSON, each property will be added to the Flow.","whatsapp_warning":"Sending messages over a WhatsApp channel requires that a template be used if you have not received a message from a contact in the last 24 hours. Setting a template to use over WhatsApp is especially important for the first message in your flow."},"issues":{"header":"Flow Issues","label":"Flow Issues","legacy_extra":"Invalid regular expression found: [[regex]]","missing_dependency":"Cannot find a [[type]] for <1>[[name]]</1>"},"operator":{"has_pattern":"matches regex"},"operators":{"has_all_words":"has all of the words","has_any_word":"has any of the words","has_beginning":"starts with","has_category":"has the category","has_date":"has a date","has_date_category":"Has Date","has_date_eq":"has a date equal to","has_date_gt":"has a date after","has_date_lt":"has a date before","has_district":"has district","has_district_category":"Has District","has_email":"has an email","has_email_category":"Has Email","has_error":"has an error","has_error_category":"Has Error","has_group":"is in the group","has_intent":"has intent","has_number":"has a number","has_number_between":"has a number between","has_number_eq":"has a number equal to","has_number_gt":"has a number above","has_number_gte":"has a number at or above","has_number_lt":"has a number below","has_number_lte":"has a number at or below","has_only_phrase":"has only the phrase","has_phone":"has a phone number","has_phone_category":"Has Phone","has_phrase":"has the phrase","has_state":"has state","has_state_category":"Has State","has_text":"has some text","has_time":"has a time","has_top_intent":"has top intent","has_value":"is not empty","has_value_category":"Not Empty","has_ward":"has ward","has_ward_category":"Has Ward","has_media":"has media"},"removal_confirmation":"Remove?","revisions":{"header":"Revisions","label":"Revision History"},"schemes":{"email":{"name":"Email","path":"Email Address"},"external":{"name":"External","path":"External ID"},"facebook":{"path":"Facebook"},"firebase":{"name":"Firebase","path":"Firebase ID"},"freschat":{"name":"Freshchat"},"freshchat":{"path":"Freshchat ID"},"jiochat":{"path":"Jiochat ID"},"jiojach":{"name":"Jiochat"},"line":{"name":"Line","path":"Line ID"},"phone":{"name":"SMS","path":"Phone Number"},"telegram":{"name":"Telegram","path":"Telegram ID"},"twitter":{"name":"Twitter","path":"Twitter Handle"},"twitterid":{"name":"Twitter","path":"Twitter ID"},"viber":{"name":"Viber","path":"Viber ID"},"wechat":{"name":"Wechat","path":"Wechat ID"},"whatsapp":{"name":"WhatsApp","path":"WhatsApp Number"}},"simulator":{"added_to_group":"Added to ","airtime_transferred":"Transferred [[amount]] [[currency]] to [[recipient]]","contact_field_changed":"Set contact \\"[[field]]\\" to \\"[[value]]\\"","contact_field_cleared":"Cleared contact \\"[[field]]\\"","contact_language_changed":"Set preferred language to \\"[[language]]\\"","contact_name_changed":"Set contact name to \\"[[name]]\\"","contact_status_changed":"Set status to \\"[[status]]\\"","flow_entered":"Entered flow \\"[[flow]]\\"","httplog_dialog":"HTTP Request Details","input_labels_added":"Message labeled with ","msg_wait":"Waiting for reply","removed_from_group":"Removed from ","resthook_called":"Triggered flow event \\"[[resthook]]\\"","run_result_changed":"Set result \\"[[field]]\\" to \\"[[value]]\\"","sent_email":{"summary":"Sent email to [[recipients]] with subject \\"[[subject]]\\"","title":"Email Details"},"session_triggered":"Started somebody else in \\"[[flow]]\\"","ticket_opened":"Ticket opened with subject \\"[[subject]]\\""},"sticky":{"body":"...","title":"New Note"},"translation":{"header":"Flow Translation","label":"Translations"}}'
      );
    },
    function(e) {
      e.exports = JSON.parse(
        '{"forms":{"send_msg":{"summary_plural":"Add up to [[count]] attachments to each message. Each attachment can be a file you upload or a dynamic URL using expressions and variables from your Flow."}}}'
      );
    },
    function(e) {
      e.exports = JSON.parse('{}');
    },
    function(e) {
      e.exports = JSON.parse(
        '{"actions":{"add_contact_groups":{"description":"Adicione contato a um grupo","name":"Adicione a um grupo  "},"add_contact_urn":{"description":"Adicione URN a um contato","name":"Adicione URN"},"add_input":{"description":"Etiquete a mensagem recebida","name":"Adicione etiqueta"},"call_resthook":{"description":"Ligar para Zapier","name":"Chamar Zapier"},"call_webhook":{"description":"Chamar um webhook","name":"Chamar webhook"},"enter_flow":{"description":"Entrar em outro fluxo","name":"Entrar em um fluxo"},"play_audio":{"description":"Reproduzir uma grava\xe7\xe3o de contato","name":"Reproduzir Grava\xe7\xe3o"},"play_message":{"description":"Reproduzir uma mensagem","name":"Reproduzir Mensagem"},"remove_contact_groups":{"description":"Remover contato de um grupo ","name":"Remover de um Grupo "},"say_msg":{"placeholder":"Manda uma mensagem para o contato"},"send_broadcast":{"description":"Send somebody else message","name":"Enviar transmiss\xe3o","placeholder":"Envie uma mensagem para o contato"},"send_email":{"description":"Envie um email","name":"Enviar Email"},"send_msg":{"description":"Envie uma mensagem ao contato","name":"Enviar mensagem","placeholder":"Enviar mensagem para o contato"},"set_contact_field":{"description":"Atualizar o contato ","name":"Atualizar Contato"},"set_run_result":{"description":"Salve o Resultado para este fluxo","name":"Salvar Resultado do Fluxo"},"split_by_contact_field":{"description":"Dividir por um campo de contato","name":"Dividir por campo de contato"},"split_by_expression":{"description":"Dividir por uma express\xe3o de customiza\xe7\xe3o","name":"Dividir por Express\xe3o"},"split_by_groups":{"description":"Dividir por filia\xe7\xe3o de grupo","name":"Dividir por Filia\xe7\xe3o de Grupo"},"split_by_intent":{"description":"Dividir por inten\xe7\xe3o","name":"Dividir por Inten\xe7\xe3o"},"split_by_random":{"description":"Dividir por chance aleat\xf3ria","name":"Dividir Aleatoriamente"},"split_by_run_result":{"description":"Dividir por resultado no fluxo","name":"Dividir por Resultado de Fluxo"},"start_session":{"description":"Iniciar outra pessoa em um fluxo","name":"Iniciar Outra Pessoa"},"transfer_airtime":{"description":"Envie airtime para o contato","name":"Envie Airtime"},"wait_for_audio":{"description":"Aguarde por uma grava\xe7\xe3o de \xe1udio","name":"Aguarde por \xc1udio"},"wait_for_digits":{"description":"Aguarde por m\xfaltiplos d\xedgitos","name":"Aguarde por D\xedgitos"},"wait_for_image":{"description":"Espere por uma imagem","name":"Aguarde por imagem"},"wait_for_location":{"description":"Aguarde as coordenadas GPS de localiza\xe7\xe3o","name":"Aguarde por Localiza\xe7\xe3o"},"wait_for_menu":{"description":"Aguarde por sele\xe7\xe3o de menu","name":"Aguarde por Sele\xe7\xe3o de Menu"},"wait_for_response":{"description":"Aguarde a resposta do contato","name":"Aguarde por resposta"},"wait_for_video":{"description":"Aguarde por um v\xeddeo","name":"Aguarde por V\xeddeo"}},"add":"Adicione","asset_selector":{"placeholder":"Selecione [[nome]] existente ou adicione um novo","placeholder_plural":"Selecione [[nome]] existente ou adicione um novo"},"body":"Corpo","buttons":{"cancel":"Cancelar","ok":"Ok"},"create_group":"Criar Grupo","create_label":"Criar Label","drag_helper":"Para conectar n\xf3s, <1>arraste</1> a partir do c\xedrculo vermelho.","email":{"subject":"Assunto","to":"Para"},"empty_flow_message":"<0>Vamos come\xe7ar </0><1>Nos recomendamos iniciar seu fluxo enviando uma mensagem. Esta mensagem ser\xe1 enviada para qualquer pessoa que entrar no seu fluxo. Esta \xe9 a sua chance de enviar uma mensagem simples ou fazer uma pergunta. </1>","enter_to_create_group":"Insira um n\xfamero para criar um novo grupo","enter_to_create_label":"Entre o nome de uma label existente ou crie uma nova","errors":{"group_not_found":"Entre o nome de um grupo existente","http_header_missing_name":"Cabe\xe7alhos HTTP devem ter um nome"},"forms":{"add_groups_summary":"Selecione os grupos para adicionar um contato","add_labels_summary":"Selecione as labels a serem aplicados \xe0 mensagem recebida.","add_urn_summary":"Adicione um novo URN para alcan\xe7ar o contato, como um n\xfamero de telefone.","webhook_body_summary":"Modifique o corpo da solicita\xe7\xe3o [[m\xe9todo]] que ser\xe1 enviada ao seu webhook.","webhook_example":"Esta resposta deveria adicionar <1>@webhook.product</1> e <4>@webhook[\\"stock level\\"]</4> para uso em um fluxo.","webhook_header":"Cabe\xe7alho","webhook_header_name":"Nome do Cabe\xe7alho","webhook_header_summary":"Adicione abaixo os cabe\xe7alhos adicionais que voc\xea gostaria de enviar juntamente com sua solicita\xe7\xe3o.","webhook_help":"Se seu servidor responder com JSON, cada propriedade ser\xe1 adicionada ao Fluxo.","webhook_placeholder":"Insira um URL","expression_label":"Se a express\xe3o","message_label":"Se a resposta da mensagem...","play_audio_help_text":"Digite uma vari\xe1vel que cont\xe9m uma grava\xe7\xe3o que o contato gravou anteriormente. Por exemplo, @ results.voicemail ou @ fields.short_bio.","previous_recording":"Grava\xe7\xe3o Anterior","remove_groups_placeholder":"Entre o nome de um grupo existente","remove_from_all_label":"Remova de todos","remove_from_all_summary":"Remova os contatos ativos de todos os grupos dos quais eles s\xe3o membros.","remove_groups_summary":"Selecione os grupos para remover os contatos","result_name_help":"Ao nomear o resultado, voc\xea pode fazer refer\xeancia a ele mais tarde usando [[resultFormat]]","save_as_title":"Salve como..","save_result_name":"Nome do Resultado","message":"Mensagem","email_recipient_name":"Recebedor","email_recipient_placeholder":"Para","email_recipient_prompt":"Insira o endere\xe7o de e-mail","subject":"Assunto","add_quick_reply":"Adicione uma Resposta R\xe1pida e clique em enter","all_destinations_summary":"Envie uma mensagem para todos os destinos conhecidos deste contato. Se voc\xea n\xe3o tiver certeza do que isso significa, deixe-o desmarcado.","localized_quick_replies":"Adicione uma nova [[idioma]] Resposta R\xe1pida e aperte enter. ","quick_replies_summary":"As Respostas r\xe1pidas s\xe3o transformadas em bot\xf5es para os canais suportados. Por exemplo, ao fazer uma pergunta, voc\xea pode adicionar uma Resposta r\xe1pida para \\"Sim\\" e outra para \\"N\xe3o\\".","send_msg_summary":"Adicione um anexo a cada mensagem. O anexo pode ser um arquivo que voc\xea carrega ou uma URL din\xe2mica usando express\xf5es e vari\xe1veis \u200b\u200bdo seu Flow.","summary_plural":"Adicione um anexo a cada mensagem. O anexo pode ser um arquivo que voc\xea carrega ou uma URL din\xe2mica usando express\xf5es e vari\xe1veis \u200b\u200bdo seu Flow.","whatsapp_warning":"O envio de mensagens por um canal do WhatsApp exige que um template seja usado se voc\xea n\xe3o recebeu uma mensagem de um contato nas \xfaltimas 24 horas. A configura\xe7\xe3o de template para uso no WhatsApp \xe9 especialmente importante para a primeira mensagem no seu fluxo.","create_prefix":"Novo:","localize_rules":"\xc0s vezes, os idiomas precisam de regras especiais para rotear as coisas corretamente. Se uma tradu\xe7\xe3o n\xe3o for fornecida, a regra original ser\xe1 usada.","split_by_groups":"Selecione os grupos que voc\xea deseja dividir abaixo","type_label":"Quando um contato chegar a esse ponto do fluxo...","groups":"Grupos"},"operator":{"has_pattern":"corresponde a regex"},"operators":{"has_all_words":"tem todas as palavras","has_any_word":"tem qualquer das palavras","has_beginning":"come\xe7a com","has_category":"tem a categoria","has_date":"tem uma data","has_date_category":"Tem Data","has_date_eq":"tem uma data igual a","has_date_gt":"tem uma data depois ","has_date_lt":"tem uma data antes","has_district":"tem distrito","has_district_category":"Tem Distrito","has_email":"Tem um email","has_email_category":"Tem Email","has_error":"tem um erro","has_error_category":"Tem Erro","has_group":"est\xe1 no grupo","has_intent":"tem inten\xe7\xe3o","has_number":"tem um n\xfamero","has_number_between":"tem um n\xfamero entre","has_number_eq":"tem um n\xfamero igual a ","has_number_gt":"tem um n\xfamero acima","has_number_gte":"tem um n\xfamero igual ou acima","has_number_lt":"tem um n\xfamero abaixo","has_number_lte":"tem um n\xfamero igual ou abaixo","has_only_phrase":"tem apenas a frase","has_phone":"tem um n\xfamero de telefone","has_phone_category":"Tem Telefone","has_phrase":"Tem a frase","has_state":"tem estado","has_state_category":"Tem Estado","has_text":"tem algum texto","has_time":"tem um tempo","has_top_intent":"tem a inten\xe7\xe3o principal","has_value":"n\xe3o est\xe1 vazio","has_value_category":"N\xe3o Vazio","has_ward":"Tem quadra","has_ward_category":"Tem Quadra"},"removal_confirmation":"Remover?","revisions":{"header":"Revis\xf5es","label":"Hist\xf3rico de Revis\xe3o"},"schemes":{"email":{"path":"Endere\xe7o de E-mail"},"external":{"path":"Identificador Externo"},"facebook":{"path":"Identificador do Facebook"},"firebase":{"path":"Identificador do Firebase"},"jiochat":{"path":"Identificador do Jiochat"},"line":{"path":"Identificador do Line"},"phone":{"path":"N\xfamero de Telefone"},"telegram":{"path":"Identificador do Telegram"},"twitter":{"path":"Identificador do Twitter"},"twitterid":{"path":"Identificador do Twitter"},"viber":{"path":"Identificador do Viber"},"wechat":{"path":"Identificador do Wechat"},"whatsapp":{"path":"N\xfamero de Whatsapp"}},"simulator":{"added_to_group":"Adicionado a ","airtime_transferred":"Transferido [[quantidade]] [[moeda]] to [[recebedor]]","contact_field_changed":"Configure contato \\"[[campo]]\\" to \\"[[valor]]\\"","contact_language_changed":"Configure l\xedngua preferencial para \\"[[Idioma]]\\"","contact_name_changed":"Configurar nome do contato para \\"[[nome]]\\"","flow_entered":"Entre um fluxo \\"[[fluxo]]\\"","httplog_dialog":"Detalhes da solicita\xe7\xe3o HTTP","msg_wait":"Esperando por resposta","removed_from_group":"Removido de","resthook_called":"Evento de fluxo acionado \\"[[recome\xe7ar]]\\"","run_result_changed":"Configurar resultado \\"[[campo]]\\" para \\"[[valor]]\\"","sent_email":{"summary":"Envie email para \\"[[recipients]]\\" com o assunto \\"[[subject]]\\"","title":"Detalhes do Email"},"session_triggered":"Iniciar outra pessoa em \\"[[fluxo]]\\""},"sticky":{"body":"...","title":"Nova Nota"},"translation":"Tradu\xe7\xe3o"}'
      );
    },
    function(e, t, a) {
      e.exports = { type_list: 'TypeList_type_list__3OATW' };
    },
    ,
    function(e, t, a) {
      e.exports = { checkbox: 'RemoveGroupsForm_checkbox__3W5g6' };
    },
    ,
    function(e, t, a) {
      e.exports = { value: 'UpdateContactForm_value__19Fyz' };
    },
    function(e, t, a) {
      e.exports = { result_name: 'AirtimeRouterForm_result_name__IPVnQ' };
    },
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        lead_in: 'DigitsRouterForm_lead_in__1_8u2'
      };
    },
    function(e, t, a) {
      e.exports = { result_name: 'ResthookRouterForm_result_name__dcAsY' };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        result_name: 'WaitRouterForm_result_name__1QlYs'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        link: 'ClassifyRouterForm_link__20QgF'
      };
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        loading: 'Loading_loading__3-t_e',
        pulse: 'Loading_pulse__apphI'
      };
    },
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        empty_flow: 'Flow_empty_flow__roKNh'
      };
    },
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      e.exports = a(235);
    },
    function(e, t, a) {
      e.exports = {
        grid_size: '20',
        node_spacing: '13',
        node_padding: '3',
        'background-size': '13',
        proper: 'global_proper__rlaqB'
      };
    },
    function(e, t, a) {},
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    ,
    function(e, t, a) {
      'use strict';
      a.r(t);
      a(162), a(163);
      var n,
        i,
        s,
        o,
        r,
        l,
        u,
        c,
        d,
        p,
        h,
        m = a(2),
        _ = a(3),
        g = a(6),
        v = a(5),
        f = a(4),
        y = a(10),
        b = a(7),
        k = a(0),
        E = a.n(k),
        C = a(11),
        w = a(21),
        S = a(8),
        N = '13.1';
      !(function(e) {
        (e.channel = 'channel'),
          (e.classifier = 'classifier'),
          (e.contact = 'contact'),
          (e.field = 'field'),
          (e.flow = 'flow'),
          (e.group = 'group'),
          (e.label = 'label'),
          (e.template = 'template');
      })(n || (n = {})),
        (function(e) {
          (e.MISSING_DEPENDENCY = 'missing_dependency'),
            (e.LEGACY_EXTRA = 'legacy_extra'),
            (e.INVALID_REGEX = 'invalid_regex');
        })(i || (i = {})),
        (function(e) {
          (e.switch = 'switch'), (e.random = 'random');
        })(s || (s = {})),
        (function(e) {
          e.msg = 'msg';
        })(o || (o = {})),
        (function(e) {
          (e.digits = 'digits'),
            (e.audio = 'audio'),
            (e.image = 'image'),
            (e.video = 'video'),
            (e.location = 'location');
        })(r || (r = {})),
        (function(e) {
          (e.UUID = 'uuid'),
            (e['Created By'] = 'created_by'),
            (e['Modified By'] = 'modified_by'),
            (e.Org = 'org'),
            (e.Name = 'name'),
            (e.Language = 'language'),
            (e.Status = 'status'),
            (e.Timezone = 'timezone'),
            (e.Channel = 'channel'),
            (e.Email = 'email'),
            (e.Mailto = 'mailto'),
            (e.Phone = 'phone'),
            (e.Groups = 'groups');
        })(l || (l = {})),
        (function(e) {
          (e.text = 'text'),
            (e.numeric = 'numeric'),
            (e.datetime = 'datetime'),
            (e.state = 'state'),
            (e.district = 'district'),
            (e.ward = 'ward');
        })(u || (u = {})),
        (function(e) {
          (e.Complete = 'C'), (e.Expired = 'E');
        })(c || (c = {})),
        (function(e) {
          (e.Complete = 'Complete'), (e.Expired = 'Expired');
        })(d || (d = {})),
        (function(e) {
          (e.Success = 'Success'), (e.Failure = 'Failure');
        })(p || (p = {})),
        (function(e) {
          (e.Success = 'Success'), (e.Failure = 'Failed');
        })(h || (h = {}));
      var O,
        x = (function() {
          function e(t, a) {
            var n = a.id,
              i = a.name;
            Object(m.a)(this, e),
              (this.localizedKeys = {}),
              (this.localizedObject = void 0),
              (this.localized = !1),
              (this.iso = void 0),
              (this.name = void 0),
              (this.language = void 0),
              (this.localizedObject = t),
              (this.iso = n),
              (this.language = { iso: this.iso, name: i });
          }
          return (
            Object(_.a)(e, [
              {
                key: 'getLanguage',
                value: function() {
                  return (
                    this.language ||
                      (this.iso && (this.language = { iso: this.iso, name: this.name })),
                    this.language
                  );
                }
              },
              {
                key: 'hasTranslation',
                value: function(e) {
                  return e in this.localizedKeys;
                }
              },
              {
                key: 'addTranslation',
                value: function(e, t) {
                  this.localized ||
                    ((this.localizedObject = Object.assign({}, this.localizedObject)),
                    (this.localized = !0)),
                    Array.isArray(this.localizedObject[e])
                      ? (this.localizedObject[e] = t)
                      : 1 === t.length && (this.localizedObject[e] = t[0]),
                    (this.localizedKeys[e] = !0);
                }
              },
              {
                key: 'isLocalized',
                value: function() {
                  return this.localized;
                }
              },
              {
                key: 'getObject',
                value: function() {
                  return this.localizedObject;
                }
              }
            ]),
            e
          );
        })(),
        j = (function() {
          function e() {
            Object(m.a)(this, e);
          }
          return (
            Object(_.a)(e, null, [
              {
                key: 'translate',
                value: function(e, t, a) {
                  var n = new x(e, t);
                  if (a && e.uuid in a) {
                    var i = a[e.uuid];
                    Object.keys(i).forEach(function(e) {
                      return n.addTranslation(e, i[e]);
                    });
                  }
                  return n;
                }
              }
            ]),
            e
          );
        })(),
        T = a(93),
        A = a(84),
        R = a.n(A),
        U = /\s|-+(?=\S)/g,
        D = parseInt(R.a.grid_size, 10) || 20,
        P = parseInt(R.a.node_spacing, 10) || 10,
        F = parseInt(R.a.node_padding, 10) || 10,
        I = function(e, t) {
          var a = e % D,
            n = t % D;
          return (
            a > D / 3 ? (a = D - a) : (a *= -1),
            n > D / 3 ? (n = D - n) : (n *= -1),
            { left: Math.max(e + a, 0), top: Math.max(t + n, 0) }
          );
        },
        M = function(e) {
          var t = e.left % D,
            a = e.top % D;
          t > D / 3 ? (t = D - t) : (t *= -1), a > D / 3 ? (a = D - a) : (a *= -1);
          var n = Math.max(e.left + t, 0),
            i = Math.max(e.top + a, 0);
          return { left: n, top: i, right: n + e.right - e.left, bottom: i + e.bottom - e.top };
        },
        L = function(e) {
          return e
            .toLowerCase()
            .trim()
            .replace(U, '_');
        },
        z = function(e) {
          return e.replace(/\b\w+/g, function(e) {
            return e.charAt(0).toUpperCase() + e.substr(1).toLowerCase();
          });
        },
        B = function(e, t) {
          if (!e.length) return !1;
          var a,
            n = Object(C.a)(e);
          try {
            for (n.s(); !(a = n.n()).done; ) {
              var i,
                s = a.value,
                o = Object(C.a)(t);
              try {
                for (o.s(); !(i = o.n()).done; ) {
                  var r = i.value;
                  if (s.match(r)) return !0;
                }
              } catch (l) {
                o.e(l);
              } finally {
                o.f();
              }
            }
          } catch (l) {
            n.e(l);
          } finally {
            n.f();
          }
          return !1;
        },
        q = function(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null,
            a = arguments.length > 2 ? arguments[2] : void 0;
          return {
            onMouseDown: function(e) {
              a && a(e);
            },
            onMouseUp: function(a) {
              (t && t()) || e(a);
            }
          };
        },
        V = function(e, t, a) {
          return j.translate(e, a, t[a.id]);
        },
        H = function(e) {
          return k.createElement('span', { className: 'emphasize' }, e);
        },
        G = function(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 250;
          return e.length > t ? e.substr(0, t) + '...' : e;
        },
        K = function(e) {
          return function(t, a) {
            return e ? t : a || null;
          };
        },
        W = function(e) {
          return null !== e && void 0 !== e;
        },
        Y = function(e) {
          return { $set: e };
        },
        X = function(e) {
          return { $merge: e };
        },
        Q = function(e) {
          return { $unset: e };
        },
        J = function(e) {
          return { $push: e };
        },
        Z = function(e) {
          return { $splice: e };
        },
        $ = function() {
          return Object(T.v4)();
        },
        ee = function(e, t) {
          return Array.from({ length: t - e }, function(t, a) {
            return a + e;
          });
        },
        te = function(e, t) {
          return !!e.find(function(e) {
            return e === t;
          });
        },
        ae = function(e, t) {
          var a = !0;
          return function() {
            a &&
              ((a = !1),
              e.apply(void 0, arguments),
              setTimeout(function() {
                a = !0;
              }, t));
          };
        },
        ne = function(e) {
          window.setTimeout(e, 0);
        },
        ie = function(e) {
          return e ? 'true' : null;
        },
        se = a(72),
        oe = a.n(se);
      !(function(e) {
        (e.primary = 'primary'), (e.secondary = 'secondary'), (e.tertiary = 'tertiary');
      })(O || (O = {}));
      var re,
        le = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = { active: !1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleMouseDown',
                value: function(e) {
                  this.setState({ active: !0 });
                }
              },
              {
                key: 'handleMouseUp',
                value: function(e) {
                  this.setState({ active: !1 });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props,
                    t = e.onRef,
                    a = e.name,
                    n = e.onClick,
                    i = e.type,
                    s = e.disabled,
                    o = e.leftSpacing,
                    r = e.topSpacing,
                    l = e.iconName;
                  return k.createElement(
                    'div',
                    {
                      ref: t,
                      style: { marginLeft: o ? 10 : 0, marginTop: r ? 10 : 0 },
                      onClick: n,
                      onMouseDown: this.handleMouseDown,
                      onMouseUp: this.handleMouseUp,
                      className: ''
                        .concat(oe.a.btn, ' ')
                        .concat(oe.a[i], ' ')
                        .concat(s ? oe.a.disabled : '', ' ')
                        .concat(this.state.active ? oe.a.active : '')
                    },
                    K(null != l)(
                      k.createElement('span', { style: { paddingRight: 4 }, className: l })
                    ),
                    a
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        ue = a(36),
        ce = a.n(ue),
        de = a(27),
        pe = a.n(de);
      !(function(e) {
        (e.NORMAL = 'normal'), (e.BARBER = 'barber');
      })(re || (re = {}));
      var he,
        me = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).tabFocus = null),
              (n.primaryButton = null),
              (n.state = { activeTab: -1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^get/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'showTab',
                value: function(e) {
                  this.setState({ activeTab: e });
                }
              },
              {
                key: 'handlePrimaryButton',
                value: function(e) {
                  var t = this;
                  e(),
                    (this.tabFocus = window.setTimeout(function() {
                      var e = !1;
                      (t.props.tabs || []).forEach(function(a, n) {
                        if (a.hasErrors) return t.setState({ activeTab: n }), void (e = !0);
                      }),
                        e || t.setState({ activeTab: -1 });
                    }, 0));
                }
              },
              {
                key: 'handleKey',
                value: function(e) {
                  'Enter' === e.key &&
                    e.shiftKey &&
                    (this.primaryButton
                      ? (e.preventDefault(),
                        e.stopPropagation(),
                        e.target.blur(),
                        this.primaryButton.click(),
                        e.target.focus())
                      : console.log('No primary button!'));
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  window.document.addEventListener('keydown', this.handleKey, { capture: !0 });
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  window.clearTimeout(this.tabFocus),
                    window.document.removeEventListener('keydown', this.handleKey, { capture: !0 });
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this,
                    t = [],
                    a = this.props.buttons || { primary: null, secondary: null, tertiary: null };
                  a.secondary &&
                    t.push(
                      k.createElement(le, Object.assign({ key: 0, type: O.secondary }, a.secondary))
                    ),
                    a.primary &&
                      t.push(
                        k.createElement(le, {
                          key: 'button_' + a.primary.name,
                          onRef: function(t) {
                            e.primaryButton = t;
                          },
                          onClick: function() {
                            e.handlePrimaryButton(a.primary.onClick);
                          },
                          leftSpacing: !0,
                          name: a.primary.name,
                          disabled: a.primary.disabled,
                          type: O.primary
                        })
                      );
                  var n = [];
                  return (
                    a.tertiary &&
                      n.push(
                        k.createElement(le, Object.assign({ key: 0, type: O.tertiary }, a.tertiary))
                      ),
                    { leftButtons: n, rightButtons: t }
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = [pe.a.header];
                  this.state.activeTab > -1 && t.push(pe.a.clickable),
                    this.props.headerClass && t.push(ce.a[this.props.headerClass]),
                    this.props.headerIcon && t.push(pe.a.iconed),
                    this.props.headerStyle === re.BARBER && t.push(pe.a.barber);
                  var a = [pe.a.dialog],
                    n = this.getButtons(),
                    i = n.leftButtons,
                    s = n.rightButtons;
                  return (
                    this.props.className && a.push(this.props.className),
                    k.createElement(
                      'div',
                      { className: a.join(' ') },
                      (this.props.tabs || []).length > 0
                        ? k.createElement(
                            'div',
                            { className: pe.a.tabs },
                            (this.props.tabs || []).map(function(t, a) {
                              return k.createElement(
                                'div',
                                {
                                  key: 'tab_' + t.name,
                                  className:
                                    pe.a.tab + ' ' + (a === e.state.activeTab ? pe.a.active : ''),
                                  onClick: function(t) {
                                    t.stopPropagation(), e.setState({ activeTab: a });
                                  }
                                },
                                t.name,
                                ' ',
                                t.icon
                                  ? k.createElement('span', {
                                      className: pe.a.tab_icon + ' ' + t.icon
                                    })
                                  : null,
                                t.checked
                                  ? k.createElement('span', {
                                      className: pe.a.tab_icon + ' fe-check'
                                    })
                                  : null
                              );
                            })
                          )
                        : null,
                      k.createElement(
                        'div',
                        {
                          onClick: function() {
                            e.setState({ activeTab: -1 });
                          },
                          className: t.join(' ')
                        },
                        this.state.activeTab > -1
                          ? k.createElement('div', { className: pe.a.header_overlay })
                          : null,
                        K(void 0 !== this.props.headerIcon)(
                          k.createElement('span', {
                            className: ''
                              .concat(pe.a.header_icon, ' ')
                              .concat(this.props.headerIcon)
                          })
                        ),
                        k.createElement(
                          'div',
                          { className: pe.a.title_container },
                          k.createElement('div', { className: pe.a.title }, this.props.title),
                          k.createElement('div', { className: pe.a.subtitle }, this.props.subtitle)
                        )
                      ),
                      k.createElement(
                        'div',
                        { className: this.props.noPadding ? '' : pe.a.content },
                        this.state.activeTab > -1
                          ? this.props.tabs[this.state.activeTab].body
                          : this.props.children
                      ),
                      k.createElement(
                        'div',
                        { className: pe.a.footer },
                        k.createElement(
                          'div',
                          { className: pe.a.buttons },
                          K(i.length > 0)(
                            k.createElement('div', { className: pe.a.left_buttons }, i)
                          ),
                          K(null != this.props.gutter)(
                            k.createElement('div', { className: pe.a.gutter }, this.props.gutter)
                          ),
                          k.createElement('div', { className: pe.a.right_buttons }, s)
                        )
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        _e = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).ele = void 0),
              (n.state = { top: 0, fixed: !1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleScroll',
                value: function() {
                  var e = window.scrollY > this.state.top;
                  this.setState({ fixed: e });
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  window.removeEventListener('scroll', this.handleScroll);
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this.ele.getBoundingClientRect().top + window.scrollY,
                    t = window.scrollY > e;
                  this.setState({ top: e, fixed: t }),
                    window.addEventListener('scroll', this.handleScroll);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = { position: 'absolute' };
                  return (
                    this.state.fixed && (t = { position: 'fixed', top: 0 }),
                    k.createElement(
                      'div',
                      {
                        ref: function(t) {
                          e.ele = t;
                        },
                        style: t
                      },
                      this.props.children
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent),
        ge = a(26),
        ve = a(16);
      !(function(e) {
        (e.UPDATE_EDITOR_STATE = 'UPDATE_EDITOR_STATE'),
          (e.UPDATE_NODE_EDITOR_SETTINGS = 'UPDATE_NODE_EDITOR_SETTINGS'),
          (e.UPDATE_TRANSLATING = 'UPDATE_TRANSLATING'),
          (e.UPDATE_BASE_LANGUAGE = 'UPDATE_BASE_LANGUAGE'),
          (e.UPDATE_LANGUAGES = 'UPDATE_LANGUAGES'),
          (e.UPDATE_LANGUAGE = 'UPDATE_LANGUAGE'),
          (e.UPDATE_FETCHING_FLOW = 'FETCHING_FLOW'),
          (e.UPDATE_DEFINITION = 'UPDATE_DEFINITION'),
          (e.UPDATE_NODE_DRAGGING = 'UPDATE_NODE_DRAGGING'),
          (e.UPDATE_FLOWS = 'UPDATE_FLOWS'),
          (e.UPDATE_PENDING_CONNECTIONS = 'UPDATE_PENDING_CONNECTIONS'),
          (e.REMOVE_PENDING_CONNECTION = 'REMOVE_PENDING_CONNECTION'),
          (e.UPDATE_COMPONENTS = 'UPDATE_COMPONENTS'),
          (e.UPDATE_CONTACT_FIELDS = 'UPDATE_CONTACT_FIELDS'),
          (e.UPDATE_GROUPS = 'UPDATE_GROUPS'),
          (e.UPDATE_RESULT_MAP = 'UPDATE_RESULT_MAP'),
          (e.UPDATE_ASSET_MAP = 'UPDATE_ASSET_MAP'),
          (e.UPDATE_NODES = 'UPDATE_NODES'),
          (e.UPDATE_ISSUES = 'UPDATE_ISSUES'),
          (e.UPDATE_METADATA = 'UPDATE_METADATA'),
          (e.UPDATE_EXITS = 'UPDATE_EXITS'),
          (e.UPDATE_NODE_EDITOR_OPEN = 'UPDATE_NODE_EDITOR_OPEN'),
          (e.UPDATE_CREATE_NODE_POSITION = 'UPDATE_CREATE_NODE_POSITION'),
          (e.UPDATE_DRAG_GROUP = 'UPDATE_DRAG_GROUP'),
          (e.UPDATE_TYPE_CONFIG = 'UPDATE_TYPE_CONFIG'),
          (e.UPDATE_USER_ADDING_ACTION = 'UPDATE_USER_ADDING_ACTION'),
          (e.INCREMENT_SUGGESTED_RESULT_NAME_COUNT = 'INCREMENT_SUGGESTED_RESULT_NAME_COUNT');
      })(he || (he = {}));
      var fe,
        ye = he;
      !(function(e) {
        (e.Channel = 'channel'),
          (e.Classifier = 'classifier'),
          (e.Contact = 'contact'),
          (e.ContactProperty = 'property'),
          (e.Currency = 'currency'),
          (e.Environment = 'environment'),
          (e.Expression = 'expression'),
          (e.Field = 'field'),
          (e.Flow = 'flow'),
          (e.Global = 'global'),
          (e.Group = 'group'),
          (e.GroupNameMatch = 'group_match'),
          (e.Label = 'label'),
          (e.Language = 'language'),
          (e.Remove = 'remove'),
          (e.Resthook = 'resthook'),
          (e.Result = 'result'),
          (e.Revision = 'revision'),
          (e.Scheme = 'scheme'),
          (e.Template = 'template'),
          (e.Ticketer = 'ticketer'),
          (e.URN = 'urn');
      })(fe || (fe = {}));
      var be,
        ke,
        Ee,
        Ce,
        we,
        Se,
        Ne = { id: fe.Remove, name: 'Remove Value', type: fe.Remove },
        Oe = { id: 'base', name: 'Default', type: fe.Language },
        xe = {
          definition: null,
          baseLanguage: null,
          metadata: {
            dependencies: [],
            results: [],
            waiting_exit_uuids: [],
            parent_refs: [],
            issues: []
          },
          contactFields: {},
          nodes: {},
          issues: {},
          assetStore: {}
        },
        je = function(e) {
          return { type: ye.UPDATE_DEFINITION, payload: { definition: e } };
        },
        Te = function(e) {
          return { type: ye.UPDATE_NODES, payload: { nodes: e } };
        },
        Ae = function(e) {
          return { type: ye.UPDATE_ISSUES, payload: { issues: e } };
        },
        Re = function(e) {
          return { type: ye.UPDATE_METADATA, payload: { metadata: e } };
        },
        Ue = function(e) {
          var t = document.querySelector('temba-store');
          return (
            t && t.setKeyedAssets('results', Object.keys(e.results.items)),
            { type: ye.UPDATE_ASSET_MAP, payload: { assets: e } }
          );
        },
        De = Object(ve.combineReducers)({
          definition: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.definition,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_DEFINITION:
                return t.payload.definition;
              default:
                return e;
            }
          },
          nodes: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.nodes,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_NODES:
                return t.payload.nodes;
              default:
                return e;
            }
          },
          issues: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.issues,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_ISSUES:
                return t.payload.issues;
              default:
                return e;
            }
          },
          metadata: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.metadata,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_METADATA:
                return t.payload.metadata;
              default:
                return e;
            }
          },
          assetStore: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.assetStore,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_ASSET_MAP:
                return t.payload.assets;
              default:
                return e;
            }
          },
          baseLanguage: function() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.baseLanguage,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_BASE_LANGUAGE:
                return t.payload.baseLanguage;
              default:
                return e;
            }
          },
          contactFields: function() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : xe.contactFields,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_CONTACT_FIELDS:
                return t.payload.contactFields;
              default:
                return e;
            }
          }
        }),
        Pe = a(14),
        Fe = a(55),
        Ie = a.n(Fe),
        Me = a(70),
        Le = a(28),
        ze = a.n(Le),
        Be = {
          ARS: { id: 'ARS', name: 'Argentine Peso', type: fe.Currency },
          AUD: { id: 'AUD', name: 'Australian Dollar', type: fe.Currency },
          BIF: { id: 'BIF', name: 'Burundi Franc', type: fe.Currency },
          BRL: { id: 'BRL', name: 'Brazilian Real', type: fe.Currency },
          CAD: { id: 'CAD', name: 'Canadian Dollar', type: fe.Currency },
          CDF: { id: 'CDF', name: 'Congolese Franc', type: fe.Currency },
          CLP: { id: 'CLP', name: 'Chilean Peso', type: fe.Currency },
          COP: { id: 'COP', name: 'Colombian Peso', type: fe.Currency },
          DJF: { id: 'DJF', name: 'Djibouti Franc', type: fe.Currency },
          DOP: { id: 'DOP', name: 'Dominican Peso', type: fe.Currency },
          DZD: { id: 'DZD', name: 'Algerian Dinar', type: fe.Currency },
          EUR: { id: 'EUR', name: 'Euro', type: fe.Currency },
          GBP: { id: 'GBP', name: 'Pound Sterling', type: fe.Currency },
          GHS: { id: 'GHS', name: 'Ghana Cedi', type: fe.Currency },
          GNF: { id: 'GNF', name: 'Guinean Franc', type: fe.Currency },
          KES: { id: 'KES', name: 'Kenyan Shilling', type: fe.Currency },
          LBP: { id: 'LBP', name: 'Lebanese Pound', type: fe.Currency },
          LKR: { id: 'LKR', name: 'Sri Lanka Rupee', type: fe.Currency },
          LRD: { id: 'LRD', name: 'Liberian Dollar', type: fe.Currency },
          MWK: { id: 'MWK', name: 'Malawi Kwacha', type: fe.Currency },
          MXN: { id: 'MXN', name: 'Mexican Peso', type: fe.Currency },
          NAD: { id: 'NAD', name: 'Namibia Dollar', type: fe.Currency },
          NPR: { id: 'NPR', name: 'Nepalese Rupee', type: fe.Currency },
          NZD: { id: 'NZD', name: 'New Zealand Dollar', type: fe.Currency },
          PHP: { id: 'PHP', name: 'Philippine Piso', type: fe.Currency },
          PKR: { id: 'PKR', name: 'Pakistan Rupee', type: fe.Currency },
          RUB: { id: 'RUB', name: 'Russian Ruble', type: fe.Currency },
          RWF: { id: 'RWF', name: 'Rwanda Franc', type: fe.Currency },
          SDG: { id: 'SDG', name: 'Sudanese Pound', type: fe.Currency },
          SGD: { id: 'SGD', name: 'Singapore Dollar', type: fe.Currency },
          SLL: { id: 'SLL', name: 'Leone', type: fe.Currency },
          SOS: { id: 'SOS', name: 'Somali Shilling', type: fe.Currency },
          SRD: { id: 'SRD', name: 'Surinam Dollar', type: fe.Currency },
          SVC: { id: 'SVC', name: 'El Salvador Colon', type: fe.Currency },
          TND: { id: 'TND', name: 'Tunisian Dinar', type: fe.Currency },
          TRY: { id: 'TRY', name: 'Turkish Lira', type: fe.Currency },
          TZS: { id: 'TZS', name: 'Tanzanian Shilling', type: fe.Currency },
          UGX: { id: 'UGX', name: 'Uganda Shilling', type: fe.Currency },
          USD: { id: 'USD', name: 'US Dollar', type: fe.Currency },
          UYU: { id: 'UYU', name: 'Peso Uruguayo', type: fe.Currency },
          UZS: { id: 'UZS', name: 'Uzbekistan Sum', type: fe.Currency },
          VEF: { id: 'VEF', name: 'Bol\xedvar', type: fe.Currency },
          XCD: { id: 'XCD', name: 'East Caribbean Dollar', type: fe.Currency },
          YER: { id: 'YER', name: 'Yemeni Rial', type: fe.Currency },
          ZAR: { id: 'ZAR', name: 'Rand', type: fe.Currency },
          ZMW: { id: 'ZMW', name: 'Zambian Kwacha', type: fe.Currency },
          ZWL: { id: 'ZWL', name: 'Zimbabwe Dollar', type: fe.Currency }
        };
      !(function(e) {
        (e.MESSAGE = 'message'),
          (e.VOICE = 'voice'),
          (e.SURVEY = 'message_offline'),
          (e.NONE = '-');
      })(be || (be = {})),
        (function(e) {
          (e.ACTIVE = 'active'),
            (e.BLOCKED = 'blocked'),
            (e.STOPPED = 'stopped'),
            (e.ARCHIVED = 'archived');
        })(ke || (ke = {})),
        (function(e) {
          (e.execute_actions = 'execute_actions'),
            (e.add_contact_urn = 'add_contact_urn'),
            (e.add_contact_groups = 'add_contact_groups'),
            (e.add_input_labels = 'add_input_labels'),
            (e.remove_contact_groups = 'remove_contact_groups'),
            (e.set_contact_channel = 'set_contact_channel'),
            (e.set_contact_field = 'set_contact_field'),
            (e.set_contact_name = 'set_contact_name'),
            (e.set_contact_language = 'set_contact_language'),
            (e.set_contact_status = 'set_contact_status'),
            (e.set_run_result = 'set_run_result'),
            (e.call_classifier = 'call_classifier'),
            (e.call_resthook = 'call_resthook'),
            (e.call_webhook = 'call_webhook'),
            (e.open_ticket = 'open_ticket'),
            (e.send_msg = 'send_msg'),
            (e.send_email = 'send_email'),
            (e.send_broadcast = 'send_broadcast'),
            (e.enter_flow = 'enter_flow'),
            (e.start_session = 'start_session'),
            (e.transfer_airtime = 'transfer_airtime'),
            (e.split_by_airtime = 'split_by_airtime'),
            (e.split_by_expression = 'split_by_expression'),
            (e.split_by_contact_field = 'split_by_contact_field'),
            (e.split_by_run_result = 'split_by_run_result'),
            (e.split_by_run_result_delimited = 'split_by_run_result_delimited'),
            (e.split_by_groups = 'split_by_groups'),
            (e.split_by_intent = 'split_by_intent'),
            (e.split_by_random = 'split_by_random'),
            (e.split_by_resthook = 'split_by_resthook'),
            (e.split_by_ticket = 'split_by_ticket'),
            (e.split_by_scheme = 'split_by_scheme'),
            (e.split_by_subflow = 'split_by_subflow'),
            (e.split_by_webhook = 'split_by_webhook'),
            (e.wait_for_response = 'wait_for_response'),
            (e.wait_for_time = 'wait_for_time'),
            (e.wait_for_menu = 'wait_for_menu'),
            (e.wait_for_digits = 'wait_for_digits'),
            (e.wait_for_audio = 'wait_for_audio'),
            (e.wait_for_video = 'wait_for_video'),
            (e.wait_for_location = 'wait_for_location'),
            (e.wait_for_image = 'wait_for_image'),
            (e.missing = 'missing'),
            (e.say_msg = 'say_msg'),
            (e.play_audio = 'play_audio');
        })(Ee || (Ee = {})),
        (function(e) {
          (e.has_any_word = 'has_any_word'),
            (e.has_all_words = 'has_all_words'),
            (e.has_phrase = 'has_phrase'),
            (e.has_only_phrase = 'has_only_phrase'),
            (e.has_beginning = 'has_beginning'),
            (e.has_text = 'has_text'),
            (e.has_date = 'has_date'),
            (e.has_date_lt = 'has_date_lt'),
            (e.has_date_eq = 'has_date_eq'),
            (e.has_date_gt = 'has_date_gt'),
            (e.has_time = 'has_time'),
            (e.has_number = 'has_number'),
            (e.has_number_between = 'has_number_between'),
            (e.has_number_lt = 'has_number_lt'),
            (e.has_number_lte = 'has_number_lte'),
            (e.has_number_eq = 'has_number_eq'),
            (e.has_number_gte = 'has_number_gte'),
            (e.has_number_gt = 'has_number_gt'),
            (e.has_run_status = 'has_run_status'),
            (e.has_only_text = 'has_only_text'),
            (e.has_group = 'has_group'),
            (e.has_phone = 'has_phone'),
            (e.has_email = 'has_email'),
            (e.has_value = 'has_value'),
            (e.has_district = 'has_district'),
            (e.has_state = 'has_state'),
            (e.has_ward = 'has_ward'),
            (e.has_pattern = 'has_pattern'),
            (e.has_error = 'has_error'),
            (e.has_intent = 'has_intent'),
            (e.has_top_intent = 'has_top_intent'),
            (e.has_category = 'has_category'),
            (e.has_media = 'has_media');
        })(Ce || (Ce = {})),
        (function(e) {
          (e.HAS_RESTHOOK = 'resthook'),
            (e.HAS_WHATSAPP = 'whatsapp'),
            (e.HAS_AIRTIME = 'airtime'),
            (e.HAS_CLASSIFIER = 'classifier'),
            (e.HAS_TICKETER = 'ticketer'),
            (e.HAS_FACEBOOK = 'facebook');
        })(we || (we = {})),
        (function(e) {
          (e.SIMULATOR = 'Simulator'),
            (e.REVISION_HISTORY = 'Revision History'),
            (e.ISSUES_TAB = 'Issues Tab'),
            (e.TRANSLATOR_TAB = 'Translator Tab');
        })(Se || (Se = {}));
      var qe = [be.NONE],
        Ve = [be.VOICE],
        He = [be.SURVEY],
        Ge = [be.MESSAGE, be.SURVEY],
        Ke = [be.MESSAGE, be.VOICE];
      (ze.a.defaults.headers.post['Content-Type'] = 'application/javascript'),
        (ze.a.defaults.responseType = 'json'),
        (ze.a.defaults.timeout = 3e4);
      var We = function(e, t) {
          var a = Ye('csrftoken'),
            n = a ? { 'X-CSRFToken': a } : {},
            i = '0',
            s = t.spec_version.split('.');
          return (
            s.length > 2 && (i = s[2]),
            (t.spec_version = [N, i].join('.')),
            new Promise(function(a, i) {
              ze.a
                .post(e, t, { headers: n })
                .then(function(e) {
                  200 === e.status ? a(e.data) : i(e);
                })
                .catch(function(e) {
                  return i(e);
                });
            })
          );
        },
        Ye = function(e) {
          var t,
            a = Object(C.a)(document.cookie.split(';'));
          try {
            for (a.s(); !(t = a.n()).done; ) {
              var n = t.value,
                i = n.indexOf('='),
                s = n.substr(0, i),
                o = n.substr(i + 1);
              if (((s = s.trim()), (o = o.trim()), s === e)) return o;
            }
          } catch (r) {
            a.e(r);
          } finally {
            a.f();
          }
          return null;
        },
        Xe = function(e, t) {
          return new Promise(function(a, n) {
            Je(e.endpoint, e.type, e.id).then(function(e) {
              a(
                e.find(function(e) {
                  return e.id === t;
                })
              );
            });
          });
        },
        Qe = function(e, t, a) {
          return new Promise(function(n, i) {
            ze.a
              .get(e)
              .then(function(e) {
                var i = e.data.results.map(function(e, n) {
                  var i = Ze(e, t, a);
                  return (i.order = n), i;
                });
                n({ assets: i, next: e.data.next });
              })
              .catch(function(e) {
                return i(e);
              });
          });
        },
        Je = (function() {
          var e = Object(Me.a)(
            Ie.a.mark(function e(t, a, n) {
              var i, s, o;
              return Ie.a.wrap(function(e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (t) {
                        e.next = 2;
                        break;
                      }
                      return e.abrupt(
                        'return',
                        new Promise(function(e, t) {
                          return e([]);
                        })
                      );
                    case 2:
                      (i = []), (s = t);
                    case 4:
                      if (!s) {
                        e.next = 12;
                        break;
                      }
                      return (e.next = 7), Qe(s, a, n);
                    case 7:
                      (o = e.sent), (i = i.concat(o.assets)), (s = o.next), (e.next = 4);
                      break;
                    case 12:
                      return e.abrupt('return', i);
                    case 13:
                    case 'end':
                      return e.stop();
                  }
              }, e);
            })
          );
          return function(t, a, n) {
            return e.apply(this, arguments);
          };
        })(),
        Ze = function(e, t, a) {
          var n = a || 'uuid',
            i = t;
          if (t === fe.Flow && e.type)
            switch (e.type) {
              case 'message':
                e.type = be.MESSAGE;
                break;
              case 'voice':
                e.type = be.VOICE;
                break;
              case 'survey':
                e.type = be.SURVEY;
            }
          t !== fe.Flow && e.type && (i = e.type);
          var s = { name: e.name || e.text || e.label || e[n], id: e[n], type: i };
          return delete e[n], delete e.name, delete e.text, (s.content = e), s;
        },
        $e = function(e, t, a) {
          if (a && a(t)) return !1;
          var n = e.toLowerCase();
          return (
            !(
              (t.type !== fe.Currency && t.type !== fe.Language) ||
              !t.id.toLowerCase().includes(n)
            ) || t.name.toLowerCase().includes(n)
          );
        },
        et = function(e) {
          return new Promise(function(t, a) {
            var n = {
                channels: { endpoint: it(e.channels), type: fe.Channel, items: {} },
                classifiers: { endpoint: it(e.classifiers), type: fe.Classifier, items: {} },
                languages: { endpoint: it(e.languages), type: fe.Language, items: {}, id: 'iso' },
                flows: { endpoint: it(e.flows), type: fe.Flow, items: {} },
                fields: { endpoint: it(e.fields), type: fe.Field, id: 'key', items: {} },
                globals: { endpoint: it(e.globals), type: fe.Global, id: 'key', items: {} },
                groups: { endpoint: it(e.groups), type: fe.Group, items: {} },
                revisions: { endpoint: it(e.revisions), type: fe.Revision, id: 'id', items: {} },
                labels: { endpoint: it(e.labels), type: fe.Label, items: {} },
                results: { type: fe.Result, items: {} },
                recipients: {
                  endpoint: it(e.recipients),
                  type: fe.Contact || fe.Group || fe.URN,
                  items: {},
                  id: 'id'
                },
                resthooks: {
                  endpoint: it(e.resthooks),
                  type: fe.Resthook,
                  id: 'resthook',
                  items: {}
                },
                templates: { endpoint: it(e.templates), type: fe.Template, items: {} },
                ticketers: { endpoint: it(e.ticketers), type: fe.Ticketer, items: {} },
                currencies: { type: fe.Currency, id: 'id', items: Be, prefetched: !0 }
              },
              i = [];
            ['languages', 'fields', 'groups', 'labels', 'globals', 'classifiers'].forEach(function(
              e
            ) {
              var t = n[e];
              i.push(
                Je(t.endpoint, t.type, t.id || 'uuid').then(function(e) {
                  (t.items = _l(e)), (t.prefetched = !0);
                })
              );
            }),
              Promise.all(i).then(function(e) {
                t(n);
              });
          });
        },
        tt = function(e) {
          return new Promise(function(t, a) {
            ze.a
              .get(e)
              .then(function(e) {
                t(e.data);
              })
              .catch(function(e) {
                return a(e);
              });
          });
        },
        at = function(e) {
          return new Promise(function(t, a) {
            ze.a.get(e).then(function(e) {
              t(e.data);
            });
          });
        },
        nt = function(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
          return new Promise(function(a, n) {
            Object(Me.a)(
              Ie.a.mark(function i() {
                var s, o, r;
                return Ie.a.wrap(
                  function(i) {
                    for (;;)
                      switch ((i.prev = i.next)) {
                        case 0:
                          if ((s = t)) {
                            i.next = 12;
                            break;
                          }
                          return (
                            (i.prev = 2),
                            (i.next = 5),
                            ze.a.get(''.concat(e.endpoint, '?version=').concat(N))
                          );
                        case 5:
                          (o = i.sent).data.results.length > 0 && (s = o.data.results[0].id),
                            (i.next = 12);
                          break;
                        case 9:
                          (i.prev = 9),
                            (i.t0 = i.catch(2)),
                            n(new Error("Couldn't reach revisions endpoint"));
                        case 12:
                          s
                            ? ((r = ''
                                .concat(e.endpoint)
                                .concat(s, '?version=')
                                .concat(N)),
                              ze.a
                                .get(r)
                                .then(function(e) {
                                  var t = e.data;
                                  return a(t);
                                })
                                .catch(function(e) {
                                  return n(e);
                                }))
                            : n(new Error('No revision found for flow'));
                        case 13:
                        case 'end':
                          return i.stop();
                      }
                  },
                  i,
                  null,
                  [[2, 9]]
                );
              })
            )();
          });
        },
        it = function(e) {
          var t = e;
          return (
            t.endsWith('/') || -1 !== t.indexOf('?') || -1 !== t.indexOf('groups') || (t += '/'),
            t.startsWith('http://') || t.startsWith('https://')
              ? t
              : ''.concat(
                  (function() {
                    var e = window.location;
                    return e.protocol + '//' + e.hostname + (e.port ? ':' + e.port : '');
                  })() + t
                )
          );
        },
        st = function(e) {
          window.open(e, 'floweditor_help');
        },
        ot = function(e) {
          var t = e.issues,
            a = e.helpArticles;
          return t && 0 !== t.length
            ? k.createElement(
                'div',
                { style: { padding: '10px 0px' } },
                t.map(function(e, t) {
                  var n = e.node_uuid + e.action_uuid + t;
                  return k.createElement(
                    'div',
                    {
                      style: {
                        margin: '6px 0px',
                        display: 'flex',
                        fontSize: '14px',
                        color: 'tomato'
                      },
                      key: n
                    },
                    k.createElement('div', {
                      style: { marginRight: '8px', marginTop: '-2px', fontSize: '18px' },
                      className: 'fe-warning'
                    }),
                    k.createElement('div', null, rt(e, a))
                  );
                })
              )
            : null;
        },
        rt = function(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
            a = k.createElement(k.Fragment, null, e.description);
          e.type === i.MISSING_DEPENDENCY &&
            (a = k.createElement(
              Pe.a,
              {
                i18nKey: 'issues.missing_dependency',
                values: { name: e.dependency.name || e.dependency.key, type: e.dependency.type }
              },
              'Cannot find a [[type]] for ',
              k.createElement('span', { className: 'emphasize' }, '[[name]]')
            )),
            e.type === i.INVALID_REGEX &&
              (a = k.createElement(
                Pe.a,
                { i18nKey: 'issues.legacy_extra', values: { regex: e.regex } },
                'Invalid regular expression found: [[regex]]'
              )),
            e.type === i.LEGACY_EXTRA &&
              (a = k.createElement(
                Pe.a,
                { i18nKey: 'issues.legacy_extra' },
                'Expressions should not reference @legacy_extra'
              ));
          var n = t[e.type];
          return n
            ? k.createElement(
                'div',
                {
                  className: ce.a.issue_help,
                  onClick: function() {
                    st(n);
                  }
                },
                a
              )
            : a;
        },
        lt = function(e, t) {
          return e.originalAction && e.originalAction.type === t ? e.originalAction.uuid : $();
        },
        ut = function(e) {
          var t = (e.groups || []).map(function(e) {
            return { id: e.uuid, name: e.name, type: fe.Group };
          });
          return (t = (t = t.concat(
            (e.contacts || []).map(function(e) {
              return { id: e.uuid, name: e.name, type: fe.Contact, missing: !1 };
            })
          )).concat(
            (e.legacy_vars || []).map(function(e) {
              return { name: e, value: e, expression: !0 };
            })
          ));
        },
        ct = function(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10,
            a = arguments.length > 2 ? arguments[2] : void 0;
          return e.reduce(function(n, i, s) {
            return (
              s <= t - 2 || e.length === t
                ? n.push(dt(i, a))
                : s === t - 1 &&
                  n.push(
                    k.createElement('div', { key: 'ellipses' }, '+', e.length - t + 1, ' more')
                  ),
              n
            );
          }, []);
        },
        dt = function(e, t) {
          var a = null;
          switch (e.type) {
            case fe.Classifier:
              a = k.createElement(
                Pe.a,
                { i18nKey: 'assets.classifier', values: { name: e.name } },
                'Call [[name]] classifier'
              );
              break;
            case fe.Group:
              a = k.createElement(
                k.Fragment,
                null,
                k.createElement('span', { className: ''.concat(ce.a.node_group, ' fe-group') }),
                e.name
              );
              break;
            case fe.Label:
              a = k.createElement(
                k.Fragment,
                null,
                k.createElement('span', { className: ''.concat(ce.a.node_label, ' fe-label') }),
                e.name
              );
              break;
            case fe.Flow:
              a = k.createElement(
                k.Fragment,
                null,
                k.createElement('span', { className: ''.concat(ce.a.node_label, ' fe-split') }),
                k.createElement(
                  'a',
                  {
                    onMouseDown: function(e) {
                      e.preventDefault(), e.stopPropagation();
                    },
                    onMouseUp: function(e) {
                      e.preventDefault(), e.stopPropagation();
                    },
                    href: ''.concat(t.editor, '/').concat(e.id),
                    rel: 'noopener noreferrer',
                    target: '_blank'
                  },
                  e.name
                )
              );
              break;
            case fe.Ticketer:
              a = k.createElement(
                Pe.a,
                { i18nKey: 'assets.ticketer', values: { name: e.name } },
                'Using [[name]] service'
              );
          }
          return (
            a || (a = e.name),
            k.createElement(
              'div',
              { className: ''.concat(ce.a.node_asset), key: e.id || e.value },
              a
            )
          );
        },
        pt = function(e) {
          return (e && e.validationFailures) || [];
        },
        ht = function(e) {
          return pt(e).length > 0;
        },
        mt = function(e) {
          return e
            .filter(function(e) {
              return e.expression;
            })
            .map(function(e) {
              return e.value;
            });
        },
        _t = function(e, t) {
          return e
            .filter(function(e) {
              return e.type === t;
            })
            .map(function(e) {
              return { uuid: e.id, name: e.name };
            });
        },
        gt = { name: z(l.Name), id: l.Name, type: fe.ContactProperty },
        vt = { name: z(l.Channel), id: l.Channel, type: fe.ContactProperty },
        ft = { name: z(l.Language), id: l.Language, type: fe.ContactProperty },
        yt = { name: z(l.Status), id: l.Status, type: fe.ContactProperty },
        bt = function() {
          return null;
        };
      bt.isRequired = function() {
        return null;
      };
      var kt = (function(e) {
        Object(v.a)(a, e);
        var t = Object(f.a)(a);
        function a(e) {
          var n;
          if ((Object(m.a)(this, a), (n = t.call(this, e)), k.Children.count(e.children) > 1))
            throw new Error('ConfigProvider expects only one child component.');
          if (!k.isValidElement(e.children))
            throw new Error(
              'ConfigProvider expects a valid React element: https://reactjs.org/docs/react-api.html#isvalidelement'
            );
          return n;
        }
        return (
          Object(_.a)(a, [
            {
              key: 'getChildContext',
              value: function() {
                return { config: this.props.config };
              }
            },
            {
              key: 'render',
              value: function() {
                return k.Children.only(this.props.children);
              }
            }
          ]),
          a
        );
      })(k.Component);
      kt.childContextTypes = { config: bt, assetService: bt };
      var Et = function(e, t) {
        var a = e.labels;
        return k.createElement(
          k.Fragment,
          null,
          ct(
            a.map(function(e) {
              return { id: e.uuid, name: e.name, type: fe.Label };
            }),
            5,
            t.config.endpoints
          )
        );
      };
      Et.contextTypes = { config: bt };
      var Ct = Et,
        wt = a(30),
        St = a.n(wt),
        Nt = a(48),
        Ot = a.n(Nt),
        xt = St.a.bind(Ot.a),
        jt = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^get/, /^has/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'getName',
                value: function() {
                  return K(
                    this.props.showLabel &&
                      void 0 !== this.props.name &&
                      null !== this.props.name &&
                      this.props.name.length > 0
                  )(k.createElement('div', { className: Ot.a.label }, this.props.name));
                }
              },
              {
                key: 'getHelpText',
                value: function() {
                  return K(null != this.props.helpText)(
                    k.createElement('div', { className: Ot.a.help_text }, this.props.helpText, ' ')
                  );
                }
              },
              {
                key: 'hasErrors',
                value: function() {
                  return ht(this.props.entry);
                }
              },
              {
                key: 'getValidationErrors',
                value: function() {
                  return (this.props.entry && this.props.entry.validationFailures) || [];
                }
              },
              {
                key: 'getErrors',
                value: function() {
                  var e = this;
                  if (this.hasErrors() && !this.props.hideError) {
                    var t = this.getValidationErrors().map(function(t, a) {
                      var n,
                        i = xt(
                          ((n = {}),
                          Object(S.a)(n, Ot.a.error, !0),
                          Object(S.a)(n, Ot.a.send_msg_error, !0 === e.props.sendMsgError),
                          n)
                        );
                      return k.createElement(
                        'div',
                        { key: a, className: i },
                        k.createElement('div', { className: Ot.a.arrow_up }),
                        k.createElement('div', null, t.message)
                      );
                    });
                    return k.createElement('div', { className: Ot.a.error_list }, t);
                  }
                  return null;
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this.getName(),
                    a = this.getHelpText(),
                    n = this.getErrors(),
                    i = xt(
                      ((e = {}),
                      Object(S.a)(e, Ot.a.ele, !0),
                      Object(S.a)(e, Ot.a.border, this.props.border),
                      Object(S.a)(e, Ot.a.invalid, this.hasErrors()),
                      Object(S.a)(e, this.props.__className, void 0 !== this.props.__className),
                      e)
                    );
                  return k.createElement('div', { className: i }, t, this.props.children, a, n);
                }
              }
            ]),
            a
          );
        })(k.PureComponent),
        Tt = a(132),
        At = a.n(Tt),
        Rt = a(47),
        Ut = a(133),
        Dt = {
          defaults: { translation: a(134) },
          en: { translation: a(135) },
          es: { translation: a(136) },
          pt: { translation: a(137) }
        };
      Rt.a
        .use(Ut.a)
        .use(Pe.b)
        .init({
          resources: Dt,
          fallbackLng: ['en', 'defaults'],
          interpolation: { prefix: '[[', suffix: ']]' }
        });
      var Pt,
        Ft = Rt.a,
        It = a(95),
        Mt = a.n(It);
      !(function(e) {
        (e.small = 'small'), (e.normal = 'normal');
      })(Pt || (Pt = {}));
      var Lt = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).selectbox = void 0),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'getName',
                value: function(e) {
                  var t = '';
                  return (
                    this.props.getName && (t = this.props.getName(e)),
                    !t && this.props.nameKey in e && (t = e[this.props.nameKey]),
                    !t && 'label' in e && (t = e.label),
                    t || (t = e.name),
                    t
                  );
                }
              },
              {
                key: 'getValue',
                value: function(e) {
                  return e[this.props.valueKey || 'value'];
                }
              },
              {
                key: 'isMatch',
                value: function(e, t) {
                  var a = this;
                  return (
                    !(!e || !t) &&
                    (Array.isArray(e)
                      ? e.find(function(e) {
                          return a.getValue(e) === a.getValue(t);
                        })
                      : this.getValue(e) === this.getValue(t))
                  );
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this,
                    t = this;
                  this.props.createPrefix &&
                    (this.selectbox.createArbitraryOption = function(a, n) {
                      if (
                        -1 === a.indexOf('@') &&
                        !n.find(function(e) {
                          return !(
                            t
                              .getName(e)
                              .toLowerCase()
                              .trim() !== a.toLowerCase().trim()
                          );
                        })
                      )
                        return { prefix: e.props.createPrefix, name: a, id: 'created' };
                    });
                  var a = this.selectbox;
                  this.props.options && a.setOptions && a.setOptions(this.props.options),
                    this.props.sortFunction && (a.sortFunction = this.props.sortFunction),
                    this.props.shouldExclude && (a.shouldExclude = this.props.shouldExclude),
                    (a.getName = t.getName.bind(t)),
                    this.selectbox.addEventListener('change', function(t) {
                      var a = t.target.values || [t.target.value],
                        n = a;
                      e.props.assets ||
                        e.props.tags ||
                        (n = a.map(function(t) {
                          var a = (e.props.options || []).find(function(a) {
                            return e.getValue(a) === e.getValue(t);
                          });
                          return !a && e.props.createPrefix ? t : a;
                        })).forEach(function(e) {
                          if (!e) throw new Error('No option found for selection');
                        }),
                        e.props.onChange &&
                          (e.props.multi ? e.props.onChange(n) : e.props.onChange(n[0]));
                    });
                }
              },
              {
                key: 'isFocused',
                value: function() {
                  return this.selectbox.focused;
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = [];
                  this.props.value && !Array.isArray(this.props.value)
                    ? (t = [this.props.value])
                    : Array.isArray(this.props.value) && (t = this.props.value);
                  var a = JSON.stringify(t);
                  return k.createElement(
                    'div',
                    {
                      className:
                        Mt.a[this.props.style || Pt.normal] +
                        ' ' +
                        ((this.props.errors || []).length > 0 ? Mt.a.error : '')
                    },
                    k.createElement('temba-select', {
                      ref: function(t) {
                        e.selectbox = t;
                      },
                      'data-testid': 'temba_select_'.concat(L(this.props.name)),
                      onFocus: this.props.onFocus,
                      nameKey: this.props.nameKey || 'name',
                      valueKey: this.props.valueKey || 'value',
                      name: this.props.name,
                      cacheKey: this.props.cacheKey,
                      expressions: this.props.expressions ? 'session' : '',
                      endpoint: this.props.assets ? this.props.assets.endpoint : null,
                      values: a,
                      errors: JSON.stringify(this.props.errors ? this.props.errors : []),
                      hideErrors: this.props.hideError,
                      placeholder: this.props.placeholder,
                      searchable: ie(this.props.searchable),
                      multi: ie(this.props.multi),
                      disabled: this.props.disabled,
                      clearable: this.props.clearable,
                      tags: this.props.tags,
                      queryParam: this.props.queryParam
                    })
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        zt = function(e, t) {
          return e.type === Ne.type
            ? -1
            : t.type === Ne.type
            ? 1
            : e.type && t.type && e.type !== t.type
            ? t.type.localeCompare(e.type)
            : e.name && t.name
            ? e.name.localeCompare(t.name)
            : 0;
        },
        Bt = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            Object(m.a)(this, a),
              ((n = t.call(this, e)).lastCreation = 0),
              (n.options = []),
              Object(b.react)(Object(g.a)(n), { include: [/^is/, /^handle/, /^get/] });
            var i = [];
            return (
              e.assets &&
                !e.assets.endpoint &&
                (i = (function(e, t, a, n) {
                  var i = e.toLowerCase(),
                    s = Object.keys(t)
                      .map(function(e) {
                        return t[e];
                      })
                      .filter(function(e) {
                        return $e(i, e, n);
                      });
                  return (s = s.concat(a || []).filter(function(e) {
                    return $e(i, e, n);
                  }));
                })('', e.assets.items)),
              (n.options = n.props.additionalOptions || []),
              n.props.valueClearable && n.options.push(Ne),
              n.props.assets.endpoint ||
                (n.options = n.options.concat(
                  Object.keys(n.props.assets.items).map(function(e) {
                    return n.props.assets.items[e];
                  })
                )),
              (n.state = { defaultOptions: i, entry: n.props.entry, isLoading: !1 }),
              n
            );
          }
          return (
            Object(_.a)(
              a,
              [
                {
                  key: 'handleChanged',
                  value: function(e) {
                    if (e) {
                      var t = (e = Array.isArray(e) ? e : [e]).find(function(e) {
                        return e.arbitrary;
                      });
                      t
                        ? ((e = e.filter(function(e) {
                            return !e.arbitrary;
                          })),
                          this.handleCreateOption(t.name))
                        : this.props.onChange(e);
                    } else this.props.onChange(e);
                    this.setState({ message: null });
                  }
                },
                {
                  key: 'handleLoadingComplete',
                  value: function() {
                    this.setState({ isLoading: !1 });
                  }
                },
                {
                  key: 'handleClearMessage',
                  value: function() {
                    this.state.message && this.setState({ message: null });
                  }
                },
                {
                  key: 'handleCreateOption',
                  value: function(e) {
                    var t = this,
                      a = new Date().getTime();
                    if (!(a - this.lastCreation < 1e3)) {
                      this.lastCreation = a;
                      var n = this.props.createAssetFromInput(e);
                      this.props.assets && this.props.assets.endpoint
                        ? (this.setState({ isLoading: !0, message: null }),
                          (function(e, t) {
                            var a = Ye('csrftoken'),
                              n = a ? { 'X-CSRFToken': a } : {};
                            return new Promise(function(a, i) {
                              ze.a
                                .post(e.endpoint, t, { headers: n })
                                .then(function(e) {
                                  a(e.data);
                                })
                                .catch(function(e) {
                                  return i(e);
                                });
                            });
                          })(this.props.assets, n)
                            .then(function(e) {
                              t.setState({ isLoading: !1 }), t.props.onAssetCreated(e);
                            })
                            .catch(function(a) {
                              var n = '';
                              a.response &&
                                a.response.data &&
                                a.response.data.non_field_errors &&
                                (n = ' ' + a.response.data.non_field_errors.join(', ')),
                                t.setState({
                                  message: "Couldn't create new "
                                    .concat(t.props.assets.type, ' "')
                                    .concat(e, '".')
                                    .concat(n),
                                  isLoading: !1
                                });
                            }))
                        : this.props.onChange([n]);
                    }
                  }
                },
                {
                  key: 'getName',
                  value: function(e) {
                    if (this.props.getName) return this.props.getName(e);
                  }
                },
                {
                  key: 'render',
                  value: function() {
                    var e = Ft.t(
                      'asset_selector.placeholder',
                      'Select existing [[name]] or enter a new one',
                      {
                        name: this.props.name.toLocaleLowerCase(),
                        count: this.props.multi ? 1e3 : 1
                      }
                    );
                    return k.createElement(
                      jt,
                      {
                        name: this.props.name,
                        entry: this.props.entry,
                        showLabel: this.props.showLabel,
                        helpText: this.props.helpText,
                        __className: At.a.ele
                      },
                      k.createElement(Lt, {
                        name: this.props.name,
                        style: this.props.style,
                        onChange: this.handleChanged,
                        nameKey: this.props.nameKey || 'name',
                        valueKey:
                          this.props.valueKey ||
                          (this.props.assets ? this.props.assets.id : void 0) ||
                          'uuid',
                        getName: this.props.getName,
                        createPrefix: this.props.createPrefix,
                        shouldExclude: this.props.shouldExclude,
                        assets: this.props.assets,
                        placeholder: this.props.placeholder || e,
                        multi: this.props.multi,
                        expressions: this.props.expressions,
                        value: this.state.entry.value,
                        errors: this.state.message ? [this.state.message] : [],
                        searchable: this.props.searchable,
                        cacheKey: this.lastCreation + '',
                        options: this.options,
                        sortFunction: this.props.sortFunction || zt,
                        queryParam: this.props.assets.type === fe.Contact ? 'search' : null
                      })
                    );
                  }
                }
              ],
              [
                {
                  key: 'getDerivedStateFromProps',
                  value: function(e, t) {
                    var a = e.entry;
                    if (t.defaultOptions && a.value && !a.value.name) {
                      var n = t.defaultOptions.find(function(e) {
                        return e.id === a.value.id;
                      });
                      n && (a = { value: n });
                    }
                    return { entry: a };
                  }
                }
              ]
            ),
            a
          );
        })(k.Component),
        qt = function(e) {
          return !!Ke.find(function(t) {
            return t === e;
          });
        },
        Vt = function(e, t) {
          return e.filter(function(e) {
            return (
              !(
                e.filter &&
                !(t.filters || []).find(function(t) {
                  return t === e.filter;
                })
              ) &&
              (void 0 === e.visibility ||
                e.visibility.findIndex(function(e) {
                  return e === t.flowType;
                }) > -1)
            );
          });
        },
        Ht = function(e, t) {
          return t.excludeTypes
            ? e.filter(function(e) {
                return !t.excludeTypes.includes(e.type);
              })
            : e;
        },
        Gt = function(e, t) {
          return t.excludeOperators
            ? e.filter(function(e) {
                return !t.excludeOperators.includes(e.type);
              })
            : e;
        },
        Kt = a(138),
        Wt = a.n(Kt),
        Yt = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).typeConfigs = void 0),
              (n.state = { config: n.props.initialType }),
              (n.handleChangeType = n.handleChangeType.bind(Object(g.a)(n))),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleChangeType',
                value: function(e) {
                  var t = this;
                  this.setState({ config: e }, function() {
                    return t.props.onChange(e);
                  });
                }
              },
              {
                key: 'getTypeConfigs',
                value: function() {
                  var e, t;
                  return (
                    void 0 === this.typeConfigs &&
                      (this.typeConfigs = ((e = dr), (t = this.context.config), Vt(Ht(e, t), t))),
                    this.typeConfigs
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    'div',
                    { className: ''.concat(this.props.__className, ' ').concat(Wt.a.type_list) },
                    k.createElement(
                      'p',
                      null,
                      Ft.t(
                        'forms.type_label',
                        'When a contact arrives at this point in your flow...'
                      )
                    ),
                    k.createElement(
                      'div',
                      null,
                      k.createElement(Lt, {
                        key: 'type_select',
                        name: 'type',
                        onChange: this.handleChangeType,
                        nameKey: 'description',
                        valueKey: 'type',
                        value: this.state.config,
                        options: this.getTypeConfigs(),
                        searchable: !0
                      })
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent);
      Yt.contextTypes = { config: bt };
      var Xt,
        Qt = a(15),
        Jt = a.n(Qt),
        Zt = function(e, t) {
          for (
            var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [],
              n = e || {},
              i = 0,
              s = Object.keys(t);
            i < s.length;
            i++
          ) {
            var o = s[i],
              r = t[o];
            if (Array.isArray(r)) {
              var l,
                u = Object(C.a)(r);
              try {
                var c = function() {
                  var t = l.value,
                    a = t.hasOwnProperty('value') && 'object' === typeof t.value;
                  if ((a && t.value.uuid) || t.uuid) {
                    var i = e[o].findIndex(function(e) {
                      return a ? e.value.uuid === t.value.uuid : e.uuid === t.uuid;
                    });
                    n =
                      i > -1
                        ? Jt()(n, Object(S.a)({}, o, { $merge: Object(S.a)({}, i, t) }))
                        : Jt()(n, Object(S.a)({}, o, { $push: [t] }));
                  }
                };
                for (u.s(); !(l = u.n()).done; ) c();
              } catch (R) {
                u.e(R);
              } finally {
                u.f();
              }
              delete t[o];
            }
          }
          var d,
            p = Object(C.a)(
              a.filter(function(e) {
                return 'object' === typeof e;
              })
            );
          try {
            for (p.s(); !(d = p.n()).done; )
              for (var h = d.value, m = 0, _ = Object.keys(h); m < _.length; m++) {
                var g = _[m],
                  v = h[g];
                if (Array.isArray(v)) {
                  var f,
                    y = Object(C.a)(v);
                  try {
                    var b = function() {
                      var e = f.value,
                        t = e.hasOwnProperty('value') && 'object' === typeof e.value;
                      ((t && e.value.uuid) || e.uuid) &&
                        (n = Jt()(
                          n,
                          Object(S.a)({}, g, function(a) {
                            return a.filter(function(a) {
                              return t ? a.value.uuid !== e.value.uuid : a.uuid !== e.uuid;
                            });
                          })
                        ));
                    };
                    for (y.s(); !(f = y.n()).done; ) b();
                  } catch (R) {
                    y.e(R);
                  } finally {
                    y.f();
                  }
                }
              }
          } catch (R) {
            p.e(R);
          } finally {
            p.f();
          }
          var k = a.filter(function(e) {
            return 'string' === typeof e;
          });
          n = Jt()(n, { $merge: t, $unset: k });
          for (var E = !0, w = 0, N = Object.keys(e); w < N.length; w++) {
            var O = N[w],
              x = n[O];
            if (Array.isArray(x)) {
              var j,
                T = Object(C.a)(x);
              try {
                for (T.s(); !(j = T.n()).done; ) {
                  var A = j.value;
                  if (ht(A)) {
                    E = !1;
                    break;
                  }
                }
              } catch (R) {
                T.e(R);
              } finally {
                T.f();
              }
            } else if (x && 'object' === typeof x && ht(x)) {
              E = !1;
              break;
            }
          }
          return Jt()(n, { $merge: { valid: E } });
        },
        $t = { typeConfig: null, userAddingAction: !1, settings: null },
        ea = function(e) {
          return { type: ye.UPDATE_NODE_EDITOR_SETTINGS, payload: { settings: e } };
        },
        ta = function(e) {
          return { type: ye.UPDATE_USER_ADDING_ACTION, payload: { userAddingAction: e } };
        },
        aa = Object(ve.combineReducers)({
          typeConfig: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : $t.typeConfig,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_TYPE_CONFIG:
                return t.payload.typeConfig;
              default:
                return e;
            }
          },
          userAddingAction: function() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : $t.userAddingAction,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_USER_ADDING_ACTION:
                return t.payload.userAddingAction;
              default:
                return e;
            }
          },
          settings: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : $t.settings,
              t = arguments.length > 1 ? arguments[1] : void 0;
            switch (t.type) {
              case ye.UPDATE_NODE_EDITOR_SETTINGS:
                return t.payload.settings;
              default:
                return e;
            }
          }
        }),
        na = a(139),
        ia = new RegExp(
          '^(?:(?:https?|ftp)://)(?:\\S+(?:u:\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$',
          'i'
        ),
        sa = function(e, t) {
          return function(a, n) {
            var i = (function(e) {
              var t = e;
              return 'string' === typeof e
                ? t + ''
                : (e && 'object' === typeof e && (t = e.name || void 0), t ? t + '' : null);
            })(n);
            return i && !e.test(i)
              ? { value: n, failures: [{ message: ''.concat(a, ' ').concat(t) }] }
              : { failures: [], value: n };
          };
        },
        oa = function(e, t, a) {
          var n = [],
            i = t;
          return (
            a.forEach(function(a) {
              var s = a(e, t);
              (i = s.value), (n = n.concat(s.failures));
            }),
            { value: i, validationFailures: n }
          );
        },
        ra = function(e, t) {
          var a = Ft.t('forms.is_required', 'is required');
          if (!t) return { value: t, failures: [{ message: ''.concat(e, ' ').concat(a) }] };
          if ('string' === typeof t) {
            if (0 === t.trim().length)
              return { value: t, failures: [{ message: ''.concat(e, ' ').concat(a) }] };
          } else if (Array.isArray(t) && 0 === t.length)
            return {
              value: t,
              failures: [
                { message: ''.concat(e, ' ').concat(Ft.t('forms.are_required', 'are required')) }
              ]
            };
          return { failures: [], value: t };
        },
        la = function(e, t) {
          return function(a, n) {
            return 'string' === typeof n && parseFloat(n) <= e
              ? {
                  value: n,
                  failures: [{ message: ''.concat(a, ' must be a more than ').concat(t) }]
                }
              : { failures: [], value: n };
          };
        },
        ua = function(e) {
          return function(t, a) {
            return e ? ra(t, a) : { failures: [], value: a };
          };
        },
        ca = function(e, t) {
          return function(a, n) {
            return t ? e(a, n) : { failures: [], value: n };
          };
        },
        da = function(e, t) {
          return 'string' === typeof t && t.trim().length > 0 && !na.validateHeaderName(t)
            ? { failures: [{ message: 'Invalid header name' }], value: t }
            : { failures: [], value: t };
        },
        pa =
          ((Xt = 10),
          function(e, t) {
            return Array.isArray(t) && t.length > Xt
              ? {
                  value: t,
                  failures: [
                    { message: ''.concat(e, ' cannot have more than ').concat(Xt, ' entries') }
                  ]
                }
              : { failures: [], value: t };
          }),
        ha = sa(/^(?!\d)/, "can't start with a number"),
        ma = sa(ia, 'is not a valid URL'),
        _a = sa(/^([-+]?((\.\d+)|(\d+)(\.\d+)?)$)/, 'must be a number'),
        ga = sa(/^[a-z\d\-_\s]+$/i, 'can only have letters and numbers'),
        va = sa(/^@.*$|^([-+]?((\.\d+)|(\d+)(\.\d+)?)$)/, 'must be a number'),
        fa = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n, i;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state =
                (i = n.props.nodeSettings).originalAction &&
                i.originalAction.type === Ee.add_input_labels
                  ? { labels: { value: i.originalAction.labels }, valid: !0 }
                  : { labels: { value: [] }, valid: !1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  if (this.handleLabelsChanged(this.state.labels.value, !0)) {
                    var a =
                      ((e = this.props.nodeSettings),
                      (t = this.state),
                      {
                        type: Ee.add_input_labels,
                        labels: t.labels.value,
                        uuid: lt(e, Ee.add_input_labels)
                      });
                    this.props.updateAction(a), this.props.onClose(!1);
                  }
                }
              },
              {
                key: 'handleLabelsChanged',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = { labels: oa(Ft.t('forms.labels', 'Labels'), e, [ua(t)]) },
                    n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleCreateAssetFromInput',
                value: function(e) {
                  return { name: e };
                }
              },
              {
                key: 'handleLabelCreated',
                value: function(e) {
                  this.props.addAsset('labels', e),
                    this.handleLabelsChanged(this.state.labels.value.concat(e));
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      { 'data-spec': 'label' },
                      k.createElement(
                        Pe.a,
                        { i18nKey: 'forms.add_labels_summary' },
                        'Select the labels to apply to the incoming message.'
                      )
                    ),
                    k.createElement(Bt, {
                      name: Ft.t('forms.labels', 'Labels'),
                      placeholder: Ft.t(
                        'enter_to_create_label',
                        'Enter the name of an existing label or create a new one'
                      ),
                      assets: this.props.assetStore.labels,
                      entry: this.state.labels,
                      searchable: !0,
                      multi: !0,
                      onChange: this.handleLabelsChanged,
                      createPrefix: Ft.t('create_label', 'Create Label') + ': ',
                      createAssetFromInput: this.handleCreateAssetFromInput,
                      onAssetCreated: this.handleLabelCreated
                    }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent);
      fa.contextTypes = { assetService: bt };
      var ya,
        ba,
        ka = function(e) {
          return ur.find(function(t) {
            return t.scheme === e;
          });
        },
        Ea = function(e) {
          return Ca(ka(e));
        },
        Ca = function(e) {
          return { value: e.scheme, name: e.path };
        },
        wa = function(e) {
          var t = e.scheme,
            a = e.path,
            n = ka(t),
            i = n ? n.path : t;
          return k.createElement(k.Fragment, null, Ft.t('add', 'Add'), ' ', i, ' ', H(a));
        },
        Sa = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a() {
            return Object(m.a)(this, a), t.apply(this, arguments);
          }
          return (
            Object(_.a)(a, [
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    jt,
                    { name: this.props.name, entry: this.props.entry },
                    k.createElement(Lt, {
                      key: this.props.name + '_select',
                      name: this.props.name,
                      nameKey: this.props.nameKey,
                      valueKey: this.props.valueKey,
                      placeholder: this.props.placeholder,
                      onChange: this.props.onChange,
                      value: this.props.entry.value,
                      options: this.props.options,
                      searchable: !1,
                      errors:
                        ((e = this.props.entry),
                        pt(e).map(function(e) {
                          return e.message;
                        })),
                      hideError: this.props.hideError,
                      style: this.props.style,
                      multi: this.props.multi,
                      disabled: this.props.disabled,
                      clearable: this.props.clearable
                    })
                  );
                  var e;
                }
              }
            ]),
            a
          );
        })(k.Component),
        Na = a(96),
        Oa = a.n(Na);
      !(function(e) {
        e.SMS = 'SMS';
      })(ya || (ya = {})),
        (function(e) {
          (e.small = 'small'), (e.normal = 'normal');
        })(ba || (ba = {}));
      var xa = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            Object(m.a)(this, a);
            var i = '';
            return (
              (n = t.call(this, e)).props.entry && n.props.entry.value && (i = n.props.entry.value),
              (n.state = { value: i }),
              Object(b.react)(Object(g.a)(n), {
                include: [/^on/, /Ref$/, 'setSelection', 'validate', /^has/, /^handle/]
              }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              { key: 'componentDidMount', value: function() {} },
              {
                key: 'handleChange',
                value: function(e) {
                  var t = e.currentTarget.value;
                  this.props.onChange && this.props.onChange(t, this.props.name);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e =
                      this.props.count && this.props.count === ya.SMS
                        ? k.createElement('temba-charcount', { text: this.props.entry.value })
                        : null,
                    t = {};
                  return (
                    this.props.textarea && (t.textarea = !0),
                    this.props.counter && (t.counter = this.props.counter),
                    k.createElement(
                      jt,
                      {
                        __className: this.props.__className,
                        name: this.props.name,
                        helpText: this.props.helpText,
                        showLabel: this.props.showLabel,
                        entry: this.props.entry
                      },
                      k.createElement(
                        'div',
                        { className: Oa.a.wrapper + ' ' + Oa.a[this.props.style || ba.normal] },
                        (function(e, t, a) {
                          return e.autocomplete
                            ? k.createElement(
                                'temba-completion',
                                Object.assign(
                                  {
                                    name: e.name,
                                    onInput: t,
                                    onBlur: e.onBlur,
                                    value: e.entry.value,
                                    placeholder: e.placeholder,
                                    maxLength: e.maxLength || -1,
                                    session: !0
                                  },
                                  a
                                )
                              )
                            : k.createElement(
                                'temba-textinput',
                                Object.assign(
                                  {
                                    name: e.name,
                                    onInput: t,
                                    onBlur: e.onBlur,
                                    value: e.entry.value,
                                    placeholder: e.placeholder,
                                    maxLength: e.maxLength || -1
                                  },
                                  a
                                )
                              );
                        })(this.props, this.handleChange, t),
                        e
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        ja = a(97),
        Ta = a.n(ja),
        Aa = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.add_contact_urn) {
                  var t = e.originalAction,
                    a = t.scheme,
                    n = t.path;
                  return { scheme: { value: Ea(a) }, path: { value: n }, valid: !0 };
                }
                return { scheme: { value: Ea('tel') }, path: { value: '' }, valid: !1 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  if (this.handlePathChanged(this.state.path.value, null, !0)) {
                    var a =
                      ((e = this.props.nodeSettings),
                      (t = this.state),
                      {
                        type: Ee.add_contact_urn,
                        uuid: lt(e, Ee.add_input_labels),
                        scheme: t.scheme.value.value,
                        path: t.path.value
                      });
                    this.props.updateAction(a), this.props.onClose(!1);
                  }
                }
              },
              {
                key: 'handleSchemeChanged',
                value: function(e) {
                  var t = { scheme: { value: e } },
                    a = Zt(this.state, t);
                  return this.setState(a), a.valid;
                }
              },
              {
                key: 'handlePathChanged',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                    n = { path: oa(Ft.t('forms.urn', 'URN'), e, [ua(a)]) },
                    i = Zt(this.state, n);
                  return this.setState(i), i.valid;
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      { 'data-spec': 'label' },
                      k.createElement(
                        Pe.a,
                        { i18nKey: 'forms.add_urn_summary' },
                        'Add a new URN to reach the contact such as a phone number.'
                      )
                    ),
                    k.createElement(
                      'div',
                      { style: { display: 'flex', alignItems: 'flex-end' } },
                      k.createElement(
                        'div',
                        { className: Ta.a.scheme_selection },
                        k.createElement(Sa, {
                          key: 'urn_type_select',
                          name: Ft.t('forms.urn_type', 'URN Type'),
                          entry: this.state.scheme,
                          onChange: this.handleSchemeChanged,
                          options: ur.map(function(e) {
                            return Ca(e);
                          })
                        })
                      ),
                      k.createElement(
                        'div',
                        { className: Ta.a.path },
                        k.createElement(xa, {
                          name: Ft.t('forms.urn', 'URN'),
                          placeholder: 'Enter the URN value',
                          entry: this.state.path,
                          onChange: this.handlePathChanged,
                          autocomplete: !0
                        })
                      )
                    ),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent),
        Ra = function(e) {
          var t = e.resthook;
          return k.createElement('div', null, t);
        },
        Ua = function(e) {
          var t = e.url;
          return k.createElement('div', null, G(t, 150));
        },
        Da = function(e) {
          return !!e.query;
        },
        Pa = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n, i;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state =
                (i = n.props.nodeSettings).originalAction &&
                i.originalAction.type === Ee.add_contact_groups
                  ? {
                      groups: {
                        value: i.originalAction.groups.map(function(e) {
                          return e.name_match ? { name: e.name_match, expression: !0 } : e;
                        })
                      },
                      valid: !0
                    }
                  : { groups: { value: null }, valid: !1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  if (this.handleGroupsChanged(this.state.groups.value, !0)) {
                    var a =
                      ((e = this.props.nodeSettings),
                      (t = this.state),
                      {
                        type: Ee.add_contact_groups,
                        groups: t.groups.value.map(function(e) {
                          return e.expression ? { name_match: e.name } : e;
                        }),
                        uuid: lt(e, Ee.add_contact_groups)
                      });
                    this.props.updateAction(a), this.props.onClose(!1);
                  }
                }
              },
              {
                key: 'handleGroupsChanged',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = { groups: oa(Ft.t('forms.groups', 'Groups'), e, [ua(t)]) },
                    n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleGroupAdded',
                value: function(e) {
                  this.props.addAsset('groups', e),
                    this.handleGroupsChanged((this.state.groups.value || []).concat(e), !1);
                }
              },
              {
                key: 'handleCreateAssetFromInput',
                value: function(e) {
                  return { name: e };
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      { 'data-spec': 'label' },
                      k.createElement(
                        Pe.a,
                        { i18nKey: 'forms.add_groups_summary' },
                        'Select the groups to add the contact to.'
                      )
                    ),
                    k.createElement(Bt, {
                      name: Ft.t('forms.groups', 'Groups'),
                      multi: !0,
                      noOptionsMessage: Ft.t(
                        'enter_to_create_group',
                        'Enter a name to create a new group'
                      ),
                      assets: this.props.assetStore.groups,
                      entry: this.state.groups,
                      onChange: this.handleGroupsChanged,
                      searchable: !0,
                      shouldExclude: Da,
                      placeholder: Ft.t('select_groups', 'Select Groups'),
                      expressions: !0,
                      createPrefix: Ft.t('create_group', 'Create Group') + ': ',
                      createAssetFromInput: this.handleCreateAssetFromInput,
                      onAssetCreated: this.handleGroupAdded
                    }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Fa = function(e, t) {
          var a = e.type,
            n = e.groups,
            i = [];
          return a !== Ee.remove_contact_groups || (n && n.length)
            ? ct(
                n.map(function(e) {
                  return e.name_match
                    ? { id: e.name_match, name: e.name_match, type: fe.GroupNameMatch }
                    : { id: e.uuid, name: e.name, type: fe.Group };
                }),
                5,
                t
              )
            : (i.push(
                (function() {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 'remove_from_all',
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 'remove_from_all',
                    a =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 'Remove from all groups';
                  return k.createElement('div', { key: e, 'data-spec': t }, a);
                })()
              ),
              i);
        },
        Ia = function(e, t) {
          return (function(e, t) {
            var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'content';
            return k.createElement('div', { 'data-spec': a }, Fa(e, t));
          })(e, t.config.endpoints);
        };
      Ia.contextTypes = { config: bt };
      var Ma = Ia,
        La = a(65),
        za = a.n(La),
        Ba = St.a.bind(za.a),
        qa = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = { checked: n.props.checked }),
              (n.handleChange = n.handleChange.bind(Object(g.a)(n))),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleChange',
                value: function(e) {
                  var t = this;
                  e && (e.preventDefault(), e.stopPropagation()),
                    this.setState({ checked: !this.state.checked }, function() {
                      t.props.onChange && t.props.onChange(t.state.checked);
                    });
                }
              },
              {
                key: 'validate',
                value: function() {
                  return !0;
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.state.checked ? 'fe-check-square' : 'fe-square';
                  return k.createElement(
                    'label',
                    {
                      className: Ba(za.a.label, this.props.labelClassName),
                      onClick: this.handleChange
                    },
                    k.createElement('span', {
                      'data-spec': 'checkbox',
                      className: Ba(e, this.props.checkboxClassName)
                    }),
                    K(W(this.props.title))(
                      k.createElement(
                        'div',
                        { 'data-spec': 'title', className: za.a.title },
                        this.props.title
                      )
                    ),
                    K(W(this.props.description))(
                      k.createElement(
                        'div',
                        {
                          'data-spec': 'description',
                          className: this.props.title ? za.a.description : za.a.description_solo
                        },
                        this.props.description
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Va = a(140),
        Ha = a.n(Va),
        Ga = Ft.t('forms.remove_groups_summary', 'Select the groups to remove the contact from.'),
        Ka =
          (Ft.t('errors.group_not_found', 'Enter the name of an existing group'),
          Ft.t('forms.remove_groups_placeholder', 'Enter the name of an existing group'),
          Ft.t('forms.remove_from_all_label', 'Remove from all')),
        Wa = Ft.t(
          'forms.remove_from_all_summary',
          "Remove the active contact from all groups they're a member of."
        ),
        Ya = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.remove_contact_groups) {
                  var t = e.originalAction,
                    a = t.groups || [];
                  return {
                    groups: { value: a },
                    removeAll: 0 === a.length || t.all_groups,
                    valid: !0
                  };
                }
                return { groups: { value: null }, removeAll: !1, valid: !1 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  if (this.handleGroupsChanged(this.state.groups.value, !0)) {
                    var a =
                      ((e = this.props.nodeSettings),
                      (t = this.state),
                      {
                        type: Ee.remove_contact_groups,
                        groups: t.removeAll
                          ? []
                          : t.groups.value.map(function(e) {
                              return { uuid: e.uuid, name: e.name };
                            }),
                        all_groups: !!t.removeAll,
                        uuid: lt(e, Ee.remove_contact_groups)
                      });
                    this.props.updateAction(a), this.props.onClose(!1);
                  }
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {},
                    n = this.state.removeAll ? [] : [ua(t)];
                  e.hasOwnProperty('removeAll') &&
                    ((a.removeAll = e.removeAll), e.removeAll && (n = [])),
                    e.hasOwnProperty('groups') &&
                      (a.groups = oa(Ft.t('forms.groups', 'Groups'), e.groups, n));
                  var i = Zt(this.state, a);
                  return this.setState(i), i.valid;
                }
              },
              {
                key: 'handleGroupsChanged',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                  return this.handleUpdate({ groups: e }, t);
                }
              },
              {
                key: 'handleRemoveAllUpdate',
                value: function(e) {
                  return this.handleUpdate({ removeAll: e });
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    K(!this.state.removeAll)(
                      k.createElement(
                        'div',
                        null,
                        k.createElement('p', { 'data-spec': 'label' }, Ga),
                        k.createElement(Bt, {
                          name: Ft.t('forms.groups', 'Groups'),
                          placeholder: Ft.t('select_groups', 'Select Groups'),
                          assets: this.props.assetStore.groups,
                          entry: this.state.groups,
                          shouldExclude: Da,
                          searchable: !0,
                          onChange: this.handleGroupsChanged,
                          multi: !0
                        })
                      )
                    ),
                    k.createElement(qa, {
                      name: Ka,
                      title: Ka,
                      labelClassName: this.state.removeAll ? '' : Ha.a.checkbox,
                      checked: this.state.removeAll,
                      description: Wa,
                      onChange: this.handleRemoveAllUpdate
                    }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      Ya.contextTypes = { assetService: bt };
      var Xa = a(29),
        Qa = a.n(Xa),
        Ja = function(e) {
          var t = e.originalNode,
            a = t && t.node;
          if (e.originalAction && e.originalAction.type) return hr(e.originalAction.type);
          if (a && a.actions && a.actions.length > 0)
            return hr(a.actions[a.actions.length - 1].type);
          try {
            var n = mr(t),
              i = hr(n);
            if (i.type !== Ee.missing) return i;
          } catch (Error) {}
          if (a && a.router) return hr(a.router.type);
          throw new Error("Couldn't determine type config for: ".concat(a.uuid));
        },
        Za = function(e, t, a) {
          return (
            !(!e || 0 === e.length) &&
            (t
              ? !!e.find(function(e) {
                  return e.language === a.id;
                })
              : !!e.find(function(e) {
                  return !e.language;
                }))
          );
        },
        $a = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = {},
                  a = e.localizations[0],
                  n = a.getObject();
                return (
                  ((e.originalAction && hr(e.originalAction.type).localizeableKeys) || []).forEach(
                    function(e) {
                      t[e] = { value: e in a.localizedKeys ? n[e] : '' };
                    }
                  ),
                  { keyValues: t, valid: !0 }
                );
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^on/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleKeyUpdate',
                value: function(e, t) {
                  var a = Object(y.a)({}, this.state.keyValues);
                  return (a[t.toLowerCase()] = { value: e }), this.setState({ keyValues: a }), !0;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e = this,
                    t = {};
                  Object.keys(this.state.keyValues).forEach(function(a) {
                    var n = e.state.keyValues[a].value;
                    n ? (t[a] = n) : delete t[a];
                  }),
                    this.props.updateLocalizations(this.props.language.id, [
                      { uuid: this.props.nodeSettings.originalAction.uuid, translations: t }
                    ]),
                    this.props.onClose(!1);
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this,
                    a = Ja(this.props.nodeSettings),
                    n = [],
                    i = Ft.t('forms.translation', 'Translation');
                  return (
                    a.localizeableKeys.forEach(function(a) {
                      var s = a[0].toUpperCase() + a.slice(1),
                        o = k.createElement(
                          'div',
                          { key: 'localize_form_'.concat(a) },
                          k.createElement(
                            'div',
                            { 'data-spec': 'translation-container' },
                            k.createElement(
                              'div',
                              { 'data-spec': 'text-to-translate', className: Qa.a.translate_from },
                              t.props.nodeSettings.originalAction[a]
                            )
                          ),
                          k.createElement(xa, {
                            name: s,
                            showLabel: !1,
                            onChange: t.handleKeyUpdate,
                            entry: t.state.keyValues[a],
                            placeholder: ''.concat(t.props.language.name, ' ').concat(i),
                            autocomplete: !0,
                            focus: !0,
                            textarea: !0
                          })
                        );
                      if (e) {
                        var r = Ft.t('forms.translation', 'Translation');
                        n.push({
                          name: s + ' ' + r,
                          body: o,
                          checked: !!t.state.keyValues[a].value
                        });
                      } else e = o;
                    }),
                    k.createElement(
                      me,
                      { title: a.name, headerClass: a.type, buttons: this.getButtons(), tabs: n },
                      e,
                      ot(this.props)
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      $a.contextTypes = { config: bt };
      var en = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)).props.entry
                ? (n.state = { currentInput: n.props.entry })
                : (n.state = { currentInput: { value: '' } }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleChange',
                value: function(e) {
                  this.props.onChange(
                    e.map(function(e) {
                      return e.value;
                    })
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.items.value.map(function(e) {
                    return { name: e, value: e };
                  });
                  return k.createElement(
                    k.Fragment,
                    null,
                    this.props.helpText
                      ? k.createElement('p', null, this.props.helpText)
                      : k.createElement('p', null),
                    k.createElement(Lt, {
                      name: this.props.name,
                      placeholder: this.props.name,
                      onChange: this.handleChange,
                      value: e,
                      multi: !0,
                      tags: !0,
                      searchable: !0,
                      expressions: !0
                    })
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        tn = a(74),
        an = a.n(tn),
        nn = function(e) {
          var t = e.text;
          e.text.startsWith('@')
            ? (t = '@(exp)')
            : e.maxLength &&
              t.length > e.maxLength &&
              (t = e.text.substring(0, e.maxLength) + '...');
          var a = [an.a.pill];
          return (
            e.large && a.push(an.a.large),
            e.onClick && a.push(an.a.clickable),
            k.createElement(
              'div',
              {
                style: e.style,
                'data-advanced': e.advanced,
                onClick: e.onClick,
                className: a.join(' ')
              },
              t,
              e.icon
                ? k.createElement('span', {
                    'data-advanced': e.advanced,
                    className: an.a.icon + ' ' + e.icon
                  })
                : null
            )
          );
        },
        sn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).filePicker = void 0),
              (n.state = {}),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleRemoveUpload',
                value: function() {
                  this.props.onUploadChanged(null);
                }
              },
              {
                key: 'handleUploadFile',
                value: function(e) {
                  var t = this,
                    a = new FormData();
                  a.append('file', e[0]);
                  var n = Ye('csrftoken'),
                    i = n ? { 'X-CSRFToken': n } : {};
                  ze.a
                    .post(this.props.endpoint, a, { headers: i })
                    .then(function(e) {
                      t.props.onUploadChanged(e.data.url);
                    })
                    .catch(function(e) {
                      console.log(e);
                    });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this;
                  return k.createElement(
                    k.Fragment,
                    null,
                    k.createElement('input', {
                      style: { display: 'none' },
                      ref: function(t) {
                        e.filePicker = t;
                      },
                      type: 'file',
                      onChange: function(t) {
                        return e.handleUploadFile(t.target.files);
                      }
                    }),
                    this.props.url
                      ? k.createElement(le, {
                          iconName: 'fe-trash',
                          name: this.props.removeText,
                          topSpacing: !0,
                          onClick: this.handleRemoveUpload,
                          type: O.tertiary
                        })
                      : k.createElement(le, {
                          iconName: this.props.icon,
                          name: this.props.uploadText,
                          topSpacing: !0,
                          onClick: function() {
                            e.filePicker.click();
                          },
                          type: O.tertiary
                        })
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        on = [
          { value: 'image', name: Ft.t('forms.image_url', 'Image URL') },
          { value: 'audio', name: Ft.t('forms.audio_url', 'Audio URL') },
          { value: 'video', name: Ft.t('forms.video_url', 'Video URL') },
          { value: 'application', name: Ft.t('forms.pdf_url', 'PDF Document URL') }
        ],
        rn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = {
                  message: { value: '' },
                  quickReplies: { value: [] },
                  templateVariables: [],
                  templating: null,
                  attachments: [],
                  audio: { value: null },
                  valid: !0
                };
                if (
                  e.originalAction &&
                  (e.originalAction.type === Ee.send_msg || e.originalAction.type === Ee.say_msg) &&
                  e.localizations &&
                  e.localizations.length > 0
                ) {
                  e.originalAction &&
                    e.originalAction.templating &&
                    ((t.templating = e.originalAction.templating),
                    (t.templateVariables = t.templating.variables.map(function(e) {
                      return { value: '' };
                    })));
                  var a,
                    n = Object(C.a)(e.localizations);
                  try {
                    var i = function() {
                      var e = a.value;
                      if (e.isLocalized()) {
                        var n = e.getObject();
                        if (n.text) {
                          var i = n;
                          (t.message.value = 'text' in e.localizedKeys ? i.text : ''),
                            (t.audio.value = 'audio_url' in e.localizedKeys ? i.audio_url : null),
                            (t.quickReplies.value =
                              ('quick_replies' in e.localizedKeys && i.quick_replies) || []),
                            (t.valid = !0);
                        }
                        if (n.attachments) {
                          var s = [];
                          (n.attachments || []).forEach(function(e) {
                            var t = e.indexOf(':'),
                              a = { type: e.substring(0, t), url: e.substring(t + 1) };
                            s.push(a);
                          }),
                            (t.attachments = s);
                        }
                        if (n.variables) {
                          var o = n;
                          (t.templateVariables = o.variables.map(function(t) {
                            return { value: 'variables' in e.localizedKeys ? t : '' };
                          })),
                            (t.valid = !0);
                        }
                      }
                    };
                    for (n.s(); !(a = n.n()).done; ) i();
                  } catch (s) {
                    n.e(s);
                  } finally {
                    n.f();
                  }
                }
                return t;
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^on/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleMessageUpdate',
                value: function(e) {
                  return this.handleUpdate({ text: e });
                }
              },
              {
                key: 'handleQuickRepliesUpdate',
                value: function(e) {
                  return this.handleUpdate({ quickReplies: e });
                }
              },
              {
                key: 'handleAudioChanged',
                value: function(e) {
                  this.handleUpdate({ audio: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = {};
                  e.hasOwnProperty('text') &&
                    (t.message = oa(Ft.t('forms.message', 'Message'), e.text, [])),
                    e.hasOwnProperty('quickReplies') &&
                      (t.quickReplies = oa(
                        Ft.t('forms.quick_replies', 'Quick Replies'),
                        e.quickReplies,
                        [pa]
                      )),
                    e.hasOwnProperty('audio') && (t.audio = { value: e.audio });
                  var a = Zt(this.state, t);
                  return this.setState(a), a.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e = this.state,
                    t = e.message,
                    a = e.quickReplies,
                    n = e.audio,
                    i = e.templateVariables,
                    s = e.attachments;
                  if (
                    !(Ja(this.props.nodeSettings).localizeableKeys.indexOf('quick_replies') > -1) ||
                    this.handleQuickRepliesUpdate(this.state.quickReplies.value)
                  ) {
                    var o = {};
                    t.value && (o.text = t.value),
                      a.value && a.value.length > 0 && (o.quick_replies = a.value),
                      s.length > 0 &&
                        (o.attachments = s
                          .filter(function(e) {
                            return e.url.trim().length > 0;
                          })
                          .map(function(e) {
                            return ''.concat(e.type, ':').concat(e.url);
                          })),
                      n.value && (o.audio_url = n.value);
                    var r = [
                      { uuid: this.props.nodeSettings.originalAction.uuid, translations: o }
                    ];
                    i.find(function(e) {
                      return e.value.length > 0;
                    }) &&
                      r.push({
                        uuid: this.state.templating.uuid,
                        translations: {
                          variables: i.map(function(e) {
                            return e.value;
                          })
                        }
                      }),
                      this.props.updateLocalizations(this.props.language.id, r),
                      this.props.onClose(!1);
                  }
                }
              },
              {
                key: 'handleAttachmentRemoved',
                value: function(e) {
                  var t = Jt()(this.state.attachments, { $splice: [[e, 1]] });
                  this.setState({ attachments: t });
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleAddQuickReply',
                value: function(e) {
                  var t = Object(ge.a)(this.state.quickReplies.value);
                  return (
                    !(t.length >= 10) &&
                    (!t.find(function(t) {
                      return t.toLowerCase() === e.toLowerCase();
                    }) &&
                      (t.push(e), this.setState({ quickReplies: { value: t } }), !0))
                  );
                }
              },
              {
                key: 'handleQuickReplyChanged',
                value: function(e) {
                  this.handleUpdate({ quickReplies: e });
                }
              },
              {
                key: 'handleTemplateVariableChanged',
                value: function(e, t) {
                  var a = oa('Variable '.concat(t + 1), e, []),
                    n = Jt()(this.state.templateVariables, { $merge: Object(S.a)({}, t, a) });
                  this.setState({ templateVariables: n });
                }
              },
              {
                key: 'renderAttachment',
                value: function(e, t) {
                  var a,
                    n = this,
                    i = this.state.attachments;
                  return k.createElement(
                    'div',
                    { className: Qa.a.url_attachment, key: e > -1 ? 'url_attachment_' + e : $() },
                    k.createElement(
                      'div',
                      { className: Qa.a.type_choice },
                      k.createElement(Sa, {
                        key: 'attachment_type_' + e,
                        style: Pt.small,
                        name: Ft.t('forms.type_options', 'Type Options'),
                        placeholder: 'Add Attachment',
                        entry: {
                          value:
                            e > -1
                              ? ((a = t.type),
                                on.find(function(e) {
                                  return e.value === a;
                                }))
                              : null
                        },
                        onChange: function(a) {
                          (i =
                            -1 === e
                              ? Jt()(i, { $push: [{ type: a.value, url: '' }] })
                              : Jt()(
                                  i,
                                  Object(S.a)({}, e, { $set: { type: a.value, url: t.url } })
                                )),
                            n.setState({ attachments: i });
                        },
                        options: on
                      })
                    ),
                    e > -1
                      ? k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'div',
                            { className: Qa.a.url },
                            k.createElement(xa, {
                              placeholder: 'URL',
                              name: Ft.t('forms.url', 'URL'),
                              style: ba.small,
                              onChange: function(a) {
                                (i = Jt()(
                                  i,
                                  Object(S.a)({}, e, { $set: { type: t.type, url: a } })
                                )),
                                  n.setState({ attachments: i });
                              },
                              entry: { value: t.url },
                              autocomplete: !0
                            })
                          ),
                          k.createElement(
                            'div',
                            { className: Qa.a.remove },
                            k.createElement(nn, {
                              icon: 'fe-x',
                              text: ' Remove',
                              large: !0,
                              onClick: function() {
                                n.handleAttachmentRemoved(e);
                              }
                            })
                          )
                        )
                      : null
                  );
                }
              },
              {
                key: 'renderAttachments',
                value: function() {
                  var e = this,
                    t = this.state.attachments.map(function(t, a) {
                      return e.renderAttachment(a, t);
                    }),
                    a =
                      this.state.attachments.length < 3
                        ? this.renderAttachment(-1, { url: '', type: '' })
                        : null;
                  return k.createElement(
                    k.Fragment,
                    null,
                    k.createElement(
                      'p',
                      null,
                      k.createElement(
                        Pe.a,
                        {
                          i18nKey: 'forms.add_attachments',
                          values: { language: this.props.language.name }
                        },
                        'Add an attachment for this message in [[language]] language'
                      )
                    ),
                    t,
                    a
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = Ja(this.props.nodeSettings),
                    a = [];
                  if (
                    (t.localizeableKeys.indexOf('attachments') > -1 &&
                      a.push({
                        name: 'Attachments',
                        body: this.renderAttachments(),
                        checked: this.state.attachments.length > 0
                      }),
                    this.state.templating &&
                      t.localizeableKeys.indexOf('templating.variables') > -1)
                  ) {
                    var n = !!this.state.templateVariables.find(function(e) {
                        return e.value.length > 0;
                      }),
                      i = Ft.t('forms.variable', 'Variable');
                    a.push({
                      name: 'WhatsApp',
                      body: k.createElement(
                        k.Fragment,
                        null,
                        k.createElement(
                          'p',
                          null,
                          Ft.t(
                            'forms.whatsapp_warning',
                            'Sending messages over a WhatsApp channel requires that a template be used if you have not received a message from a contact in the last 24 hours. Setting a template to use over WhatsApp is especially important for the first message in your flow.'
                          )
                        ),
                        this.state.templating && this.state.templating.variables.length > 0
                          ? k.createElement(
                              k.Fragment,
                              null,
                              ee(0, this.state.templating.variables.length).map(function(t) {
                                var a = e.state.templateVariables[t] || { value: '' };
                                return k.createElement(
                                  'div',
                                  { className: Qa.a.variable, key: 'tr_arg_' + t },
                                  k.createElement(xa, {
                                    name: ''
                                      .concat(Ft.t('forms.variable', 'Variable'), ' ')
                                      .concat(t + 1),
                                    showLabel: !1,
                                    placeholder: ''
                                      .concat(e.props.language.name, ' ')
                                      .concat(i, ' ')
                                      .concat(t + 1),
                                    onChange: function(a) {
                                      e.handleTemplateVariableChanged(a, t);
                                    },
                                    entry: a,
                                    autocomplete: !0
                                  })
                                );
                              })
                            )
                          : null
                      ),
                      checked: n
                    });
                  }
                  t.localizeableKeys.indexOf('quick_replies') > -1 &&
                    a.push({
                      name: 'Quick Replies',
                      body: k.createElement(
                        k.Fragment,
                        null,
                        k.createElement(en, {
                          name: Ft.t('forms.quick_reply', 'Quick Reply'),
                          helpText: k.createElement(
                            Pe.a,
                            {
                              i18nKey: 'forms.localized_quick_replies',
                              values: { language: this.props.language.name }
                            },
                            'Add a new [[language]] Quick Reply and press enter.'
                          ),
                          items: this.state.quickReplies,
                          onChange: this.handleQuickReplyChanged
                        })
                      ),
                      checked: this.state.quickReplies.value.length > 0
                    });
                  var s = null;
                  t.localizeableKeys.indexOf('audio_url') > 0 &&
                    (s = k.createElement(sn, {
                      icon: 'fe-mic',
                      uploadText: 'Upload Recording',
                      removeText: 'Remove Recording',
                      url: this.state.audio.value,
                      endpoint: this.context.config.endpoints.attachments,
                      onUploadChanged: this.handleAudioChanged
                    }));
                  var o = Ft.t('forms.translation', 'Translation');
                  return k.createElement(
                    me,
                    { title: t.name, headerClass: t.type, buttons: this.getButtons(), tabs: a },
                    k.createElement(
                      'div',
                      { 'data-spec': 'translation-container' },
                      k.createElement(
                        'div',
                        { 'data-spec': 'text-to-translate', className: Qa.a.translate_from },
                        this.props.nodeSettings.originalAction.text
                      )
                    ),
                    k.createElement(xa, {
                      name: Ft.t('forms.message', 'Message'),
                      showLabel: !1,
                      onChange: this.handleMessageUpdate,
                      entry: this.state.message,
                      placeholder: ''.concat(this.props.language.name, ' ').concat(o),
                      autocomplete: !0,
                      focus: !0,
                      textarea: !0
                    }),
                    s,
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      rn.contextTypes = { config: bt };
      var ln = function(e) {
          var t = e.type;
          return k.createElement(
            'div',
            { className: 'placeholder' },
            'No implementation yet for ',
            t
          );
        },
        un = function(e) {
          return k.createElement('div', null, e.audio_url);
        },
        cn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n, i;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state =
                (i = n.props.nodeSettings).originalAction && i.originalAction.type === Ee.play_audio
                  ? { audio: { value: i.originalAction.audio_url }, valid: !0 }
                  : { audio: { value: '' }, valid: !1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleAudioUpdate',
                value: function(e) {
                  var t = {};
                  t.audio = oa(Ft.t('forms.recording', 'Recording'), e, [ra]);
                  var a = Zt(this.state, t);
                  return this.setState(a), a.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e;
                  this.handleAudioUpdate(this.state.audio.value) &&
                    (this.props.updateAction(
                      ((e = this.props.nodeSettings),
                      {
                        audio_url: this.state.audio.value,
                        type: Ee.play_audio,
                        uuid: lt(e, Ee.say_msg)
                      })
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('p', null, Ft.t('forms.recording_label', 'Previous Recording')),
                    k.createElement(xa, {
                      name: Ft.t('forms.message', 'Message'),
                      showLabel: !1,
                      onChange: this.handleAudioUpdate,
                      entry: this.state.audio,
                      autocomplete: !0,
                      focus: !0,
                      helpText: k.createElement(
                        Pe.a,
                        { i18nKey: 'forms.play_audio_help_text' },
                        'Enter a variable that contains a recording the contact has previously recorded. For example, @results.voicemail or @fields.short_bio.'
                      )
                    }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        dn = a(57),
        pn = a.n(dn),
        hn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).ele = void 0),
              (n.stroke = 1),
              (n.radius = 9),
              (n.radiusNormalized = n.radius - 2 * n.stroke),
              (n.circumference = 2 * n.radiusNormalized * Math.PI),
              (n.state = { durationSeconds: 0, currentSeconds: 0, playing: !1, progress: 0 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleTimeUpdate',
                value: function(e) {
                  var t = this,
                    a = this.ele.currentTime || 0,
                    n = this.ele.duration || 0;
                  this.setState(function(e) {
                    return (
                      (t.ele.ended || 0 === a) &&
                        e.playing &&
                        setTimeout(function() {
                          t.setState({ progress: 0, playing: !1 });
                        }, 500),
                      {
                        currentSeconds: t.ele.ended ? 0 : a,
                        durationSeconds: n,
                        playing: a > 0,
                        progress: n > 0 ? Math.floor((a / n) * 100) : 0
                      }
                    );
                  });
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  this.props.triggered && this.handleTogglePlay(null);
                }
              },
              {
                key: 'handleTogglePlay',
                value: function(e) {
                  this.state.playing
                    ? (this.ele.pause(), (this.ele.currentTime = 0))
                    : this.ele.play(),
                    null !== e && (e.preventDefault(), e.stopPropagation());
                }
              },
              {
                key: 'handleRef',
                value: function(e) {
                  return (this.ele = e);
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  this.props.url !== e.url &&
                    this.setState({
                      durationSeconds: 0,
                      currentSeconds: 0,
                      playing: !1,
                      progress: 0
                    });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.state.progress || 0,
                    t = this.circumference - (e / 100) * this.circumference;
                  return k.createElement(
                    'div',
                    {
                      className: pn.a.player + ' ' + (this.state.playing ? pn.a.playing : ''),
                      style: { height: 2 * this.radius, width: 2 * this.radius },
                      onMouseDown: this.handleTogglePlay
                    },
                    k.createElement('audio', {
                      ref: this.handleRef,
                      onTimeUpdate: this.handleTimeUpdate,
                      src: this.props.url
                    }),
                    k.createElement(
                      'div',
                      { className: pn.a.circles },
                      k.createElement(
                        'svg',
                        { height: 2 * this.radius, width: 2 * this.radius },
                        k.createElement('circle', {
                          className: pn.a.circle_background,
                          stroke: '#fff',
                          fill: '#fff',
                          strokeWidth: this.stroke,
                          r: this.radiusNormalized,
                          cx: this.radius,
                          cy: this.radius
                        }),
                        k.createElement('circle', {
                          className: pn.a.circle_background,
                          stroke: '#ddd',
                          fill: 'transparent',
                          strokeWidth: this.stroke,
                          r: this.radiusNormalized,
                          cx: this.radius,
                          cy: this.radius
                        }),
                        k.createElement('circle', {
                          className: pn.a.circle_foreground,
                          stroke: 'cornflowerblue',
                          fill: 'transparent',
                          strokeWidth: this.stroke,
                          strokeDasharray: this.circumference + ' ' + this.circumference,
                          style: { strokeDashoffset: t },
                          r: this.radiusNormalized,
                          cx: this.radius,
                          cy: this.radius
                        })
                      )
                    ),
                    k.createElement('div', {
                      className:
                        pn.a.button + ' ' + (this.state.playing ? 'fe-stop' : 'fe-play_arrow')
                    })
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        mn = a(98),
        _n = a.n(mn),
        gn = Ft.t('actions.say_msg.placeholder', 'Send a message to the contact'),
        vn = function(e) {
          return e.text
            ? k.createElement(
                k.Fragment,
                null,
                k.createElement('div', { className: _n.a.text }, e.text),
                e.audio_url
                  ? k.createElement(
                      'div',
                      { className: _n.a.recording },
                      k.createElement(hn, { url: e.audio_url })
                    )
                  : null
              )
            : k.createElement('div', { className: 'placeholder' }, gn);
        },
        fn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.say_msg) {
                  var t = e.originalAction;
                  return { message: { value: t.text }, audio: { value: t.audio_url }, valid: !0 };
                }
                return { message: { value: '' }, audio: { value: '' }, valid: !1 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('text') &&
                    (a.message = oa(Ft.t('forms.message', 'Message'), e.text, [ua(t)]));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleMessageUpdate',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                  return this.handleUpdate({ text: e }, a);
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  this.handleUpdate({ text: this.state.message.value }, !0) &&
                    (this.props.updateAction(
                      ((e = this.props.nodeSettings),
                      {
                        text: (t = this.state).message.value,
                        audio_url: t.audio.value,
                        type: Ee.say_msg,
                        uuid: lt(e, Ee.say_msg)
                      })
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleUploadChanged',
                value: function(e) {
                  this.setState({ audio: { value: e } });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(xa, {
                      name: Ft.t('forms.message', 'Message'),
                      showLabel: !1,
                      onChange: this.handleMessageUpdate,
                      entry: this.state.message,
                      autocomplete: !0,
                      focus: !0,
                      textarea: !0
                    }),
                    k.createElement(sn, {
                      icon: 'fe-mic',
                      uploadText: 'Upload Recording',
                      removeText: 'Remove Recording',
                      url: this.state.audio.value,
                      endpoint: this.context.config.endpoints.attachments,
                      onUploadChanged: this.handleUploadChanged
                    }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      fn.contextTypes = { config: bt };
      var yn = a(75),
        bn = a.n(yn),
        kn = Ft.t('actions.send_broadcast.placeholder', 'Send a message to the contact'),
        En = function(e, t) {
          var a = ut(e);
          return e.text
            ? k.createElement(
                'div',
                { className: bn.a.node },
                k.createElement(
                  'div',
                  { className: bn.a.to, key: e.uuid + '_broadcast_recipients' },
                  ct(a, 5, t.config.endpoints)
                ),
                k.createElement(
                  'div',
                  { className: bn.a.message },
                  e.text.split(/\r?\n/).map(function(t, a) {
                    return k.createElement('div', { key: e.uuid + a, className: bn.a.line }, t);
                  })
                )
              )
            : k.createElement('div', { className: 'placeholder' }, kn);
        };
      En.contextTypes = { config: bt };
      var Cn = En,
        wn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.send_broadcast) {
                  var t = e.originalAction;
                  if (e.localizations && e.localizations.length > 0) {
                    if (!e.localizations[0].isLocalized())
                      return { message: { value: '' }, recipients: { value: [] }, valid: !0 };
                    t = e.localizations[0].getObject();
                  }
                  return { message: { value: t.text }, recipients: { value: ut(t) }, valid: !0 };
                }
                return { message: { value: '' }, recipients: { value: [] }, valid: !1 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleRecipientsChanged',
                value: function(e) {
                  return this.handleUpdate({ recipients: e });
                }
              },
              {
                key: 'handleMessageUpdate',
                value: function(e) {
                  return this.handleUpdate({ text: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('recipients') &&
                    (a.recipients = oa(Ft.t('forms.recipients', 'Recipients'), e.recipients, [
                      ua(t)
                    ])),
                    e.hasOwnProperty('text') &&
                      (a.message = oa(Ft.t('forms.message', 'Message'), e.text, [ua(t)]));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  this.handleUpdate(
                    { text: this.state.message.value, recipients: this.state.recipients.value },
                    !0
                  ) &&
                    (this.props.updateAction(
                      ((e = this.props.nodeSettings),
                      (t = this.state),
                      {
                        legacy_vars: mt(t.recipients.value),
                        contacts: _t(t.recipients.value, fe.Contact),
                        groups: _t(t.recipients.value, fe.Group),
                        text: t.message.value,
                        type: Ee.send_broadcast,
                        uuid: lt(e, Ee.send_broadcast)
                      })
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(Bt, {
                      name: Ft.t('forms.recipients', 'Recipients'),
                      placeholder: Ft.t('forms.select_contacts', 'Select Contacts'),
                      assets: this.props.assetStore.recipients,
                      entry: this.state.recipients,
                      searchable: !0,
                      multi: !0,
                      expressions: !0,
                      onChange: this.handleRecipientsChanged
                    }),
                    k.createElement('p', null),
                    k.createElement(xa, {
                      name: Ft.t('forms.message', 'Message'),
                      showLabel: !1,
                      count: ya.SMS,
                      onChange: this.handleMessageUpdate,
                      entry: this.state.message,
                      autocomplete: !0,
                      focus: !0,
                      textarea: !0
                    }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      wn.contextTypes = { endpoints: bt, assetService: bt };
      var Sn = function(e) {
          var t = e.subject;
          return k.createElement('div', null, t);
        },
        Nn = {
          control: function(e, t) {
            return Object(y.a)(
              Object(y.a)({}, e),
              {},
              {
                borderColor: '#e6e6e6',
                boxShadow: 'none',
                transition: 'all 0.3s ease-in-out',
                '&:hover': { borderColor: '#e6e6e6' },
                '&:focus-within': {
                  boxShadow: 'var(--widget-box-shadow-focused) !important',
                  border: '1px solid #a4cafe !important'
                }
              }
            );
          },
          input: function(e, t) {
            return Object(y.a)(
              Object(y.a)({}, e),
              {},
              {
                marginLeft: '0px',
                caretColor: '#999',
                marginBottom: '0px',
                boxShadow: 'none',
                border: 'none'
              }
            );
          },
          multiValue: function(e) {
            return Object(y.a)(
              Object(y.a)({}, e),
              {},
              {
                maxHeight: 24,
                minHeight: 24,
                lineHeight: '17px',
                backgroundColor: 'hsl(0, 0%, 94%)',
                border: '1px solid hsl(0, 0%, 85%)'
              }
            );
          }
        },
        On = a(157),
        xn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateTags',
                value: function(e) {
                  this.props.onChange &&
                    this.props.onChange(
                      (function(e) {
                        return (e || []).map(function(e) {
                          return e.label;
                        });
                      })(e)
                    );
                }
              },
              {
                key: 'handleCheckValid',
                value: function(e) {
                  return !(!e || 0 === e.trim().length) && this.props.onCheckValid(e);
                }
              },
              {
                key: 'arrowRenderer',
                value: function() {
                  return E.a.createElement('div', null);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t =
                      0 === (this.props.entry.validationFailures || []).length
                        ? 'react-select select-base'
                        : 'react-select select-base select-invalid',
                    a = (function(e) {
                      return e.value.map(function(e) {
                        return { label: e, value: e };
                      });
                    })(this.props.entry);
                  return E.a.createElement(
                    jt,
                    { name: this.props.name, entry: this.props.entry },
                    E.a.createElement(On.a, {
                      styles: Nn,
                      className: t,
                      name: this.props.name,
                      placeholder: this.props.placeholder,
                      value: a,
                      onChange: this.handleUpdateTags,
                      isMulti: !0,
                      isSearchable: !0,
                      isValidNewOption: this.handleCheckValid,
                      noOptionsMessage: function() {
                        return e.props.prompt;
                      },
                      formatCreateLabel: function(t) {
                        return void 0 !== e.props.createPrompt
                          ? e.props.createPrompt + t
                          : 'Create new ' + t;
                      },
                      options: []
                    })
                  );
                }
              }
            ]),
            a
          );
        })(E.a.Component),
        jn = a(85),
        Tn = a.n(jn),
        An = /\S+@\S+\.\S+/,
        Rn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.send_email) {
                  var t = e.originalAction;
                  return {
                    body: { value: t.body },
                    subject: { value: t.subject },
                    recipients: { value: t.addresses },
                    valid: !0
                  };
                }
                return {
                  body: { value: '' },
                  subject: { value: '' },
                  recipients: { value: [] },
                  valid: !0
                };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleRecipientsChanged',
                value: function(e) {
                  return this.handleUpdate({ recipients: e });
                }
              },
              {
                key: 'handleSubjectChanged',
                value: function(e) {
                  return this.handleUpdate({ subject: e });
                }
              },
              {
                key: 'handleBodyChanged',
                value: function(e) {
                  return this.handleUpdate({ body: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('recipients') &&
                    (a.recipients = oa(Ft.t('forms.recipients', 'Recipients'), e.recipients, [
                      ua(t)
                    ])),
                    e.hasOwnProperty('subject') &&
                      (a.subject = oa(Ft.t('forms.subject', 'Subject'), e.subject, [ua(t)])),
                    e.hasOwnProperty('body') &&
                      (a.body = oa(Ft.t('forms.body', 'Body'), e.body, [ua(t)]));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  this.handleUpdate(
                    {
                      recipients: this.state.recipients.value,
                      subject: this.state.subject.value,
                      body: this.state.body.value
                    },
                    !0
                  ) &&
                    (this.props.updateAction(
                      ((e = this.props.nodeSettings),
                      {
                        addresses: (t = this.state).recipients.value,
                        subject: t.subject.value,
                        body: t.body.value,
                        type: Ee.send_email,
                        uuid: lt(e, Ee.send_email)
                      })
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleCheckValid',
                value: function(e) {
                  return An.test(e) || e.startsWith('@');
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'div',
                      { className: Tn.a.ele },
                      k.createElement(xn, {
                        name: Ft.t('forms.email_recipient_name', 'Recipient'),
                        placeholder: Ft.t('forms.email_recipient_placeholder', 'To'),
                        prompt: Ft.t('forms.email_recipient_prompt', 'Enter email address'),
                        onCheckValid: this.handleCheckValid,
                        entry: this.state.recipients,
                        onChange: this.handleRecipientsChanged,
                        createPrompt: ''
                      }),
                      k.createElement(xa, {
                        __className: Tn.a.subject,
                        name: Ft.t('forms.subject', 'Subject'),
                        placeholder: Ft.t('forms.subject', 'Subject'),
                        onChange: this.handleSubjectChanged,
                        entry: this.state.subject,
                        autocomplete: !0
                      }),
                      k.createElement(xa, {
                        __className: Tn.a.message,
                        name: Ft.t('forms.message', 'Message'),
                        showLabel: !1,
                        onChange: this.handleBodyChanged,
                        entry: this.state.body,
                        autocomplete: !0,
                        textarea: !0
                      })
                    ),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Un = a(61),
        Dn = a.n(Un),
        Pn = Ft.t('actions.send_msg.placeholder', 'Send a message to the contact'),
        Fn = function(e) {
          if (e.text) {
            var t = null,
              a = e.quick_replies || [];
            return (
              a.length > 0 &&
                (t = k.createElement(
                  'div',
                  { className: Dn.a.quick_replies },
                  a.map(function(t) {
                    return k.createElement(nn, {
                      style: { marginLeft: 4, marginTop: 4 },
                      maxLength: 20,
                      advanced: !0,
                      key: e.uuid + t,
                      text: t
                    });
                  })
                )),
              k.createElement(
                k.Fragment,
                null,
                k.createElement(
                  'div',
                  null,
                  e.text.split(/\r?\n/).map(function(t, a) {
                    return k.createElement('div', { key: e.uuid + a, className: Dn.a.line }, t);
                  }),
                  e.attachments && e.attachments.length > 0
                    ? k.createElement('div', {
                        className: ''.concat(Dn.a.attachment, ' fe-paperclip')
                      })
                    : null,
                  e.templating && e.templating.template
                    ? k.createElement('div', {
                        className: ''.concat(Dn.a.whatsapp, ' fe-whatsapp')
                      })
                    : null,
                  e.topic
                    ? k.createElement('div', {
                        className: ''.concat(Dn.a.facebook, ' fe-facebook')
                      })
                    : null
                ),
                k.createElement('div', { className: Dn.a.summary }, t)
              )
            );
          }
          return k.createElement('div', { className: 'placeholder' }, Pn);
        },
        In = [
          { value: 'event', name: 'Event' },
          { value: 'account', name: 'Account' },
          { value: 'purchase', name: 'Purchase' },
          { value: 'agent', name: 'Agent' }
        ],
        Mn = a(43),
        Ln = a.n(Mn),
        zn = [
          { value: 'image', name: Ft.t('forms.image_url', 'Image URL') },
          { value: 'audio', name: Ft.t('forms.audio_url', 'Audio URL') },
          { value: 'video', name: Ft.t('forms.video_url', 'Video URL') },
          { value: 'application', name: Ft.t('forms.pdf_url', 'PDF Document URL') }
        ],
        Bn = zn.concat([{ value: 'upload', name: 'Upload Attachment' }]),
        qn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).filePicker = void 0),
              (n.state = (function(e, t) {
                var a = { value: null },
                  n = [];
                if (e.originalAction && e.originalAction.type === Ee.send_msg) {
                  var i = e.originalAction,
                    s = [];
                  if (
                    ((i.attachments || []).forEach(function(e) {
                      var t = e.indexOf(':'),
                        a = e.substring(0, t),
                        n = { type: a, url: e.substring(t + 1), uploaded: a.indexOf('/') > -1 };
                      s.push(n);
                    }),
                    i.templating)
                  ) {
                    var o = i.templating.template;
                    (a = { value: { uuid: o.uuid, name: o.name } }),
                      (n = i.templating.variables.map(function(e) {
                        return { value: e };
                      }));
                  }
                  return {
                    topic: {
                      value: In.find(function(e) {
                        return e.value === i.topic;
                      })
                    },
                    template: a,
                    templateVariables: n,
                    attachments: s,
                    message: { value: i.text },
                    quickReplies: { value: i.quick_replies || [] },
                    quickReplyEntry: { value: '' },
                    sendAll: i.all_urns,
                    valid: !0
                  };
                }
                return {
                  topic: { value: null },
                  template: a,
                  templateVariables: [],
                  attachments: [],
                  message: { value: '' },
                  quickReplies: { value: [] },
                  quickReplyEntry: { value: '' },
                  sendAll: !1,
                  valid: !1
                };
              })(n.props.nodeSettings, n.props.assetStore)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^on/] }),
              null !== n.state.template.value &&
                Xe(n.props.assetStore.templates, n.state.template.value.uuid).then(function(e) {
                  null !== e &&
                    n.handleTemplateChanged([
                      Object(y.a)(Object(y.a)({}, n.state.template.value), e.content)
                    ]);
                }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('text') &&
                    (a.message = oa(Ft.t('forms.message', 'Message'), e.text, [ua(t)])),
                    e.hasOwnProperty('sendAll') && (a.sendAll = e.sendAll),
                    e.hasOwnProperty('quickReplies') &&
                      (a.quickReplies = oa(
                        Ft.t('forms.quick_replies', 'Quick Replies'),
                        e.quickReplies,
                        [pa]
                      ));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleMessageInput',
                value: function(e) {
                  return this.handleUpdate({ text: e.target.value }, !1);
                }
              },
              {
                key: 'handleMessageUpdate',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                  return this.handleUpdate({ text: e }, a);
                }
              },
              {
                key: 'handleQuickRepliesUpdate',
                value: function(e) {
                  return this.handleUpdate({ quickReplies: e });
                }
              },
              {
                key: 'handleSendAllUpdate',
                value: function(e) {
                  return this.handleUpdate({ sendAll: e });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  if (!ht(this.state.message)) {
                    var e = this.handleMessageUpdate(this.state.message.value, null, !0),
                      t = this.state.templateVariables;
                    this.state.templateVariables.forEach(function(a, n) {
                      var i = oa('Variable '.concat(n + 1), a.value, [ra]);
                      (t = Jt()(t, Object(S.a)({}, n, { $merge: i }))), (e = e && !ht(i));
                    }),
                      (e = e && !ht(this.state.quickReplyEntry))
                        ? (this.props.updateAction(
                            (function(e, t) {
                              var a = t.attachments
                                  .filter(function(e) {
                                    return e.url.trim().length > 0;
                                  })
                                  .map(function(e) {
                                    return ''.concat(e.type, ':').concat(e.url);
                                  }),
                                n = null;
                              if (t.template && t.template.value) {
                                var i = $();
                                if (e.originalAction && e.originalAction.type === Ee.send_msg) {
                                  var s = e.originalAction;
                                  s.templating &&
                                    s.templating.template &&
                                    s.templating.template.uuid === t.template.value.id &&
                                    (i = s.templating.uuid);
                                }
                                n = {
                                  uuid: i,
                                  template: {
                                    uuid: t.template.value.uuid,
                                    name: t.template.value.name
                                  },
                                  variables: t.templateVariables.map(function(e) {
                                    return e.value;
                                  })
                                };
                              }
                              var o = {
                                attachments: a,
                                text: t.message.value,
                                type: Ee.send_msg,
                                all_urns: t.sendAll,
                                quick_replies: t.quickReplies.value,
                                uuid: lt(e, Ee.send_msg)
                              };
                              return (
                                n && (o.templating = n),
                                t.topic.value && (o.topic = t.topic.value.value),
                                o
                              );
                            })(this.props.nodeSettings, this.state)
                          ),
                          this.props.onClose(!1))
                        : this.setState({ templateVariables: t, valid: e });
                  }
                }
              },
              {
                key: 'handleAttachmentRemoved',
                value: function(e) {
                  var t = Jt()(this.state.attachments, { $splice: [[e, 1]] });
                  this.setState({ attachments: t });
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderUpload',
                value: function(e, t) {
                  var a = this;
                  return k.createElement(
                    'div',
                    { className: Ln.a.url_attachment, key: e > -1 ? 'url_attachment_' + e : $() },
                    k.createElement(
                      'div',
                      { className: Ln.a.type_choice },
                      k.createElement(Sa, {
                        key: 'attachment_type_' + e,
                        name: Ft.t('forms.type', 'Type'),
                        style: Pt.small,
                        entry: { value: { name: t.type } },
                        options: zn,
                        disabled: !0
                      })
                    ),
                    k.createElement(
                      'div',
                      { className: Ln.a.url },
                      k.createElement(
                        'span',
                        { className: Ln.a.upload },
                        k.createElement(nn, {
                          icon: 'fe-download',
                          text: 'Download',
                          large: !0,
                          onClick: function() {
                            window.open(t.url, '_blank');
                          }
                        }),
                        k.createElement(
                          'div',
                          { className: Ln.a.remove_upload },
                          k.createElement(nn, {
                            icon: 'fe-x',
                            text: 'Remove',
                            large: !0,
                            onClick: function() {
                              a.handleAttachmentRemoved(e);
                            }
                          })
                        )
                      )
                    )
                  );
                }
              },
              {
                key: 'handleUploadFile',
                value: function(e) {
                  var t = this,
                    a = this.state.attachments,
                    n = Ye('csrftoken'),
                    i = n ? { 'X-CSRFToken': n } : {};
                  i['X-Requested-With'] = 'XMLHttpRequest';
                  var s = new FormData();
                  s.append('file', e[0]),
                    ze.a
                      .post(this.context.config.endpoints.attachments, s, { headers: i })
                      .then(function(e) {
                        (a = Jt()(a, {
                          $push: [{ type: e.data.type, url: e.data.url, uploaded: !0 }]
                        })),
                          t.setState({ attachments: a });
                      })
                      .catch(function(e) {
                        console.log(e);
                      });
                }
              },
              {
                key: 'renderAttachment',
                value: function(e, t) {
                  var a,
                    n = this,
                    i = this.state.attachments;
                  return k.createElement(
                    'div',
                    { className: Ln.a.url_attachment, key: e > -1 ? 'url_attachment_' + e : $() },
                    k.createElement(
                      'div',
                      { className: Ln.a.type_choice },
                      k.createElement(Sa, {
                        key: 'attachment_type_' + e,
                        style: Pt.small,
                        name: Ft.t('forms.type_options', 'Type Options'),
                        placeholder: 'Add Attachment',
                        entry: {
                          value:
                            e > -1
                              ? ((a = t.type),
                                zn.find(function(e) {
                                  return e.value === a;
                                }))
                              : null
                        },
                        onChange: function(a) {
                          'upload' === a.value
                            ? window.setTimeout(function() {
                                n.filePicker.click();
                              }, 200)
                            : ((i =
                                -1 === e
                                  ? Jt()(i, { $push: [{ type: a.value, url: '' }] })
                                  : Jt()(
                                      i,
                                      Object(S.a)({}, e, { $set: { type: a.value, url: t.url } })
                                    )),
                              n.setState({ attachments: i }));
                        },
                        options: e > -1 ? zn : Bn
                      })
                    ),
                    e > -1
                      ? k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'div',
                            { className: Ln.a.url },
                            k.createElement(xa, {
                              placeholder: 'URL',
                              name: Ft.t('forms.url', 'URL'),
                              style: ba.small,
                              onChange: function(a) {
                                (i = Jt()(
                                  i,
                                  Object(S.a)({}, e, { $set: { type: t.type, url: a } })
                                )),
                                  n.setState({ attachments: i });
                              },
                              entry: { value: t.url },
                              autocomplete: !0
                            })
                          ),
                          k.createElement(
                            'div',
                            { className: Ln.a.remove },
                            k.createElement(nn, {
                              icon: 'fe-x',
                              text: ' Remove',
                              large: !0,
                              onClick: function() {
                                n.handleAttachmentRemoved(e);
                              }
                            })
                          )
                        )
                      : null
                  );
                }
              },
              {
                key: 'renderAttachments',
                value: function() {
                  var e = this,
                    t = this.state.attachments.map(function(t, a) {
                      return t.uploaded ? e.renderUpload(a, t) : e.renderAttachment(a, t);
                    }),
                    a =
                      this.state.attachments.length < 3
                        ? this.renderAttachment(-1, { url: '', type: '' })
                        : null;
                  return k.createElement(
                    k.Fragment,
                    null,
                    k.createElement(
                      'p',
                      null,
                      Ft.t(
                        'forms.send_msg_summary',
                        'Add an attachment to each message. The attachment can be a file you upload or a dynamic URL using expressions and variables from your Flow.',
                        { count: 3 }
                      )
                    ),
                    t,
                    a,
                    k.createElement('input', {
                      style: { display: 'none' },
                      ref: function(t) {
                        e.filePicker = t;
                      },
                      type: 'file',
                      onChange: function(t) {
                        return e.handleUploadFile(t.target.files);
                      }
                    })
                  );
                }
              },
              {
                key: 'handleTemplateChanged',
                value: function(e) {
                  var t = e ? e[0] : null;
                  if (t) {
                    var a = t.translations[0],
                      n =
                        0 === this.state.templateVariables.length ||
                        (this.state.template.value && this.state.template.value.id !== t.id)
                          ? ee(0, a.variable_count).map(function() {
                              return { value: '' };
                            })
                          : this.state.templateVariables;
                    this.setState({
                      template: { value: t },
                      templateTranslation: a,
                      templateVariables: n
                    });
                  } else
                    this.setState({
                      template: { value: null },
                      templateTranslation: null,
                      templateVariables: []
                    });
                }
              },
              {
                key: 'handleTemplateVariableChanged',
                value: function(e, t) {
                  var a = oa('Variable '.concat(t + 1), e, [ra]),
                    n = Jt()(this.state.templateVariables, { $merge: Object(S.a)({}, t, a) });
                  this.setState({ templateVariables: n });
                }
              },
              {
                key: 'handleShouldExcludeTemplate',
                value: function(e) {
                  return !(function(e) {
                    return !!e.translations.find(function(e) {
                      return 'pending' === e.status || 'approved' === e.status;
                    });
                  })(e);
                }
              },
              {
                key: 'renderTopicConfig',
                value: function() {
                  return k.createElement(
                    k.Fragment,
                    null,
                    k.createElement(
                      'p',
                      null,
                      Ft.t(
                        'forms.send_msg_facebook_warning',
                        'Sending bulk messages over a Facebook channel requires that a topic be specified if the user has not sent a message in the last 24 hours. Setting a topic to use over Facebook is especially important for the first message in your flow.'
                      )
                    ),
                    k.createElement(Sa, {
                      key: 'fb_method_select',
                      name: Ft.t('forms.method', 'Method'),
                      entry: this.state.topic,
                      onChange: this.handleTopicUpdate,
                      options: In,
                      placeholder: Ft.t(
                        'forms.send_msg_facebook_topic_placeholder',
                        'Select a topic to use over Facebook'
                      ),
                      clearable: !0
                    })
                  );
                }
              },
              {
                key: 'handleTopicUpdate',
                value: function(e) {
                  this.setState({ topic: { value: e } });
                }
              },
              {
                key: 'renderTemplateConfig',
                value: function() {
                  var e = this;
                  return k.createElement(
                    k.Fragment,
                    null,
                    k.createElement(
                      'p',
                      null,
                      Ft.t(
                        'forms.whatsapp_warning',
                        'Sending messages over a WhatsApp channel requires that a template be used if you have not received a message from a contact in the last 24 hours. Setting a template to use over WhatsApp is especially important for the first message in your flow.'
                      )
                    ),
                    k.createElement(Bt, {
                      name: Ft.t('forms.template', 'template'),
                      noOptionsMessage: 'No templates found',
                      assets: this.props.assetStore.templates,
                      entry: this.state.template,
                      onChange: this.handleTemplateChanged,
                      shouldExclude: this.handleShouldExcludeTemplate,
                      searchable: !0,
                      formClearable: !0
                    }),
                    this.state.templateTranslation
                      ? k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'div',
                            { className: Ln.a.template_text },
                            this.state.templateTranslation.content
                          ),
                          ee(0, this.state.templateTranslation.variable_count).map(function(t) {
                            return k.createElement(
                              'div',
                              { className: Ln.a.variable, key: 'tr_arg_' + t },
                              k.createElement(xa, {
                                name: ''
                                  .concat(Ft.t('forms.variable', 'Variable'), ' ')
                                  .concat(t + 1),
                                showLabel: !1,
                                placeholder: ''
                                  .concat(Ft.t('forms.variable', 'Variable'), ' ')
                                  .concat(t + 1),
                                onChange: function(a) {
                                  e.handleTemplateVariableChanged(a, t);
                                },
                                entry: e.state.templateVariables[t],
                                autocomplete: !0
                              })
                            );
                          })
                        )
                      : null
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig,
                    t = [
                      {
                        name: 'Quick Replies',
                        body: k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'p',
                            null,
                            Ft.t(
                              'forms.quick_replies_summary',
                              'Quick Replies are made into buttons for supported channels. For example, when asking a question, you might add a Quick Reply for "Yes" and one for "No".'
                            )
                          ),
                          k.createElement(en, {
                            name: Ft.t('forms.quick_reply', 'quick_reply'),
                            helpText: k.createElement(
                              Pe.a,
                              { i18nKey: 'forms.add_quick_reply' },
                              'Add a new Quick Reply and press enter.'
                            ),
                            items: this.state.quickReplies,
                            entry: this.state.quickReplyEntry,
                            onChange: this.handleQuickRepliesUpdate
                          })
                        ),
                        checked: this.state.quickReplies.value.length > 0,
                        hasErrors: ht(this.state.quickReplyEntry)
                      },
                      {
                        name: 'Attachments',
                        body: this.renderAttachments(),
                        checked: this.state.attachments.length > 0
                      },
                      {
                        name: 'Advanced',
                        body: k.createElement(qa, {
                          name: Ft.t('forms.all_destinations', 'All Destinations'),
                          title: 'All Destinations',
                          labelClassName: Ln.a.checkbox,
                          checked: this.state.sendAll,
                          description: Ft.t(
                            'forms.all_destinations',
                            "Send a message to all destinations known for this contact. If you aren't sure what this means, leave it unchecked."
                          ),
                          onChange: this.handleSendAllUpdate
                        }),
                        checked: this.state.sendAll
                      }
                    ];
                  if (_r(this.context.config, we.HAS_WHATSAPP)) {
                    var a = {
                      name: 'WhatsApp',
                      body: this.renderTemplateConfig(),
                      checked: null != this.state.template.value,
                      hasErrors: !!this.state.templateVariables.find(function(e) {
                        return ht(e);
                      })
                    };
                    t.splice(0, 0, a);
                  }
                  if (_r(this.context.config, we.HAS_FACEBOOK)) {
                    var n = {
                      name: 'Facebook',
                      body: this.renderTopicConfig(),
                      checked: null != this.state.topic.value
                    };
                    t.splice(0, 0, n);
                  }
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons(), tabs: t },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(xa, {
                      name: Ft.t('forms.message', 'Message'),
                      showLabel: !1,
                      counter: '.sms-counter',
                      onChange: this.handleMessageUpdate,
                      entry: this.state.message,
                      autocomplete: !0,
                      focus: !0,
                      textarea: !0
                    }),
                    k.createElement('temba-charcount', { class: 'sms-counter' }),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      qn.contextTypes = { config: bt };
      var Vn = function(e) {
          var t = e.value,
            a = e.name;
          return t
            ? (function(e, t) {
                return k.createElement('div', null, 'Save ', H(G(e, 100)), ' as ', H(t));
              })(t, a)
            : (function(e) {
                return k.createElement('div', null, 'Clear value for ', H(e));
              })(a);
        },
        Hn = a(86),
        Gn = a.n(Hn),
        Kn = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).options = []),
              (n.state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.set_run_result) {
                  var t = e.originalAction;
                  return {
                    name: { value: { id: L(t.name), name: t.name, type: fe.Result } },
                    value: { value: t.value },
                    category: { value: t.category },
                    valid: !0
                  };
                }
                return {
                  name: { value: null },
                  value: { value: '' },
                  category: { value: '' },
                  valid: !1
                };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^on/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this.props.assetStore.results.items;
                  this.options = Object.keys(e).map(function(t) {
                    return { name: e[t].name, value: t };
                  });
                }
              },
              {
                key: 'handleNameUpdate',
                value: function(e) {
                  e ? this.handleUpdate({ name: e[0] }) : this.handleUpdate({ name: null });
                }
              },
              {
                key: 'handleValueUpdate',
                value: function(e) {
                  return this.handleUpdate({ value: e });
                }
              },
              {
                key: 'handleCategoryUpdate',
                value: function(e) {
                  return this.handleUpdate({ category: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('name') &&
                    (a.name = oa(Ft.t('forms.name', 'Name'), e.name, [ua(t), ga, ha])),
                    e.hasOwnProperty('value') &&
                      (a.value = oa(Ft.t('forms.value', 'Value'), e.value, [])),
                    e.hasOwnProperty('category') &&
                      (a.category = oa(Ft.t('forms.category', 'Category'), e.category, []));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e, t;
                  this.handleUpdate({ name: this.state.name.value }, !0) &&
                    (this.props.updateAction(
                      ((e = this.props.nodeSettings),
                      (t = this.state),
                      {
                        type: Ee.set_run_result,
                        name: t.name.value.name,
                        value: t.value.value,
                        category: t.category.value,
                        uuid: lt(e, Ee.set_run_result)
                      })
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleCreateAssetFromInput',
                value: function(e) {
                  return { id: L(e), name: e, type: fe.Result };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig,
                    t =
                      !ht(this.state.name) && this.state.name.value
                        ? '.' + L(this.state.name.value.name)
                        : '';
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'div',
                      { className: Gn.a.form },
                      k.createElement(Bt, {
                        name: Ft.t('forms.result', 'Result'),
                        assets: this.props.assetStore.results,
                        entry: this.state.name,
                        searchable: !0,
                        createPrefix: Ft.t('forms.create_prefix', 'New: '),
                        onChange: this.handleNameUpdate,
                        createAssetFromInput: this.handleCreateAssetFromInput,
                        formClearable: !0,
                        showLabel: !0,
                        valueKey: 'value',
                        nameKey: 'name',
                        additionalOptions: this.options,
                        helpText: k.createElement(
                          Pe.a,
                          {
                            i18nKey: 'forms.result_name_help',
                            values: { resultFormat: '@results'.concat(t) }
                          },
                          'By naming the result, you can reference it later using [[resultFormat]]'
                        )
                      }),
                      k.createElement(xa, {
                        __className: Gn.a.value,
                        name: Ft.t('forms.value', 'Value'),
                        showLabel: !0,
                        onChange: this.handleValueUpdate,
                        entry: this.state.value,
                        autocomplete: !0,
                        helpText:
                          'The value to save for this result or empty to clears it. You can use expressions, for example: @(title(input))'
                      }),
                      k.createElement(xa, {
                        __className: Gn.a.category,
                        name: Ft.t('forms.category', 'Category'),
                        placeholder: 'Optional',
                        showLabel: !0,
                        onChange: this.handleCategoryUpdate,
                        entry: this.state.category,
                        autocomplete: !1,
                        helpText:
                          "An optional category for your result. For age, the value might be 17, but the category might be 'Young Adult'"
                      })
                    ),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent),
        Wn = function(e, t) {
          var a = e.flow,
            n = a.name,
            i = a.uuid;
          return k.createElement(
            k.Fragment,
            null,
            ct([{ name: n, id: i, type: fe.Flow }], 3, t.config.endpoints)
          );
        };
      Wn.contextTypes = { config: bt };
      var Yn = Wn,
        Xn = a(87),
        Qn = a.n(Xn),
        Jn = function(e, t) {
          var a = ut(e);
          return k.createElement(
            'div',
            { className: Qn.a.node },
            k.createElement(
              'div',
              { className: Qn.a.to },
              e.create_contact
                ? 'Create a new contact'
                : e.contact_query
                ? e.contact_query
                : ct(a, 5, t.config.endpoints)
            ),
            k.createElement(
              'div',
              { className: Qn.a.flow },
              dt({ name: e.flow.name, id: e.flow.uuid, type: fe.Flow }, t.config.endpoints)
            )
          );
        };
      Jn.contextTypes = { config: bt };
      var Zn,
        $n = Jn,
        ei = { name: 'Select recipients manually', value: 'assets' },
        ti = { name: 'Create a new contact', value: 'create_contact' },
        ai = { name: 'Select recipients from a query', value: 'contact_query' },
        ni = [ei, ai, ti],
        ii = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                if (e.originalAction && e.originalAction.type === Ee.start_session) {
                  var t = e.originalAction;
                  return {
                    recipients: { value: ut(t) },
                    flow: { value: t.flow },
                    startType: { value: t.create_contact ? ti : t.contact_query ? ai : ei },
                    contactQuery: { value: t.contact_query || '' },
                    valid: !0
                  };
                }
                return {
                  recipients: { value: [] },
                  flow: { value: null },
                  startType: { value: ei },
                  contactQuery: { value: '' },
                  valid: !1
                };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleRecipientsChanged',
                value: function(e) {
                  return this.handleUpdate({ recipients: e });
                }
              },
              {
                key: 'handleFlowChanged',
                value: function(e) {
                  var t = null;
                  return e && e.length > 0 && (t = e[0]), this.handleUpdate({ flow: t });
                }
              },
              {
                key: 'handleStartTypeChanged',
                value: function(e) {
                  return this.handleUpdate({ startType: e });
                }
              },
              {
                key: 'handleContactQueryChanged',
                value: function(e) {
                  return this.handleUpdate({ contactQuery: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('startType') &&
                    ((a.startType = { value: e.startType }),
                    e.startType !== ei && (a.recipients = { value: [] }),
                    e.startType !== ai && (a.contactQuery = { value: '' })),
                    e.hasOwnProperty('contactQuery') &&
                      (a.contactQuery = oa(
                        Ft.t('forms.contact_query', 'Contact Query'),
                        e.contactQuery,
                        [ua(t && this.state.startType.value === ai)]
                      )),
                    e.hasOwnProperty('recipients') &&
                      (a.recipients = oa(Ft.t('forms.recipients', 'Recipients'), e.recipients, [
                        ua(t && this.state.startType.value === ei)
                      ])),
                    e.hasOwnProperty('flow') &&
                      (a.flow = oa(Ft.t('forms.flow', 'Flow'), e.flow, [ua(t)]));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.handleUpdate(
                    {
                      recipients: this.state.recipients.value,
                      flow: this.state.flow.value,
                      contactQuery: this.state.contactQuery.value
                    },
                    !0
                  ) &&
                    (this.props.updateAction(
                      (function(e, t) {
                        var a = t.flow.value,
                          n = {
                            legacy_vars: mt(t.recipients.value),
                            contacts: _t(t.recipients.value, fe.Contact),
                            groups: _t(t.recipients.value, fe.Group),
                            create_contact: t.startType.value === ti,
                            flow: { name: a.name, uuid: a.uuid },
                            type: Ee.start_session,
                            uuid: lt(e, Ee.start_session)
                          };
                        return t.contactQuery.value && (n.contact_query = t.contactQuery.value), n;
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'div',
                      null,
                      k.createElement(Sa, {
                        key: 'start_type_select',
                        name: Ft.t('forms.start_type', 'Start Type'),
                        entry: this.state.startType,
                        onChange: this.handleStartTypeChanged,
                        options: ni
                      })
                    ),
                    k.createElement('p', null),
                    k.createElement(
                      'div',
                      null,
                      K(this.state.startType.value === ei)(
                        k.createElement(
                          'div',
                          { 'data-testid': 'recipients' },
                          k.createElement(Bt, {
                            name: Ft.t('forms.recipients', 'Recipients'),
                            placeholder: 'Choose who should be started in the flow',
                            assets: this.props.assetStore.recipients,
                            entry: this.state.recipients,
                            searchable: !0,
                            multi: !0,
                            onChange: this.handleRecipientsChanged
                          }),
                          k.createElement('p', null)
                        )
                      ),
                      K(this.state.startType.value === ai)(
                        k.createElement(
                          'div',
                          { 'data-testid': 'contact_query' },
                          k.createElement(xa, {
                            name: Ft.t('forms.contact_query', 'Contact Query'),
                            placeholder: 'household_id = @fields.household_id',
                            onChange: this.handleContactQueryChanged,
                            entry: this.state.contactQuery,
                            autocomplete: !0,
                            focus: !0
                          }),
                          k.createElement('p', null)
                        )
                      ),
                      k.createElement(Bt, {
                        name: Ft.t('forms.flow', 'Flow'),
                        placeholder: 'Choose which flow to start',
                        assets: this.props.assetStore.flows,
                        entry: this.state.flow,
                        searchable: !0,
                        onChange: this.handleFlowChanged
                      })
                    ),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        si = a(99),
        oi = a.n(si),
        ri = function(e) {
          var t = Object.keys(e.amounts).map(function(t) {
            return k.createElement(
              'div',
              { key: 'transfer_' + t },
              k.createElement('div', { className: oi.a.amount }, e.amounts[t]),
              k.createElement('div', { className: oi.a.code }, t)
            );
          });
          return k.createElement('div', null, t);
        },
        li = a(36),
        ui = function(e, t) {
          return t ? H(e) : e;
        },
        ci = function(e, t) {
          var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
          return t
            ? k.createElement(
                'div',
                { className: ''.concat(li.node_asset) },
                'Set ',
                ui(e, a),
                ' to ',
                H(t),
                '.'
              )
            : k.createElement('div', null, 'Clear ', ui(e, a), '.');
        },
        di = function(e) {
          if (e.type === Ee.set_contact_field) return ci(e.field.name, e.value, !0);
          if (e.type === Ee.set_contact_channel) {
            var t = e;
            return ci('channel', t.channel ? t.channel.name : null, !1);
          }
          return e.type === Ee.set_contact_language
            ? ci('language', yr(e.language, e.languages), !1)
            : e.type === Ee.set_contact_status
            ? ci('status', e.status, !1)
            : e.type === Ee.set_contact_name
            ? ci('name', e.name, !1)
            : null;
        },
        pi = function(e) {
          if (e.ghost) {
            var t = Object.keys(e.inboundConnections);
            if (t.length > 0) {
              var a = t[0];
              return { exitUUID: a, nodeUUID: e.inboundConnections[a] };
            }
          }
        },
        hi = [gt, ft, vt, yt],
        mi = [gt, ft, yt],
        _i = function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
          return !e || qt(e) ? hi : mi;
        },
        gi = Ft.t('forms.message_label', 'If the message response...'),
        vi =
          (Ft.t('forms.expression_label', 'If the expression...'),
          Ft.t('forms.split_by_groups', "Select the groups you'd like to split by below"));
      Ft.t(
        'forms.localize_rules',
        'Sometimes languages need special rules to route things properly. If a translation is not provided, the original rule will be used.'
      );
      !(function(e) {
        (e.All_Responses = 'All Responses'),
          (e.No_Response = 'No Response'),
          (e.Any_Value = 'Any Value'),
          (e.Other = 'Other');
      })(Zn || (Zn = {}));
      var fi = function(e, t, a, n) {
          var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : [],
            s = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : {},
            o = {
              node: { uuid: e, actions: i, router: t, exits: a },
              ui: { type: n, position: null, config: s },
              inboundConnections: {}
            };
          return o;
        },
        yi = function(e) {
          return !!(e.router && e.router.cases && e.router.cases.length);
        },
        bi = function(e, t) {
          var a = (function(e) {
            return e.node.router ? e.node.router.categories : [];
          })(t);
          return JSON.parse(JSON.stringify(e)).map(function(e) {
            var n = a.find(function(t) {
              return t.uuid === e.category_uuid;
            });
            if (ki(e.type) && t.ui.config && t.ui.config.cases) {
              var i = t.ui.config.cases[e.uuid];
              i && i.arguments && (e.arguments = i.arguments);
            }
            return { uuid: e.uuid, kase: e, categoryName: n ? n.name : null, valid: !0 };
          });
        },
        ki = function(e) {
          return !![Ce.has_date_eq, Ce.has_date_gt, Ce.has_date_lt].find(function(t) {
            return e === t;
          });
        },
        Ei = function(e, t) {
          return e.name.toLowerCase().trim() === t.categoryName.trim().toLowerCase();
        },
        Ci = function(e, t) {
          var a,
            n = [],
            i = [],
            s = [],
            o = {},
            r = t && t.router,
            l = (r && r.categories) || [],
            u = Object(C.a)(e);
          try {
            var c = function() {
              var e = a.value;
              if (!e.categoryName || 0 === e.categoryName.trim().length) return 'continue';
              ki(e.kase.type) &&
                ((o[e.uuid] = { arguments: e.kase.arguments }),
                (e.kase.arguments = [
                  '@(datetime_add(today(), '.concat(e.kase.arguments[0], ', "D"))')
                ]));
              var r = n.find(function(t) {
                return Ei(t, e);
              });
              if (!r) {
                if (
                  !(r = l.find(function(t) {
                    return Ei(t, e);
                  }))
                ) {
                  var u = wi(t);
                  if (u) {
                    var c = u.cases.find(function(t) {
                      return t.uuid === e.uuid;
                    });
                    if (c) {
                      var d = l.find(function(e) {
                        return e.uuid === c.category_uuid;
                      });
                      d && (r = Object(y.a)(Object(y.a)({}, d), {}, { name: e.categoryName }));
                    }
                  }
                }
                if (
                  (r &&
                    n.find(function(e) {
                      return e.uuid === r.uuid;
                    }) &&
                    (r = null),
                  r)
                ) {
                  n.push(r);
                  var p = t.exits.find(function(e) {
                    return r.exit_uuid === e.uuid;
                  });
                  s.push(p);
                }
              }
              if (!r) {
                var h = { uuid: $() };
                s.push(h), (r = { uuid: $(), name: e.categoryName, exit_uuid: h.uuid }), n.push(r);
              }
              i.push(Object(y.a)(Object(y.a)({}, e.kase), {}, { category_uuid: r.uuid }));
            };
            for (u.s(); !(a = u.n()).done; ) c();
          } catch (d) {
            u.e(d);
          } finally {
            u.f();
          }
          return { cases: i, categories: n, exits: s, caseConfig: o };
        },
        wi = function(e) {
          return e && e.router && e.router.type === s.switch ? e.router : null;
        },
        Si = function(e, t) {
          var a = wi(t);
          if (a) {
            var n = a.categories.find(function(e) {
                return e.uuid === a.default_category_uuid;
              }),
              i = t.exits.find(function(e) {
                return e.uuid === n.exit_uuid;
              });
            return (n.name = e), { defaultCategory: n, defaultExit: i };
          }
          var s = { uuid: $() };
          return { defaultCategory: { uuid: $(), name: e, exit_uuid: s.uuid }, defaultExit: s };
        },
        Ni = function(e) {
          var t = null,
            a = null,
            n = wi(e);
          if (n && n.wait && n.wait.timeout) {
            var i = n.wait.timeout.category_uuid;
            (t = n.categories.find(function(e) {
              return e.uuid === i;
            })),
              (a = e.exits.find(function(e) {
                return e.uuid === t.exit_uuid;
              }));
          }
          return (
            t ||
              ((a = { uuid: $() }), (t = { uuid: $(), name: Zn.No_Response, exit_uuid: a.uuid })),
            { timeoutCategory: t, timeoutExit: a }
          );
        },
        Oi = function(e, t, a) {
          var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
            i = Ci(e, a),
            s = n;
          s || (s = i.categories.length > 0 ? Zn.Other : Zn.All_Responses);
          var o = Si(s, a),
            r = o.defaultCategory,
            l = o.defaultExit;
          i.categories.push(r), i.exits.push(l);
          var u = Object(y.a)(Object(y.a)({}, i), {}, { defaultCategory: r.uuid });
          if (t) {
            var c = Ni(a),
              d = c.timeoutCategory,
              p = c.timeoutExit;
            i.categories.push(d), i.exits.push(p), (u.timeoutCategory = d.uuid);
          }
          return u;
        },
        xi = function(e, t, a) {
          var n = [],
            i = [],
            o = [];
          if (t && 1 === t.node.actions.length && t.node.actions[0].type === e.type) {
            var r = wi(t.node);
            t.node.exits.forEach(function(e) {
              return n.push(e);
            }),
              r.cases.forEach(function(e) {
                return i.push(e);
              }),
              t.node.router.categories.forEach(function(e) {
                return o.push(e);
              });
          } else
            n.push({ uuid: $(), destination_uuid: null }, { uuid: $(), destination_uuid: null }),
              (o = [
                { uuid: $(), name: p.Success, exit_uuid: n[0].uuid },
                { uuid: $(), name: p.Failure, exit_uuid: n[1].uuid }
              ]),
              (i = [
                {
                  uuid: $(),
                  type: a ? Ce.has_category : Ce.has_only_text,
                  arguments: [p.Success],
                  category_uuid: o[0].uuid
                }
              ]);
          var l = '@results.' + L(e.result_name);
          a || (l += '.category');
          var u = {
              type: s.switch,
              operand: l,
              cases: i,
              categories: o,
              default_category_uuid: o[o.length - 1].uuid
            },
            c = Ee.split_by_webhook;
          return (
            e.type === Ee.call_resthook
              ? (c = Ee.split_by_resthook)
              : e.type === Ee.open_ticket
              ? (c = Ee.split_by_ticket)
              : e.type === Ee.transfer_airtime && (c = Ee.split_by_airtime),
            fi(t.node.uuid, u, n, c, [e])
          );
        },
        ji = function(e, t) {
          var a = mr(e) === Ee.split_by_groups;
          return e.node.router
            ? e.node.router.categories
                .filter(function(e) {
                  return e.exit_uuid === t.uuid;
                })
                .map(function(e) {
                  return a
                    ? Object(y.a)({}, e)
                    : Object(y.a)(Object(y.a)({}, e), {}, { missing: !1 });
                })
            : [];
        },
        Ti = function(e) {
          var t = wi(e);
          if (t && t.result_name) return t.result_name;
          if (e.router && e.router.type === s.random) return e.router.result_name;
          if (1 === e.actions.length) {
            var a = e.actions[0];
            if (
              a.type === Ee.call_webhook ||
              a.type === Ee.call_resthook ||
              a.type === Ee.open_ticket ||
              a.type === Ee.transfer_airtime
            )
              return a.result_name;
          }
        },
        Ai = a(15),
        Ri = function(e) {
          return Ai(e, X({ uuid: $() }));
        },
        Ui = function(e, t, a) {
          if (e && t.results) {
            var n = (function(e, t, a) {
              var n = L(e);
              if (n in t) {
                var i = t[n].references.filter(function(e) {
                  return e.nodeUUID !== a.nodeUUID || e.actionUUID !== a.actionUUID;
                });
                return 0 === i.length
                  ? Ai(t, { $unset: [n] })
                  : Ai(t, Object(S.a)({}, n, { references: { $set: i } }));
              }
              return t;
            })(e, t.results.items, a);
            return Ai(t, { results: { items: { $set: n } } });
          }
          return t;
        },
        Di = function(e, t, a) {
          var n = L(e),
            i = n in t ? t[n] : { name: e, id: n, type: fe.Result, references: [] };
          return (
            i.references.find(function(e) {
              return e.nodeUUID === a.nodeUUID && e.actionUUID === a.actionUUID;
            }) || i.references.push(a),
            Ai(t, { $merge: Object(S.a)({}, n, i) })
          );
        },
        Pi = function(e, t) {
          return Ai(e, { revisions: { items: { $merge: Object(S.a)({}, t.id, t) } } });
        },
        Fi = function(e, t, a, n) {
          var i = e,
            s = sl(e, t);
          n && sl(e, n);
          var o = ol(s.node, a),
            r = s.node.exits[o].destination_uuid;
          return (
            (i = Ai(
              i,
              Object(S.a)({}, t, {
                node: { exits: Object(S.a)({}, o, { destination_uuid: Y(n) }) }
              })
            )),
            n && (i = Ai(i, Object(S.a)({}, n, { inboundConnections: X(Object(S.a)({}, a, t)) }))),
            null != r && (i = Ai(i, Object(S.a)({}, r, { inboundConnections: Q([[a]]) }))),
            i
          );
        },
        Ii = function(e, t) {
          var a = e;
          a[t.node.uuid] && (a = Li(e, t.node.uuid)),
            (a = Ai(e, X(Object(S.a)({}, t.node.uuid, t))));
          for (var n = 0, i = Object.keys(t.inboundConnections); n < i.length; n++) {
            var s = i[n],
              o = t.inboundConnections[s],
              r = sl(e, o),
              l = ol(r.node, s);
            a = Ai(
              a,
              Object(S.a)({}, o, {
                node: { exits: Object(S.a)({}, l, X({ destination_uuid: t.node.uuid })) }
              })
            );
          }
          return a;
        },
        Mi = function(e, t, a) {
          var n = e[t],
            i = (function(e) {
              if (e.router.type === s.switch) {
                var t = e.router;
                return e.exits.find(function(e) {
                  return e.uuid === t.default_category_uuid;
                });
              }
            })(n.node),
            o = i ? i.destination_uuid : null,
            r = Li(e, n.node.uuid, !1),
            l = {
              node: { uuid: $(), actions: [a], exits: [{ uuid: $(), destination_uuid: o }] },
              ui: { position: n.ui.position, type: Ee.execute_actions },
              inboundConnections: n.inboundConnections
            };
          return (r = Ii(r, l));
        },
        Li = function(e, t) {
          var a,
            n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2],
            i = sl(e, t),
            s = e,
            o = Object(C.a)(i.node.exits);
          try {
            for (o.s(); !(a = o.n()).done; ) {
              var r = a.value;
              r.destination_uuid &&
                (s = Ai(
                  s,
                  Object(S.a)({}, r.destination_uuid, { inboundConnections: Q([r.uuid]) })
                ));
            }
          } catch (_) {
            o.e(_);
          } finally {
            o.f();
          }
          for (var l = 0, u = Object.keys(i.inboundConnections); l < u.length; l++) {
            var c = u[l],
              d = null;
            n && 1 === i.node.exits.length && (d = i.node.exits[0].destination_uuid);
            var p = i.inboundConnections[c],
              h = sl(e, p);
            if (d)
              try {
                ul(s, p, d);
              } catch (g) {
                d = null;
              }
            var m = ol(h.node, c);
            (s = Ai(
              s,
              Object(S.a)({}, p, {
                node: { exits: Object(S.a)({}, m, { destination_uuid: Y(d) }) }
              })
            )),
              d &&
                (sl(e, d),
                (s = Ai(s, Object(S.a)({}, d, { inboundConnections: X(Object(S.a)({}, c, p)) }))));
          }
          return Ai(s, Q([t]));
        },
        zi = function(e, t, a) {
          var n = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3],
            i = a.left,
            s = a.top,
            o = { left: i, top: s };
          return (
            n && (o = I(i, s)),
            Ai(e, Object(S.a)({}, t, { ui: { position: Y({ left: o.left, top: o.top }) } }))
          );
        },
        Bi = function(e, t, a) {
          var n = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3];
          e._ui.stickies || (e._ui.stickies = {});
          var i = e._ui.stickies[t].position,
            s = i.right - i.left,
            o = i.bottom - i.top,
            r = a.left,
            l = a.top,
            u = { left: r, top: l };
          return (
            n && (u = I(r, l)),
            Ai(e, {
              _ui: {
                stickies: Object(S.a)({}, t, {
                  position: Y({ left: u.left, top: u.top, right: u.left + s, bottom: u.top + o })
                })
              }
            })
          );
        },
        qi = function(e, t, a) {
          return (
            e._ui.stickies || (e._ui.stickies = {}),
            Ai(
              e,
              a ? { _ui: { stickies: X(Object(S.a)({}, t, a)) } } : { _ui: { stickies: Q([t]) } }
            )
          );
        },
        Vi = a(142),
        Hi = a.n(Vi),
        Gi = { name: Ft.t('contact_statuses.active', 'Active'), value: ke.ACTIVE },
        Ki = {
          name: Ft.t('contact_statuses.blocked', 'Blocked - remove from groups, ignore forever'),
          value: ke.BLOCKED
        },
        Wi = {
          name: Ft.t(
            'contact_statuses.stopped',
            'Stopped - remove from groups, ignore until they message again'
          ),
          value: ke.STOPPED
        },
        Yi = {
          name: Ft.t('contact_statuses.archived', 'Archived - remove from groups, ignore forever'),
          value: ke.ARCHIVED
        },
        Xi = [Gi, Ki, Wi, Yi],
        Qi = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = gr(n.props.nodeSettings, n.props.assetStore)),
              Object(b.react)(Object(g.a)(n), { include: [/^get/, /^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('type') && (a.type = e.type),
                    e.hasOwnProperty('name') && (a.name = { value: e.name }),
                    e.hasOwnProperty('channel') &&
                      (a.channel = oa(Ft.t('forms.channel', 'Channel'), e.channel, [ua(t)])),
                    e.hasOwnProperty('language') &&
                      (a.language = oa(Ft.t('forms.language', 'Language'), e.language, [ua(t)])),
                    e.hasOwnProperty('status') && (a.status = { value: e.status }),
                    e.hasOwnProperty('field') && (a.field = { value: e.field }),
                    e.hasOwnProperty('fieldValue') &&
                      (a.fieldValue = { value: e.fieldValue, validationFailures: [] });
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handlePropertyChange',
                value: function(e) {
                  var t = e[0];
                  if (t) {
                    if (t.type === fe.ContactProperty)
                      switch (t.id) {
                        case l.Name:
                          return this.handleUpdate({
                            field: t,
                            type: Ee.set_contact_name,
                            name: ''
                          });
                        case l.Language:
                          return this.handleUpdate({ field: t, type: Ee.set_contact_language });
                        case l.Status:
                          return this.handleUpdate({ field: t, type: Ee.set_contact_status });
                        case l.Channel:
                          return this.handleUpdate({ field: t, type: Ee.set_contact_channel });
                      }
                    return this.handleUpdate({
                      type: Ee.set_contact_field,
                      field: t,
                      fieldValue: ''
                    });
                  }
                }
              },
              {
                key: 'handleChannelUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                  return this.handleUpdate({ channel: e[0] }, t);
                }
              },
              {
                key: 'handleLanguageUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                  return this.handleUpdate({ language: e[0] }, t);
                }
              },
              {
                key: 'handleStatusUpdate',
                value: function(e) {
                  return this.handleUpdate({ status: e, fieldValue: '' });
                }
              },
              {
                key: 'handleFieldValueUpdate',
                value: function(e) {
                  return this.handleUpdate({ fieldValue: e, name: '' });
                }
              },
              {
                key: 'handleNameUpdate',
                value: function(e) {
                  return this.handleUpdate({ name: e, fieldValue: '' });
                }
              },
              {
                key: 'onUpdated',
                value: function(e, t) {
                  var a = t().flowContext.assetStore;
                  this.state.field.value.type === fe.Field &&
                    e(
                      Ue(
                        (function(e, t, a) {
                          var n = _l(a);
                          return Ai(t, Object(S.a)({}, e, { items: { $merge: n } }));
                        })('fields', a, [this.state.field.value])
                      )
                    );
                }
              },
              {
                key: 'handleFieldAdded',
                value: function(e) {
                  this.props.addAsset('fields', e), this.handlePropertyChange([e]);
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e = this.state.valid;
                  this.state.type === Ee.set_contact_language &&
                    (e = this.handleLanguageUpdate([this.state.language.value], !0) && e),
                    this.state.type === Ee.set_contact_channel &&
                      (e = this.handleChannelUpdate([this.state.channel.value], !0) && e),
                    e &&
                      (this.props.updateAction(
                        vr(this.props.nodeSettings, this.state),
                        this.onUpdated
                      ),
                      this.props.onClose(!0));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'getValueWidget',
                value: function() {
                  return this.state.type === Ee.set_contact_channel
                    ? k.createElement(Bt, {
                        key: 'select_channel',
                        name: Ft.t('forms.channel', 'Channel'),
                        placeholder: 'Select the channel to use for this contact',
                        assets: this.props.assetStore.channels,
                        entry: this.state.channel,
                        searchable: !0,
                        valueClearable: !0,
                        onChange: this.handleChannelUpdate
                      })
                    : this.state.type === Ee.set_contact_language
                    ? k.createElement(Bt, {
                        key: 'select_language',
                        name: Ft.t('forms.language', 'Language'),
                        placeholder: 'Select the language to use for this contact',
                        assets: this.props.assetStore.languages,
                        entry: this.state.language,
                        valueClearable: !0,
                        onChange: this.handleLanguageUpdate,
                        shouldExclude: function(e) {
                          return 'base' === e.iso;
                        }
                      })
                    : this.state.type === Ee.set_contact_status
                    ? k.createElement(Sa, {
                        key: 'contact_status_select',
                        name: Ft.t('forms.status', 'Status'),
                        entry: this.state.status,
                        onChange: this.handleStatusUpdate,
                        options: Xi
                      })
                    : this.state.type === Ee.set_contact_name
                    ? k.createElement(xa, {
                        name: Ft.t('forms.name', 'Name'),
                        placeholder: 'Enter a new name for the contact',
                        onChange: this.handleNameUpdate,
                        entry: this.state.name,
                        autocomplete: !0,
                        focus: !0
                      })
                    : k.createElement(xa, {
                        name: Ft.t('forms.field_value', 'Field Value'),
                        placeholder: 'Enter a new value for '.concat(this.state.field.value.label),
                        onChange: this.handleFieldValueUpdate,
                        entry: this.state.fieldValue,
                        autocomplete: !0,
                        focus: !0
                      });
                }
              },
              {
                key: 'handleCreateAssetFromInput',
                value: function(e) {
                  return { label: e, value_type: 'text' };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('p', null, 'Select what to update'),
                    k.createElement(Bt, {
                      name: Ft.t('forms.contact_field', 'Contact Field'),
                      assets: this.props.assetStore.fields,
                      additionalOptions: _i(this.context.config.flowType),
                      entry: this.state.field,
                      searchable: !0,
                      sortFunction: fr,
                      onChange: this.handlePropertyChange,
                      getName: br,
                      createPrefix: 'Create Contact Field: ',
                      createAssetFromInput: this.handleCreateAssetFromInput,
                      onAssetCreated: this.handleFieldAdded
                    }),
                    k.createElement('div', { className: Hi.a.value }, this.getValueWidget()),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      Qi.contextTypes = { config: bt };
      var Ji = a(66),
        Zi = a.n(Ji),
        $i = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleCurrencyChanged',
                value: function(e) {
                  this.props.onChange(this.props.index, {
                    value: { amount: this.props.transfer.value.amount, code: e[0].id },
                    validationFailures: this.props.transfer.validationFailures
                  });
                }
              },
              {
                key: 'handleAmountChanged',
                value: function(e) {
                  var t = [];
                  isNaN(Number(e)) && t.push({ message: 'Invalid amount, please enter a number' }),
                    this.props.onChange(this.props.index, {
                      value: { amount: e, code: this.props.transfer.value.code },
                      validationFailures: t
                    });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = 'Transfer Amount',
                    a = '',
                    n = null;
                  if (this.props.transfer.value) {
                    var i = this.props.transfer.value;
                    i.code && ((t = ''.concat(i.code, ' ').concat(t)), (n = { id: i.code })),
                      (a = '' + i.amount);
                  }
                  var s =
                      this.props.index > -1
                        ? k.createElement(
                            'div',
                            { className: Zi.a.amount },
                            k.createElement(xa, {
                              placeholder: t,
                              name: Ft.t('forms.value', 'value'),
                              onChange: this.handleAmountChanged,
                              entry: { value: a }
                            })
                          )
                        : null,
                    o =
                      this.props.index > -1
                        ? k.createElement(
                            'div',
                            {
                              className: Zi.a.remove,
                              onClick: function() {
                                e.props.onRemove(e.props.index);
                              }
                            },
                            k.createElement('span', { className: 'fe-x' })
                          )
                        : null;
                  return k.createElement(
                    jt,
                    {
                      name: Ft.t('forms.currency', 'Currency'),
                      entry: this.props.transfer,
                      __className: Zi.a.form_element
                    },
                    k.createElement(
                      'div',
                      { className: Zi.a.transfer },
                      k.createElement(
                        'div',
                        { className: Zi.a.currency },
                        k.createElement(Bt, {
                          style: Pt.small,
                          name: Ft.t('forms.currency', 'Currency'),
                          shouldExclude: function(t) {
                            return (
                              e.props.exclude.filter(function(e) {
                                return e.value.code === t.id;
                              }).length > 1
                            );
                          },
                          entry: { value: n },
                          nameKey: 'id',
                          valueKey: 'id',
                          onChange: this.handleCurrencyChanged,
                          additionalOptions: this.props.currencies,
                          placeholder: Ft.t('forms.currency', 'Select a Currency')
                        })
                      ),
                      s,
                      ' ',
                      o
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        es = a(100),
        ts = a.n(es),
        as = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              (n.state = { editing: n.props.value.value.trim().length > 0, valid: !0 }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleTextChanged',
                value: function(e) {
                  this.props.onChange(e);
                }
              },
              {
                key: 'handleEditingChanged',
                value: function() {
                  this.setState({ editing: !0 });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e;
                  return (
                    (e = this.state.editing
                      ? k.createElement(xa, {
                          'data-testid': 'optional-field',
                          'data-spec': 'optional-field',
                          name: this.props.name,
                          showLabel: !0,
                          entry: this.props.value,
                          onChange: this.handleTextChanged,
                          helpText: this.props.helpText,
                          maxLength: this.props.maxLength
                        })
                      : k.createElement(
                          'span',
                          {
                            'data-testid': 'toggle-link',
                            'data-spec': 'toggle-link',
                            className: ts.a.toggle_link,
                            onClick: this.handleEditingChanged
                          },
                          this.props.toggleText
                        )),
                    k.createElement('div', { className: ts.a.optional_text_input }, e)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        ns = function(e, t) {
          var a = !ht(e) && e.value ? '.' + L(e.value) : '';
          return k.createElement(as, {
            name: Ft.t('forms.save_result_name', 'Result Name'),
            maxLength: 64,
            value: e,
            onChange: t,
            toggleText: Ft.t('forms.save_as_title', 'Save as..'),
            helpText: k.createElement(
              Pe.a,
              { i18nKey: 'forms.result_name_help', values: { resultFormat: '@results'.concat(a) } },
              'By naming the result, you can reference it later using [[resultFormat]]'
            )
          });
        },
        is = a(101),
        ss = a.n(is),
        os = function(e) {
          var t = e.validationFailures.map(function(e, t) {
            return k.createElement(
              'div',
              { key: 'validation_' + t, className: ss.a.error },
              e.message
            );
          });
          return k.createElement('div', { className: ss.a.errors }, t);
        },
        rs = a(143),
        ls = a.n(rs),
        us = function(e) {
          var t =
            e.originalAction ||
            (e.originalNode.node.actions.length > 0 && e.originalNode.node.actions[0]);
          if (t.type === Ee.transfer_airtime) return t;
        },
        cs = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).options = []),
              (n.state = (function(e) {
                var t = us(e),
                  a = { value: 'Result' },
                  n = !1,
                  i = [];
                return (
                  t &&
                    t.type === Ee.transfer_airtime &&
                    (Object.keys(t.amounts).forEach(function(e) {
                      i.push({ value: { code: e, amount: '' + t.amounts[e] } });
                    }),
                    (a = { value: t.result_name }),
                    (n = !0)),
                  { valid: n, amounts: i, resultName: a }
                );
              })(e.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this.props.assetStore.currencies
                    ? this.props.assetStore.currencies.items
                    : {};
                  this.options = Object.keys(e).map(function(t) {
                    return { id: e[t].id };
                  });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e = [];
                  this.state.amounts.forEach(function(t, a) {
                    0 === t.value.amount.trim().length && e.push(a);
                  });
                  var t = !this.state.amounts.find(function(e) {
                    return (e.validationFailures || []).length > 0;
                  });
                  t &&
                    ((t =
                      void 0 !==
                      this.state.amounts.find(function(e) {
                        return e.value.amount.trim().length > 0;
                      })) ||
                      this.setState({
                        valid: !1,
                        validationFailures: [
                          { message: 'At least one amount to transfer is required' }
                        ]
                      })),
                    t &&
                      (this.props.updateRouter(
                        (function(e, t) {
                          var a = $(),
                            n = us(e);
                          n && (a = n.uuid);
                          var i = {};
                          t.amounts.forEach(function(e) {
                            e.value.amount.trim().length > 0 &&
                              (i[e.value.code] = Number(e.value.amount));
                          });
                          var s = {
                            uuid: a,
                            type: Ee.transfer_airtime,
                            amounts: i,
                            result_name: t.resultName.value
                          };
                          return xi(s, e.originalNode, !0);
                        })(this.props.nodeSettings, this.state)
                      ),
                      this.props.onClose(!1));
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ra, ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: 'Ok', onClick: this.handleSave },
                    secondary: {
                      name: 'Cancel',
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleRemoved',
                value: function(e) {
                  var t = Jt()(this.state.amounts, { $splice: [[e, 1]] });
                  this.setState({ amounts: t });
                }
              },
              {
                key: 'handleTransferChanged',
                value: function(e, t) {
                  var a = this.state.amounts;
                  (a =
                    e > -1
                      ? Jt()(this.state.amounts, { $merge: Object(S.a)({}, e, t) })
                      : Jt()(this.state.amounts, { $push: [t] })),
                    this.setState({ amounts: a, validationFailures: [] });
                }
              },
              {
                key: 'renderAmount',
                value: function(e, t) {
                  return k.createElement($i, {
                    key: 'currency_' + e,
                    exclude: this.state.amounts,
                    currencies: this.options,
                    transfer: t,
                    index: e,
                    onChange: this.handleTransferChanged,
                    onRemove: this.handleRemoved
                  });
                }
              },
              {
                key: 'renderAmounts',
                value: function() {
                  var e = this,
                    t = this.state.amounts.map(function(t, a) {
                      return e.renderAmount(a, t);
                    });
                  return k.createElement(
                    'div',
                    null,
                    t,
                    this.renderAmount(-1, { value: { code: null, amount: '' } })
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig,
                    t = this.state.validationFailures
                      ? k.createElement(os, { validationFailures: this.state.validationFailures })
                      : null;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    this.renderAmounts(),
                    t,
                    k.createElement(
                      'div',
                      { className: ls.a.result_name },
                      ns(this.state.resultName, this.handleUpdateResultName)
                    ),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent),
        ds = a(144),
        ps = a.n(ds),
        hs = [
          {
            type: Ce.has_top_intent,
            verboseName: Ft.t('operators.has_top_intent', 'has top intent'),
            operands: 2,
            visibility: Ke
          },
          {
            type: Ce.has_intent,
            verboseName: Ft.t('operators.has_intent', 'has intent'),
            operands: 2,
            visibility: Ke
          }
        ],
        ms = [
          {
            type: Ce.has_any_word,
            verboseName: Ft.t('operators.has_any_word', 'has any of the words'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_all_words,
            verboseName: Ft.t('operators.has_all_words', 'has all of the words'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_phrase,
            verboseName: Ft.t('operators.has_phrase', 'has the phrase'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_only_phrase,
            verboseName: Ft.t('operators.has_only_phrase', 'has only the phrase'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_beginning,
            verboseName: Ft.t('operators.has_beginning', 'starts with'),
            operands: 1
          },
          {
            type: Ce.has_text,
            verboseName: Ft.t('operators.has_text', 'has some text'),
            operands: 0,
            categoryName: 'Has Text',
            visibility: Ge
          },
          {
            type: Ce.has_number,
            verboseName: Ft.t('operators.has_number', 'has a number'),
            operands: 0,
            categoryName: 'Has Number'
          },
          {
            type: Ce.has_number_between,
            verboseName: Ft.t('operators.has_number_between', 'has a number between'),
            operands: 2
          },
          {
            type: Ce.has_number_lt,
            verboseName: Ft.t('operators.has_number_lt', 'has a number below'),
            operands: 1
          },
          {
            type: Ce.has_number_lte,
            verboseName: Ft.t('operators.has_number_lte', 'has a number at or below'),
            operands: 1
          },
          {
            type: Ce.has_number_eq,
            verboseName: Ft.t('operators.has_number_eq', 'has a number equal to'),
            operands: 1
          },
          {
            type: Ce.has_number_gte,
            verboseName: Ft.t('operators.has_number_gte', 'has a number at or above'),
            operands: 1
          },
          {
            type: Ce.has_number_gt,
            verboseName: Ft.t('operators.has_number_gt', 'has a number above'),
            operands: 1
          },
          {
            type: Ce.has_date,
            verboseName: Ft.t('operators.has_date', 'has a date'),
            operands: 0,
            categoryName: Ft.t('operators.has_date_category', 'Has Date'),
            visibility: Ge
          },
          {
            type: Ce.has_date_lt,
            verboseName: Ft.t('operators.has_date_lt', 'has a date before'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_date_eq,
            verboseName: Ft.t('operators.has_date_eq', 'has a date equal to'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_date_gt,
            verboseName: Ft.t('operators.has_date_gt', 'has a date after'),
            operands: 1,
            visibility: Ge
          },
          {
            type: Ce.has_time,
            verboseName: Ft.t('operators.has_time', 'has a time'),
            operands: 0,
            categoryName: 'Has Time',
            visibility: Ge
          },
          {
            type: Ce.has_group,
            verboseName: Ft.t('operators.has_group', 'is in the group'),
            operands: 1,
            visibility: qe
          },
          {
            type: Ce.has_category,
            verboseName: Ft.t('operators.has_category', 'has the category'),
            operands: 0,
            visibility: qe
          },
          {
            type: Ce.has_phone,
            verboseName: Ft.t('operators.has_phone', 'has a phone number'),
            operands: 0,
            categoryName: Ft.t('operators.has_phone_category', 'Has Phone')
          },
          {
            type: Ce.has_email,
            verboseName: Ft.t('operators.has_email', 'has an email'),
            operands: 0,
            categoryName: Ft.t('operators.has_email_category', 'Has Email'),
            visibility: Ge
          },
          {
            type: Ce.has_state,
            verboseName: Ft.t('operators.has_state', 'has state'),
            operands: 0,
            categoryName: Ft.t('operators.has_state_category', 'Has State')
          },
          {
            type: Ce.has_district,
            verboseName: Ft.t('operators.has_district', 'has district'),
            operands: 1,
            categoryName: Ft.t('operators.has_district_category', 'Has District')
          },
          {
            type: Ce.has_ward,
            verboseName: Ft.t('operators.has_ward', 'has ward'),
            operands: 2,
            categoryName: Ft.t('operators.has_ward_category', 'Has Ward')
          },
          {
            type: Ce.has_error,
            verboseName: Ft.t('operators.has_error', 'has an error'),
            operands: 0,
            categoryName: Ft.t('operators.has_error_category', 'Has Error'),
            visibility: qe
          },
          {
            type: Ce.has_value,
            verboseName: Ft.t('operators.has_value', 'is not empty'),
            operands: 0,
            categoryName: Ft.t('operators.has_value_category', 'Not Empty'),
            visibility: qe
          },
          {
            type: Ce.has_pattern,
            verboseName: Ft.t('operator.has_pattern', 'matches regex'),
            operands: 1
          },
          {
            type: Ce.has_media,
            verboseName: Ft.t('operators.has_media', 'has media'),
            operands: 0,
            categoryName: 'Has Media',
            visibility: Ge
          }
        ],
        _s = [].concat(ms, hs).reduce(function(e, t) {
          return (e[t.type] = t), e;
        }, {}),
        gs = function(e) {
          return _s[e];
        },
        vs = a(37),
        fs = a.n(vs),
        ys = function(e) {
          var t = '';
          return (
            e.indexOf('_lt') > -1
              ? (t = e.indexOf('date') > -1 ? 'Before ' : e.indexOf('lte') > -1 ? '<= ' : '< ')
              : e.indexOf('_gt') > -1 &&
                (t = e.indexOf('date') > -1 ? 'After ' : e.indexOf('gte') > -1 ? '>= ' : '>'),
            t
          );
        },
        bs = function(e) {
          var t,
            a,
            n,
            i = e.exitEdited && e.exitName ? [ra] : [],
            s = {
              operatorConfig: e.operatorConfig,
              district: { value: '', validationFailures: [] },
              state: { value: '', validationFailures: [] },
              min: { value: '', validationFailures: [] },
              max: { value: '', validationFailures: [] },
              argument: { value: '', validationFailures: [] },
              intent: { value: null, validationFailures: [] },
              confidence: { value: '', validationFailures: [] }
            };
          if (e.operatorConfig.operands > 0) {
            switch (e.operatorConfig.type) {
              case Ce.has_number_eq:
              case Ce.has_number_gt:
              case Ce.has_number_gte:
              case Ce.has_number_lt:
              case Ce.has_number_lte:
                i.push(va);
                break;
              case Ce.has_date_eq:
              case Ce.has_date_lt:
              case Ce.has_date_gt:
                i.push(_a);
            }
            if (e.operatorConfig.type === Ce.has_number_between)
              (s.min = oa(
                Ft.t('forms.minimum_value', 'Minimum value'),
                e.min || '',
                i.concat([
                  _a,
                  ((a = parseFloat(e.max)),
                  (n = Ft.t('forms.the_maximum', 'the maximum')),
                  function(e, t) {
                    return 'string' === typeof t && parseFloat(t) >= a
                      ? {
                          value: t,
                          failures: [
                            {
                              message: ''
                                .concat(e, ' ')
                                .concat(Ft.t('forms.must_be_less_than', 'must be less than'), ' ')
                                .concat(n)
                            }
                          ]
                        }
                      : { failures: [], value: t };
                  })
                ])
              )),
                (s.max = oa(
                  Ft.t('forms.maximum_value', 'Maximum value'),
                  e.max || '',
                  i.concat([_a, la(parseFloat(e.min), Ft.t('forms.the_minimum', 'the minimum'))])
                ));
            else if (e.operatorConfig.type === Ce.has_district)
              s.argument = oa(Ft.t('forms.state', 'State'), e.argument || '', i.concat([]));
            else if (e.operatorConfig.type === Ce.has_ward)
              (s.state = oa(Ft.t('forms.state', 'State'), e.state || '', i.concat([]))),
                (s.district = oa(
                  Ft.t('forms.district', 'District'),
                  e.district || '',
                  i.concat([])
                ));
            else if (
              e.operatorConfig.type === Ce.has_top_intent ||
              e.operatorConfig.type === Ce.has_intent
            ) {
              var o = [
                ((t = e.classifier),
                function(e, a) {
                  if ('object' === typeof a) {
                    var n = a;
                    return n &&
                      t &&
                      t.content &&
                      !t.content.intents.find(function(e) {
                        return e === n.value;
                      })
                      ? {
                          value: a,
                          failures: [
                            {
                              message: ''
                                .concat(n.value, ' is not a valid intent for ')
                                .concat(t.name)
                            }
                          ]
                        }
                      : { failures: [], value: a };
                  }
                  return { failures: [], value: a };
                })
              ];
              e.confidence && o.push(ra),
                (s.intent = oa(Ft.t('forms.intent', 'Intent'), e.intent, o)),
                (s.confidence = oa(
                  Ft.t('forms.confidence', 'Confidence'),
                  e.confidence || '',
                  i.concat(e.intent ? [_a, ra] : [_a])
                ));
            } else s.argument = oa('Value', e.argument || '', i);
          }
          return (
            (s.categoryNameEdited = !!e.exitEdited),
            (s.categoryName = oa(
              Ft.t('forms.category', 'Category'),
              s.categoryNameEdited ? e.exitName : ks(s),
              s.argument.value ||
                (s.min.value && s.max.value) ||
                (s.state.value && s.district.value)
                ? [ra]
                : []
            )),
            (s.valid =
              0 === s.state.validationFailures.length &&
              0 === s.district.validationFailures.length &&
              0 === s.min.validationFailures.length &&
              0 === s.max.validationFailures.length &&
              0 === s.argument.validationFailures.length &&
              0 === s.intent.validationFailures.length &&
              0 === s.confidence.validationFailures.length &&
              0 === s.categoryName.validationFailures.length),
            s
          );
        },
        ks = function(e) {
          if (e.categoryNameEdited) return e.categoryName.value;
          if (0 === e.operatorConfig.operands) return e.operatorConfig.categoryName;
          if (
            (e.operatorConfig.type === Ce.has_intent ||
              e.operatorConfig.type === Ce.has_top_intent) &&
            e.intent.value
          )
            return z(e.intent.value.name.replace('_', ' '));
          if (e.operatorConfig.type === Ce.has_number_between && e.min.value && e.max.value)
            return ''.concat(e.min.value, ' - ').concat(e.max.value);
          if (ki(e.operatorConfig.type)) {
            var t = parseInt(e.argument.value, 10);
            if (!isNaN(t)) {
              var a =
                  e.operatorConfig.type === Ce.has_date_eq
                    ? Ft.t('forms.today_proper', 'Today')
                    : Ft.t('forms.today', 'today'),
                n = t < 0 ? ' - ' : ' + ',
                i =
                  ' ' + (1 === Math.abs(t) ? Ft.t('forms.day', 'day') : Ft.t('forms.days', 'days'));
              return ys(e.operatorConfig.type) + a + n + Math.abs(t) + i;
            }
          }
          if (e.argument && e.argument.value) {
            var s = ys(e.operatorConfig.type),
              o = e.argument.value.match(/\w+/g);
            if (o && o.length > 0) {
              var r = Object(w.a)(o, 1)[0];
              return s + z(r);
            }
            return s + z(e.argument.value);
          }
          return '';
        },
        Es = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).operators = void 0),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^get/] }),
              (n.state = (function(e) {
                var t = e.kase.arguments && e.kase.arguments.length >= 1 ? e.kase.arguments[0] : '',
                  a = e.kase.arguments && 2 === e.kase.arguments.length ? e.kase.arguments[1] : '';
                return {
                  errors: [],
                  operatorConfig: gs(e.kase.type),
                  argument: { value: t },
                  min: { value: t },
                  max: { value: a },
                  state: { value: t },
                  district: { value: a },
                  intent: { value: t ? { name: t, value: t } : null },
                  confidence: { value: a },
                  categoryName: { value: e.categoryName || '' },
                  categoryNameEdited: !!e.categoryName,
                  valid: !0
                };
              })(e)),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = bs({
                    operatorConfig: this.state.operatorConfig,
                    argument: this.state.argument.value,
                    min: this.state.min.value,
                    max: this.state.max.value,
                    intent: this.state.intent.value,
                    confidence: this.state.confidence.value,
                    exitName: this.state.categoryName.value,
                    exitEdited: this.state.categoryNameEdited,
                    classifier: this.props.classifier
                  });
                  this.setState(e, this.handleChange);
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  if (
                    this.props.classifier &&
                    this.props.classifier !== e.classifier &&
                    this.state.intent.value
                  ) {
                    var t = bs({
                      operatorConfig: this.state.operatorConfig,
                      argument: this.state.argument.value,
                      min: this.state.min.value,
                      max: this.state.max.value,
                      intent: this.state.intent.value,
                      confidence: this.state.confidence.value,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited,
                      classifier: this.props.classifier
                    });
                    this.setState(t, this.handleChange);
                  }
                }
              },
              {
                key: 'getOperators',
                value: function() {
                  var e = this.props.operators || ms;
                  return (
                    void 0 === this.operators &&
                      (this.operators = (function(e, t) {
                        return console.log('operators', e), Vt(Gt(e, t), t);
                      })(e, this.context.config)),
                    this.operators
                  );
                }
              },
              {
                key: 'getArgumentArray',
                value: function() {
                  return 0 === this.state.operatorConfig.operands
                    ? []
                    : this.state.operatorConfig.type === Ce.has_intent ||
                      this.state.operatorConfig.type === Ce.has_top_intent
                    ? this.state.intent.value
                      ? [this.state.intent.value.value, this.state.confidence.value]
                      : ['', this.state.confidence.value]
                    : this.state.operatorConfig.type === Ce.has_number_between
                    ? [this.state.min.value, this.state.max.value]
                    : this.state.operatorConfig.type === Ce.has_ward
                    ? [this.state.state.value, this.state.district.value]
                    : [this.state.argument.value];
                }
              },
              {
                key: 'handleOperatorChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: e,
                      argument: this.state.argument.value,
                      min: this.state.min.value,
                      max: this.state.max.value,
                      intent: this.state.intent.value,
                      confidence: this.state.confidence.value,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited,
                      classifier: this.props.classifier
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleArgumentChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      argument: e,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleDistrictChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      argument: this.state.argument.value,
                      state: this.state.state.value,
                      district: e,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleStateChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      argument: this.state.argument.value,
                      district: this.state.district.value,
                      state: e,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleIntentChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      intent: e,
                      confidence: this.state.confidence.value || '.9',
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited,
                      classifier: this.props.classifier
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleConfidenceChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      intent: this.state.intent.value,
                      confidence: e,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited,
                      classifier: this.props.classifier
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleMinChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      min: e,
                      max: this.state.max.value,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleMaxChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      min: this.state.min.value,
                      max: e,
                      exitName: this.state.categoryName.value,
                      exitEdited: this.state.categoryNameEdited
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleExitChanged',
                value: function(e) {
                  var t = this,
                    a = bs({
                      operatorConfig: this.state.operatorConfig,
                      state: this.state.state.value,
                      district: this.state.district.value,
                      argument: this.state.argument.value,
                      min: this.state.min.value,
                      max: this.state.max.value,
                      intent: this.state.intent.value,
                      confidence: this.state.confidence.value,
                      classifier: this.props.classifier,
                      exitName: e,
                      exitEdited: !0
                    });
                  this.setState(a, function() {
                    return t.handleChange();
                  });
                }
              },
              {
                key: 'handleRemoveClicked',
                value: function() {
                  this.props.onRemove(this.props.kase.uuid);
                }
              },
              {
                key: 'getCaseProps',
                value: function() {
                  return {
                    uuid: this.props.kase.uuid,
                    categoryName: this.state.categoryName.value,
                    kase: {
                      arguments: this.getArgumentArray(),
                      type: this.state.operatorConfig.type,
                      uuid: this.props.kase.uuid,
                      category_uuid: this.state.categoryNameEdited
                        ? null
                        : this.props.kase.category_uuid
                    },
                    valid: this.state.valid
                  };
                }
              },
              {
                key: 'handleChange',
                value: function() {
                  this.state.categoryName.value ||
                    (this.state.operatorConfig.type === Ce.has_number_between
                      ? !this.state.min.value && this.state.max.value
                      : this.state.argument.value),
                    this.props.onChange(this.getCaseProps());
                }
              },
              {
                key: 'handleIntentMenuOpened',
                value: function() {
                  this.setState({ intent: { value: this.state.intent.value } });
                }
              },
              {
                key: 'handleIntentMenuClosed',
                value: function() {
                  var e = this;
                  window.setTimeout(function() {
                    e.handleIntentChanged(e.state.intent.value);
                  }, 0);
                }
              },
              {
                key: 'renderArguments',
                value: function() {
                  if (this.state.operatorConfig.operands > 0) {
                    if (this.state.operatorConfig.operands > 1) {
                      if (this.state.operatorConfig.type === Ce.has_number_between)
                        return k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(xa, {
                            name: Ft.t('forms.arguments', 'arguments'),
                            style: ba.small,
                            onChange: this.handleMinChanged,
                            entry: this.state.min
                          }),
                          k.createElement(
                            'span',
                            { className: fs.a.divider, 'data-draggable': !0 },
                            'and'
                          ),
                          k.createElement(xa, {
                            name: Ft.t('forms.arguments', 'arguments'),
                            style: ba.small,
                            onChange: this.handleMaxChanged,
                            entry: this.state.max
                          })
                        );
                      if (
                        this.state.operatorConfig.type === Ce.has_intent ||
                        this.state.operatorConfig.type === Ce.has_top_intent
                      ) {
                        var e = [];
                        return (
                          this.props.classifier &&
                            this.props.classifier.content &&
                            (e = this.props.classifier.content.intents.map(function(e) {
                              return { name: e, value: e };
                            })),
                          k.createElement(
                            k.Fragment,
                            null,
                            k.createElement(
                              'div',
                              { style: { width: '114px' } },
                              k.createElement(Sa, {
                                key: 'intent_select',
                                style: Pt.small,
                                name: Ft.t('forms.intent', 'Intent'),
                                placeholder: Ft.t('forms.select_intent', 'Select intent'),
                                entry: this.state.intent,
                                onChange: this.handleIntentChanged,
                                options: e,
                                onMenuOpen: this.handleIntentMenuOpened,
                                onMenuClose: this.handleIntentMenuClosed,
                                hideError: !0
                              })
                            ),
                            k.createElement(
                              'div',
                              { className: fs.a.divider, 'data-draggable': !0 },
                              'above'
                            ),
                            k.createElement(
                              'div',
                              { style: { width: '34px' } },
                              k.createElement(xa, {
                                name: Ft.t('forms.confidence', 'confidence'),
                                onChange: this.handleConfidenceChanged,
                                entry: this.state.confidence,
                                style: ba.small,
                                placeholder: '.9'
                              })
                            )
                          )
                        );
                      }
                      return k.createElement(
                        k.Fragment,
                        null,
                        k.createElement(xa, {
                          name: Ft.t('forms.state', 'State'),
                          placeholder: 'State',
                          onChange: this.handleStateChanged,
                          style: ba.small,
                          entry: this.state.state
                        }),
                        k.createElement(
                          'span',
                          { className: fs.a.divider, 'data-draggable': !0 },
                          'and'
                        ),
                        k.createElement(xa, {
                          name: Ft.t('forms.district', 'District'),
                          placeholder: Ft.t('forms.district', 'District'),
                          onChange: this.handleDistrictChanged,
                          style: ba.small,
                          entry: this.state.district
                        })
                      );
                    }
                    return ki(this.state.operatorConfig.type)
                      ? k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'span',
                            { className: fs.a.divider, 'data-draggable': !0 },
                            'today +',
                            ' '
                          ),
                          k.createElement(xa, {
                            __className: fs.a.relative_date,
                            name: Ft.t('forms.arguments', 'arguments'),
                            onChange: this.handleArgumentChanged,
                            entry: this.state.argument,
                            style: ba.small,
                            autocomplete: !1
                          }),
                          k.createElement('span', { className: fs.a.divider }, 'days')
                        )
                      : k.createElement(xa, {
                          name: Ft.t('forms.arguments', 'arguments'),
                          onChange: this.handleArgumentChanged,
                          entry: this.state.argument,
                          style: ba.small,
                          placeholder:
                            this.state.operatorConfig.type === Ce.has_district ? 'State' : '',
                          autocomplete: !0
                        });
                  }
                  return null;
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    jt,
                    {
                      'data-spec': 'case-form',
                      name: this.props.name,
                      __className: fs.a.group,
                      kaseError: this.state.errors.length > 0
                    },
                    k.createElement(
                      'div',
                      {
                        className: ''
                          .concat(fs.a.kase, ' ')
                          .concat(fs.a[this.state.operatorConfig.type]),
                        'data-draggable': !0
                      },
                      k.createElement('span', {
                        className: 'fe-chevrons-expand '.concat(fs.a.dnd_icon),
                        'data-draggable': !0
                      }),
                      k.createElement(
                        'div',
                        { className: fs.a.choice },
                        k.createElement(Lt, {
                          name: Ft.t('forms.operator', 'operator'),
                          style: Pt.small,
                          options: this.getOperators(),
                          nameKey: 'verboseName',
                          valueKey: 'type',
                          onChange: this.handleOperatorChanged,
                          value: this.state.operatorConfig
                        })
                      ),
                      k.createElement(
                        'div',
                        {
                          className:
                            this.state.operatorConfig.operands > 1
                              ? fs.a.multi_operand
                              : fs.a.single_operand
                        },
                        this.renderArguments()
                      ),
                      k.createElement(
                        'div',
                        { className: fs.a.categorize_as, 'data-draggable': !0 },
                        'categorize as'
                      ),
                      k.createElement(
                        'div',
                        { className: fs.a.category },
                        k.createElement(xa, {
                          name: Ft.t('forms.exit_name', 'Exit Name'),
                          style: ba.small,
                          onChange: this.handleExitChanged,
                          entry: this.state.categoryName,
                          maxLength: 36,
                          showInvalid: B(this.state.errors, [/category/])
                        })
                      ),
                      k.createElement('span', {
                        'data-testid': 'remove-case-' + this.props.kase.uuid,
                        className: 'fe-x '.concat(fs.a.remove_icon),
                        onClick: this.handleRemoveClicked
                      })
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      Es.contextTypes = { config: bt };
      var Cs,
        ws = a(102),
        Ss = a(76),
        Ns = a.n(Ss);
      !(function(e) {
        (e.move = 'move'), (e.pointer = 'pointer');
      })(Cs || (Cs = {}));
      var Os = Object(ws.SortableElement)(function(e) {
          var t = e.value,
            a = t.item;
          return k.createElement(
            'div',
            { className: Ns.a.kase + ' case_list_case' },
            k.createElement(
              Es,
              Object.assign({ key: a.uuid }, a, {
                onRemove: t.list.handleRemoveCase,
                onChange: t.list.handleUpdateCase,
                operators: t.list.props.operators,
                classifier: t.list.props.classifier
              })
            )
          );
        }),
        xs = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            Object(m.a)(this, a),
              ((n = t.call(this, e)).sortableList = Object(ws.SortableContainer)(function(e) {
                var t = e.items;
                return k.createElement(
                  'div',
                  { className: Ns.a.case_list },
                  t.map(function(e, t) {
                    return k.createElement(Os, {
                      key: 'item-'.concat(t),
                      index: t,
                      value: { item: e, list: Object(g.a)(n) },
                      disabled: t === n.state.currentCases.length - 1,
                      shouldCancelStart: function(e) {
                        return console.log(e), !0;
                      }
                    });
                  })
                );
              })),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] });
            var i = n.props.cases;
            return (
              n.hasEmptyCase(i) || i.push(n.createEmptyCase()),
              (n.state = { currentCases: i, valid: !0 }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'createEmptyCase',
                value: function() {
                  return this.props.createEmptyCase
                    ? this.props.createEmptyCase()
                    : (function() {
                        var e = $();
                        return {
                          uuid: e,
                          kase: {
                            uuid: e,
                            type: Ce.has_any_word,
                            arguments: [''],
                            category_uuid: null
                          },
                          categoryName: '',
                          valid: !0
                        };
                      })();
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = this,
                    a = {},
                    n = !1;
                  e.hasOwnProperty('caseProps') &&
                    ((a.currentCases = [e.caseProps]),
                    (n = !0),
                    e.caseProps.valid || (a.valid = !1));
                  var i = [];
                  e.hasOwnProperty('removeCase') &&
                    ((i = [{ currentCases: [e.removeCase] }]), (n = !0)),
                    this.setState(
                      function(e) {
                        var n = Zt(e, a, i);
                        return t.props.onCasesUpdated(n.currentCases), n;
                      },
                      function() {
                        n &&
                          (t.hasEmptyCase(t.state.currentCases) ||
                            t.handleUpdate({ caseProps: t.createEmptyCase() }));
                      }
                    );
                }
              },
              {
                key: 'hasEmptyCase',
                value: function(e) {
                  return (
                    null !=
                    e.find(function(e) {
                      return 0 === e.categoryName.trim().length;
                    })
                  );
                }
              },
              {
                key: 'handleRemoveCase',
                value: function(e) {
                  return this.handleUpdate({ removeCase: { uuid: e } });
                }
              },
              {
                key: 'handleUpdateCase',
                value: function(e) {
                  this.handleUpdate({ caseProps: e });
                }
              },
              {
                key: 'handleSortEnd',
                value: function(e) {
                  var t = this,
                    a = e.oldIndex,
                    n = e.newIndex;
                  this.setState(
                    function(e) {
                      var i = e.currentCases;
                      return {
                        currentCases: ps()(i, a, n === t.state.currentCases.length - 1 ? n - 1 : n)
                      };
                    },
                    function() {
                      t.props.onCasesUpdated(t.state.currentCases);
                    }
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    'div',
                    {
                      className:
                        Ns.a.case_list_container +
                        ' ' +
                        (this.state.currentCases.length > 5 ? Ns.a.scrolling : ''),
                      tabIndex: 0
                    },
                    k.createElement(this.sortableList, {
                      items: this.state.currentCases,
                      onSortEnd: this.handleSortEnd,
                      shouldCancelStart: function(e) {
                        return !(e.target instanceof HTMLElement) || !e.target.dataset.draggable;
                      }
                    })
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      xs.contextTypes = { config: bt };
      var js,
        Ts = a(145),
        As = a.n(Ts),
        Rs = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = [],
                  a = { value: '' };
                if (mr(e.originalNode) === Ee.wait_for_digits) {
                  var n = e.originalNode.node.router;
                  n &&
                    (yi(e.originalNode.node) && (t = bi(n.cases, e.originalNode)),
                    (a = { value: n.result_name || '' }));
                }
                return { cases: t, resultName: a, valid: !0 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleCasesUpdated',
                value: function(e) {
                  this.setState({ cases: e });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.valid &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = Oi(t.cases, !1, e.originalNode.node),
                          n = a.cases,
                          i = a.exits,
                          l = a.categories,
                          u = a.defaultCategory,
                          c = a.caseConfig,
                          d = {};
                        t.resultName.value && (d.result_name = t.resultName.value);
                        var p = Object(y.a)(
                          {
                            type: s.switch,
                            default_category_uuid: u,
                            categories: l,
                            cases: n,
                            operand: '@input.text',
                            wait: { type: o.msg, hint: { type: r.digits } }
                          },
                          d
                        );
                        return fi(e.originalNode.node.uuid, p, i, Ee.wait_for_response, [], {
                          cases: c
                        });
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      { className: As.a.lead_in },
                      'If the keypad entry before the # symbol..'
                    ),
                    k.createElement(xs, {
                      'data-spec': 'cases',
                      cases: this.state.cases,
                      onCasesUpdated: this.handleCasesUpdated
                    }),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component);
      !(function(e) {
        (e.args = 'args'), (e.min = 'min'), (e.max = 'max'), (e.exit = 'exit');
      })(js || (js = {}));
      var Us,
        Ds = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = [],
                  a = { value: '' },
                  n = '@input.text';
                if (e.originalNode && mr(e.originalNode) === Ee.split_by_expression) {
                  var i = e.originalNode.node.router;
                  i &&
                    (yi(e.originalNode.node) && (t = bi(i.cases, e.originalNode)),
                    (a = { value: i.result_name || '' })),
                    (n = i.operand);
                }
                return { cases: t, resultName: a, operand: { value: n }, valid: !0 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleOperandUpdated',
                value: function(e) {
                  this.setState({ operand: oa(Ft.t('forms.operand', 'Operand'), e, [ra]) });
                }
              },
              {
                key: 'handleCasesUpdated',
                value: function(e) {
                  this.setState({ cases: e });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.valid &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = Oi(t.cases, !1, e.originalNode.node),
                          n = a.cases,
                          i = a.exits,
                          o = a.defaultCategory,
                          r = a.caseConfig,
                          l = a.categories,
                          u = {};
                        t.resultName.value && (u.result_name = t.resultName.value);
                        var c = Object(y.a)(
                          {
                            type: s.switch,
                            default_category_uuid: o,
                            categories: l,
                            cases: n,
                            operand: t.operand.value
                          },
                          u
                        );
                        return fi(e.originalNode.node.uuid, c, i, Ee.split_by_expression, [], {
                          cases: r
                        });
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('p', null, 'If the expression...'),
                    k.createElement(xa, {
                      name: Ft.t('forms.operand', 'Operand'),
                      showLabel: !1,
                      autocomplete: !0,
                      onChange: this.handleOperandUpdated,
                      entry: this.state.operand
                    }),
                    k.createElement(xs, {
                      'data-spec': 'cases',
                      cases: this.state.cases,
                      onCasesUpdated: this.handleCasesUpdated
                    }),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        Ps = a(103),
        Fs = a.n(Ps),
        Is = function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
          return [].concat(
            Object(ge.a)(_i(e)),
            Object(ge.a)(
              ur.map(function(e) {
                return { name: e.path, id: e.scheme, type: fe.Scheme };
              })
            )
          );
        };
      !(function(e) {
        (e.args = 'args'), (e.min = 'min'), (e.max = 'max'), (e.exit = 'exit');
      })(Us || (Us = {}));
      var Ms = (function(e) {
        Object(v.a)(a, e);
        var t = Object(f.a)(a);
        function a(e) {
          var n;
          return (
            Object(m.a)(this, a),
            ((n = t.call(this, e)).state = (function(e, t) {
              var a = [],
                n = { value: '' },
                i = null,
                s = mr(e.originalNode);
              if (e.originalNode && s === Ee.split_by_contact_field) {
                var o = e.originalNode.node.router;
                o &&
                  (yi(e.originalNode.node) && (a = bi(o.cases, e.originalNode)),
                  (n = { value: o.result_name || '' }));
                var r = e.originalNode.ui.config.operand;
                if (t.fields && r.id in t.fields.items) {
                  var l = t.fields.items[r.id].name;
                  i = { key: r.id, label: l, type: r.type };
                }
                i ||
                  (i = Is().find(function(e) {
                    return e.id === r.id;
                  }));
              }
              return i || (i = gt), { cases: a, resultName: n, field: { value: i }, valid: !0 };
            })(n.props.nodeSettings, n.props.assetStore)),
            Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
            n
          );
        }
        return (
          Object(_.a)(a, [
            {
              key: 'handleUpdateResultName',
              value: function(e) {
                var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
              }
            },
            {
              key: 'handleFieldChanged',
              value: function(e) {
                this.setState({ field: { value: e[0] } });
              }
            },
            {
              key: 'handleCasesUpdated',
              value: function(e) {
                this.setState({ cases: e });
              }
            },
            {
              key: 'handleSave',
              value: function() {
                this.state.valid &&
                  (this.props.updateRouter(
                    (function(e, t) {
                      var a = Oi(t.cases, !1, e.originalNode.node),
                        n = a.cases,
                        i = a.exits,
                        o = a.defaultCategory,
                        r = a.caseConfig,
                        l = a.categories,
                        u = {};
                      t.resultName.value && (u.result_name = t.resultName.value);
                      var c = '@input.text',
                        d = t.field.value,
                        p = { id: d.id, type: d.type, name: d.name };
                      d.type === fe.Scheme
                        ? (c = '@(default(urn_parts(urns.'.concat(d.id, ').path, ""))'))
                        : d.type === fe.ContactProperty
                        ? (c = '@contact.'.concat(d.id))
                        : d.key &&
                          ((c = '@fields.'.concat(d.key)),
                          (p = { id: d.key, name: d.label, type: fe.Field }));
                      var h = Object(y.a)(
                        {
                          type: s.switch,
                          default_category_uuid: o,
                          cases: n,
                          categories: l,
                          operand: c
                        },
                        u
                      );
                      return fi(e.originalNode.node.uuid, h, i, Ee.split_by_contact_field, [], {
                        operand: p,
                        cases: r
                      });
                    })(this.props.nodeSettings, this.state)
                  ),
                  this.props.onClose(!1));
              }
            },
            {
              key: 'getButtons',
              value: function() {
                var e = this;
                return {
                  primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                  secondary: {
                    name: Ft.t('buttons.cancel', 'Cancel'),
                    onClick: function() {
                      return e.props.onClose(!0);
                    }
                  }
                };
              }
            },
            {
              key: 'renderEdit',
              value: function() {
                var e = this.props.typeConfig;
                return k.createElement(
                  me,
                  { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                  k.createElement(Yt, {
                    __className: '',
                    initialType: e,
                    onChange: this.props.onTypeChange
                  }),
                  k.createElement(
                    'div',
                    { className: Fs.a.lead_in },
                    "If the contact's",
                    k.createElement(
                      'div',
                      { className: ''.concat(Fs.a.field_select, ' select-small') },
                      k.createElement(Bt, {
                        name: Ft.t('forms.contact_field', 'Contact Field'),
                        style: Pt.small,
                        assets: this.props.assetStore.fields,
                        additionalOptions: Is(this.context.config.flowType),
                        valueKey: 'id',
                        getName: br,
                        entry: this.state.field,
                        searchable: !0,
                        sortFunction: fr,
                        onChange: this.handleFieldChanged
                      })
                    )
                  ),
                  k.createElement(xs, {
                    'data-spec': 'cases',
                    cases: this.state.cases,
                    onCasesUpdated: this.handleCasesUpdated
                  }),
                  ns(this.state.resultName, this.handleUpdateResultName),
                  ot(this.props)
                );
              }
            },
            {
              key: 'render',
              value: function() {
                return this.renderEdit();
              }
            }
          ]),
          a
        );
      })(k.Component);
      Ms.contextTypes = { assetService: bt, config: bt };
      var Ls,
        zs = function(e) {
          var t = [],
            a = wi(e);
          return (
            a &&
              (t = a.cases.map(function(e) {
                return {
                  name: a.categories.find(function(t) {
                    return t.uuid === e.category_uuid;
                  }).name,
                  uuid: e.arguments[0]
                };
              })),
            t
          );
        },
        Bs = function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
          return e.map(function(e) {
            var t = e.name,
              a = e.uuid;
            return {
              uuid: a,
              kase: { uuid: $(), type: Ce.has_group, arguments: [a, t], category_uuid: '' },
              categoryName: t,
              valid: !0
            };
          });
        },
        qs = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = { groups: { value: [] }, resultName: { value: '' }, valid: !1 };
                return (
                  mr(e.originalNode) === Ee.split_by_groups &&
                    ((t.groups.value = zs(e.originalNode.node)),
                    (t.resultName = { value: e.originalNode.node.router.result_name || '' }),
                    (t.valid = !0)),
                  t
                );
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleGroupsChanged',
                value: function(e) {
                  this.handleUpdate({ groups: e });
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  this.handleUpdate({ resultName: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = {};
                  e.hasOwnProperty('groups') &&
                    (t.groups = oa(Ft.t('forms.groups', 'Groups'), e.groups, [ra])),
                    e.hasOwnProperty('resultName') && (t.resultName = { value: e.resultName });
                  var a = Zt(this.state, t);
                  return this.setState(a), a.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.valid &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = Bs(t.groups.value),
                          n = Oi(a, !1, e.originalNode.node),
                          i = n.cases,
                          o = n.exits,
                          r = n.defaultCategory,
                          l = n.caseConfig,
                          u = n.categories,
                          c = {
                            type: s.switch,
                            cases: i,
                            categories: u,
                            default_category_uuid: r,
                            operand: '@contact.groups',
                            result_name: t.resultName.value
                          };
                        return fi(e.originalNode.node.uuid, c, o, Ee.split_by_groups, [], {
                          cases: l
                        });
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('p', null, vi),
                    k.createElement(Bt, {
                      name: Ft.t('forms.groups', 'Groups'),
                      assets: this.props.assetStore.groups,
                      entry: this.state.groups,
                      searchable: !0,
                      onChange: this.handleGroupsChanged,
                      multi: !0
                    }),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      (qs.contextTypes = { endpoints: bt, assetService: bt }),
        (function(e) {
          (e[(e.Category = 0)] = 'Category'), (e[(e.Case = 1)] = 'Case');
        })(Ls || (Ls = {}));
      var Vs = function(e, t) {
          var a = [],
            n = e.originalNode.node.router.categories;
          t === Ls.Case &&
            (n = (function(e) {
              var t = mr(e);
              return t === Ee.wait_for_response || t === Ee.split_by_expression;
            })(e.originalNode)
              ? e.originalNode.node.router.cases
              : []);
          var i,
            s = Object(C.a)(n);
          try {
            var o = function() {
              var t = i.value,
                n = e.localizations.filter(function(e) {
                  return e.getObject().uuid === t.uuid;
                }),
                s = Object(w.a)(n, 1)[0];
              s.isLocalized() ? a.push(s.getObject()) : a.push({ uuid: t.uuid });
            };
            for (s.s(); !(i = s.n()).done; ) o();
          } catch (r) {
            s.e(r);
          } finally {
            s.f();
          }
          return a;
        },
        Hs = a(58),
        Gs = a.n(Hs),
        Ks = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            Object(m.a)(this, a), (n = t.call(this, e));
            var i = Vs(e.nodeSettings, Ls.Category),
              s = Vs(e.nodeSettings, Ls.Case);
            return (
              (n.state = { categories: i, cases: s, valid: !0 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = {};
                  e.hasOwnProperty('category') && (t.categories = [e.category]),
                    e.hasOwnProperty('kase') && (t.cases = [e.kase]);
                  var a = Zt(this.state, t);
                  return this.setState(a), a.valid;
                }
              },
              {
                key: 'handleUpdateCategoryName',
                value: function(e, t) {
                  return (e.name = t), this.handleUpdate({ category: e });
                }
              },
              {
                key: 'handleUpdateCaseArgument',
                value: function(e, t) {
                  return (e.arguments = [t]), this.handleUpdate({ kase: e });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e = this.state.categories.map(function(e) {
                    return e.name
                      ? { uuid: e.uuid, translations: { name: e.name } }
                      : { uuid: e.uuid };
                  });
                  e.push.apply(
                    e,
                    Object(ge.a)(
                      this.state.cases.map(function(e) {
                        return e.arguments
                          ? { uuid: e.uuid, translations: { arguments: e.arguments } }
                          : { uuid: e.uuid };
                      })
                    )
                  ),
                    this.props.updateLocalizations(this.props.language.id, e),
                    this.props.onClose(!1);
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderCases',
                value: function() {
                  var e = this;
                  return this.state.cases.map(function(t) {
                    var a,
                      n,
                      i =
                        ((a = e.props.nodeSettings),
                        (n = t.uuid),
                        a.originalNode.node.router.cases.find(function(e) {
                          return e.uuid === n;
                        })),
                      s = gs(i.type).verboseName,
                      o = Object(w.a)(i.arguments, 1)[0],
                      r = '';
                    t.arguments && t.arguments.length > 0 && (r = t.arguments[0]);
                    var l = Ft.t('forms.translation', 'Translation');
                    return k.createElement(
                      'div',
                      {
                        key: 'translate_'.concat(t.uuid),
                        'data-spec': 'operator-field',
                        className: Gs.a.translating_operator_container
                      },
                      k.createElement(
                        'div',
                        { 'data-spec': 'verbose-name', className: Gs.a.translating_operator },
                        s
                      ),
                      k.createElement(
                        'div',
                        { 'data-spec': 'argument-to-translate', className: Gs.a.translating_from },
                        o
                      ),
                      k.createElement(
                        'div',
                        { className: Gs.a.translating_to },
                        k.createElement(xa, {
                          'data-spec': 'localize-case',
                          name: t.uuid,
                          placeholder: ''.concat(e.props.language.name, ' ').concat(l),
                          showLabel: !1,
                          onChange: function(a) {
                            return e.handleUpdateCaseArgument(t, a);
                          },
                          entry: { value: r }
                        })
                      )
                    );
                  });
                }
              },
              {
                key: 'renderCategories',
                value: function() {
                  var e = this;
                  return this.state.categories.map(function(t) {
                    var a,
                      n,
                      i =
                        ((a = e.props.nodeSettings),
                        (n = t.uuid),
                        a.originalNode.node.router.categories.find(function(e) {
                          return e.uuid === n;
                        })),
                      s = ''.concat(e.props.language.name, ' Translation');
                    return (
                      t.name || (t.name = ''),
                      k.createElement(
                        'div',
                        { key: t.uuid, className: Gs.a.translating_category },
                        k.createElement(
                          'div',
                          { 'data-spec': 'category-name', className: Gs.a.translating_from },
                          i.name
                        ),
                        k.createElement(
                          'div',
                          { className: Gs.a.translating_to },
                          k.createElement(xa, {
                            'data-spec': 'localize-category',
                            name: t.name,
                            placeholder: s,
                            showLabel: !1,
                            entry: { value: t.name },
                            onChange: function(a) {
                              return e.handleUpdateCategoryName(t, a);
                            }
                          })
                        )
                      )
                    );
                  });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = Ja(this.props.nodeSettings),
                    t = [];
                  return (
                    this.state.cases.length > 0 &&
                      t.push({
                        name: 'Rule Translations',
                        body: k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'p',
                            { 'data-spec': 'instructions' },
                            'Sometimes languages need special rules to route things properly. If a translation is not provided, the original rule will be used.'
                          ),
                          this.renderCases()
                        )
                      }),
                    k.createElement(
                      me,
                      {
                        title: ''.concat(this.props.language.name, ' Category Names'),
                        headerClass: e.type,
                        buttons: this.getButtons(),
                        tabs: t
                      },
                      k.createElement(
                        'p',
                        { 'data-spec': 'instructions' },
                        'When category names are referenced later in the flow, the appropriate language for the category will be used. If no translation is provided, the original text will be used.'
                      ),
                      this.renderCategories(),
                      ot(this.props)
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Ws = function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
            t = arguments.length > 1 ? arguments[1] : void 0;
          return e
            .map(function(e, a) {
              var n = 9 === a ? 0 : a + 1,
                i = t.find(function(e) {
                  return e.arguments[0] === '' + n;
                }) || { uuid: $(), arguments: ['' + n], type: Ce.has_number_eq, category_uuid: '' };
              return { uuid: i.uuid, kase: i, categoryName: e, valid: !0 };
            })
            .filter(function(e) {
              return e.categoryName.trim().length > 0;
            });
        },
        Ys = a(77),
        Xs = a.n(Ys),
        Qs = a(15),
        Js = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                for (var t = { value: '' }, a = [], n = 0; n < 10; n++) a.push('');
                if (mr(e.originalNode) === Ee.wait_for_menu) {
                  var i,
                    s = e.originalNode.node.router,
                    o = Object(C.a)(s.cases);
                  try {
                    var r = function() {
                      var t = i.value,
                        n = parseInt(t.arguments[0], 10) - 1;
                      -1 === n && (n = a.length - 1),
                        (a[n] = e.originalNode.node.router.categories.find(function(e) {
                          return e.uuid === t.category_uuid;
                        }).name);
                    };
                    for (o.s(); !(i = o.n()).done; ) r();
                  } catch (l) {
                    o.e(l);
                  } finally {
                    o.f();
                  }
                  t = { value: s.result_name || '' };
                }
                return { resultName: t, menu: a, valid: !0 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.props.updateRouter(
                    (function(e, t) {
                      var a = {};
                      t.resultName.value && (a.result_name = t.resultName.value);
                      var n = [];
                      mr(e.originalNode) === Ee.wait_for_menu &&
                        (n = e.originalNode.node.router.cases);
                      var i = Ws(t.menu, n),
                        l = Oi(i, !1, e.originalNode.node),
                        u = l.cases,
                        c = l.exits,
                        d = l.defaultCategory,
                        p = l.caseConfig,
                        h = l.categories,
                        m = Object(y.a)(
                          {
                            type: s.switch,
                            operand: '@input.text',
                            default_category_uuid: d,
                            cases: u,
                            categories: h,
                            wait: { type: o.msg, hint: { type: r.digits, count: 1 } }
                          },
                          a
                        );
                      return fi(e.originalNode.node.uuid, m, c, Ee.wait_for_response, [], {
                        cases: p
                      });
                    })(this.props.nodeSettings, this.state)
                  ),
                    this.props.onClose(!1);
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleMenuChanged',
                value: function(e, t) {
                  var a = Qs(this.state.menu, Object(S.a)({}, e, { $set: t }));
                  this.setState({ menu: a });
                }
              },
              {
                key: 'renderOption',
                value: function(e) {
                  var t = this;
                  return k.createElement(
                    'div',
                    { key: 'menuoption-' + e, className: Xs.a.menu_option },
                    k.createElement('div', { className: Xs.a.digit }, 9 === e ? 0 : e + 1),
                    k.createElement(
                      'div',
                      { className: Xs.a.category },
                      k.createElement(xa, {
                        name: 'Menu ' + e,
                        entry: { value: this.state.menu[e] },
                        onChange: function(a) {
                          t.handleMenuChanged(e, a);
                        }
                      })
                    )
                  );
                }
              },
              {
                key: 'renderMenu',
                value: function() {
                  for (var e = [], t = 0; t < 10; t++) e.push(this.renderOption(t));
                  return e;
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('div', { className: Xs.a.menu }, this.renderMenu()),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component);
      Js.contextTypes = { assetService: bt };
      var Zs,
        $s = ee(2, 11).map(function(e) {
          return { value: e + '', name: e + ' buckets' };
        }),
        eo = function(e) {
          var t = $s.find(function(t) {
            return t.value === e + '';
          });
          return t || (t = { name: ''.concat(e, ' Buckets'), value: e + '' }), t;
        },
        to = function(e, t) {
          return e.concat(
            ee(e.length, t).map(function(e) {
              return { uuid: $(), name: 'Bucket '.concat(e + 1), exit_uuid: null };
            })
          );
        },
        ao = a(67),
        no = a.n(ao);
      !(function(e) {
        (e.args = 'args'), (e.min = 'min'), (e.max = 'max'), (e.exit = 'exit');
      })(Zs || (Zs = {}));
      var io = (function(e) {
        Object(v.a)(a, e);
        var t = Object(f.a)(a);
        function a(e) {
          var n;
          return (
            Object(m.a)(this, a),
            ((n = t.call(this, e)).state = (function(e) {
              var t = { value: '' },
                a = 2,
                n = [];
              e.originalNode &&
                mr(e.originalNode) === Ee.split_by_random &&
                ((t = { value: e.originalNode.node.router.result_name || '' }),
                (a = e.originalNode.node.exits.length),
                (n = e.originalNode.node.router.categories));
              return {
                categories: (n = to(n, a)),
                resultName: t,
                bucketChoice: { value: eo(a) },
                valid: !0
              };
            })(n.props.nodeSettings)),
            Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
            n
          );
        }
        return (
          Object(_.a)(a, [
            {
              key: 'handleUpdateResultName',
              value: function(e) {
                var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
              }
            },
            {
              key: 'handleBucketsChanged',
              value: function(e) {
                var t = parseInt(e.value, 10),
                  a = this.state.categories.concat([]);
                (a = a.slice(0, t)), (a = to(a, t));
                var n = { bucketChoice: { value: e } },
                  i = Zt(this.state, n);
                return (
                  this.setState(Object(y.a)(Object(y.a)({}, i), {}, { categories: a })), i.valid
                );
              }
            },
            {
              key: 'handleSave',
              value: function() {
                this.props.updateRouter(
                  (function(e, t) {
                    var a = {};
                    t.resultName.value && (a.result_name = t.resultName.value);
                    var n =
                        mr(e.originalNode) === Ee.split_by_random ? e.originalNode.node.exits : [],
                      i = parseInt(t.bucketChoice.value.value, 10);
                    n.splice(i, n.length - i),
                      t.categories.forEach(function(e, t) {
                        if (t < n.length) e.exit_uuid = n[t].uuid;
                        else {
                          var a = { uuid: $(), destination_uuid: null };
                          (e.exit_uuid = a.uuid), n.push(a);
                        }
                      });
                    var o = Object(y.a)({ type: s.random, categories: t.categories }, a);
                    return fi(e.originalNode.node.uuid, o, n, Ee.split_by_random, [], null);
                  })(this.props.nodeSettings, this.state)
                ),
                  this.props.onClose(!1);
              }
            },
            {
              key: 'getButtons',
              value: function() {
                var e = this;
                return {
                  primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                  secondary: {
                    name: Ft.t('buttons.cancel', 'Cancel'),
                    onClick: function() {
                      return e.props.onClose(!0);
                    }
                  }
                };
              }
            },
            {
              key: 'handleBucketNameChanged',
              value: function(e, t) {
                var a = this.state.categories;
                (a.find(function(t) {
                  return t.uuid === e.uuid;
                }).name = t),
                  this.setState({ categories: a });
              }
            },
            {
              key: 'renderBucketNames',
              value: function() {
                var e = this;
                return this.state.categories.map(function(t) {
                  return k.createElement(xa, {
                    key: t.uuid,
                    __className: no.a.bucket_name,
                    name: t.uuid,
                    entry: { value: t.name },
                    onChange: function(a) {
                      e.handleBucketNameChanged(t, a);
                    }
                  });
                });
              }
            },
            {
              key: 'renderEdit',
              value: function() {
                var e = this.props.typeConfig,
                  t = $s.concat([]);
                return (
                  -1 === $s.indexOf(this.state.bucketChoice.value) &&
                    t.push(this.state.bucketChoice.value),
                  k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'div',
                      { className: no.a.options },
                      k.createElement(
                        'div',
                        { className: no.a.lead_in },
                        'Split them randomly into one of'
                      ),
                      k.createElement(
                        'div',
                        { className: no.a.bucket_select },
                        k.createElement(Sa, {
                          key: 'buckets_select',
                          style: Pt.small,
                          name: Ft.t('forms.buckets', 'Buckets'),
                          entry: this.state.bucketChoice,
                          onChange: this.handleBucketsChanged,
                          options: t
                        })
                      )
                    ),
                    k.createElement(
                      'div',
                      { className: no.a.bucket_list },
                      this.renderBucketNames()
                    ),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  )
                );
              }
            },
            {
              key: 'render',
              value: function() {
                return this.renderEdit();
              }
            }
          ]),
          a
        );
      })(k.Component);
      io.contextTypes = { assetService: bt };
      var so,
        oo = a(78),
        ro = a.n(oo),
        lo = [
          { value: '60', name: Ft.t('forms.timeout_1 minute', '1 minute') },
          { value: '120', name: Ft.t('forms.timeout_2 minutes', '2 minutes') },
          { value: '180', name: Ft.t('forms.timeout_3 minutes', '3 minutes') },
          { value: '240', name: Ft.t('forms.timeout_4 minutes', '4 minutes') },
          { value: '300', name: Ft.t('forms.timeout_5 minutes', '5 minutes') },
          { value: '600', name: Ft.t('forms.timeout_10 minutes', '10 minutes') },
          { value: '900', name: Ft.t('forms.timeout_15 minutes', '15 minutes') },
          { value: '3600', name: Ft.t('forms.timeout_1 hour', '1 hour') },
          { value: '7200', name: Ft.t('forms.timeout_2 hours', '2 hours') },
          { value: '10800', name: Ft.t('forms.timeout_3 hours', '3 hours') },
          { value: '21600', name: Ft.t('forms.timeout_6 hours', '6 hours') },
          { value: '43200', name: Ft.t('forms.timeout_12 hours', '12 hours') },
          { value: '64800', name: Ft.t('forms.timeout_18 hours', '18 hours') },
          { value: '86400', name: Ft.t('forms.timeout_1 day', '1 day') },
          { value: '172800', name: Ft.t('forms.timeout_2 days', '2 days') },
          { value: '259200', name: Ft.t('forms.timeout_3 days', '3 days') },
          { value: '604800', name: Ft.t('forms.timeout_1 week', '1 week') }
        ],
        uo = lo[4],
        co = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'getSelected',
                value: function(e) {
                  var t,
                    a = Object(C.a)(lo.entries());
                  try {
                    for (a.s(); !(t = a.n()).done; ) {
                      var n = Object(w.a)(t.value, 2),
                        i = n[0];
                      if (n[1].value === '' + e) return lo[i];
                    }
                  } catch (s) {
                    a.e(s);
                  } finally {
                    a.f();
                  }
                  return null;
                }
              },
              {
                key: 'isChecked',
                value: function() {
                  return this.props.timeout > 0;
                }
              },
              {
                key: 'getInstructions',
                value: function() {
                  var e = 'Continue when there is no response';
                  return this.isChecked() ? ''.concat(e, ' for') : ''.concat(e, '...');
                }
              },
              {
                key: 'handleChecked',
                value: function() {
                  this.props.timeout > 0
                    ? this.props.onChanged(0)
                    : this.props.onChanged(parseInt(uo.value));
                }
              },
              {
                key: 'handleTimeoutChanged',
                value: function(e) {
                  this.props.onChanged(parseInt(e.value));
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    'div',
                    { className: ro.a.timeout_control_container },
                    k.createElement(
                      'div',
                      { className: ro.a.left_section },
                      k.createElement(qa, {
                        name: Ft.t('forms.timeout', 'Timeout'),
                        checked: this.isChecked(),
                        description: this.getInstructions(),
                        checkboxClassName: ro.a.checkbox,
                        onChange: this.handleChecked
                      })
                    ),
                    K(this.isChecked())(
                      k.createElement(
                        'div',
                        { className: ro.a.drop_down },
                        k.createElement(Lt, {
                          name: Ft.t('forms.timeout', 'Timeout'),
                          style: Pt.small,
                          value: this.getSelected(this.props.timeout),
                          options: lo,
                          onChange: this.handleTimeoutChanged
                        })
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      !(function(e) {
        (e.args = 'args'), (e.min = 'min'), (e.max = 'max'), (e.exit = 'exit');
      })(so || (so = {}));
      var po = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = [],
                  a = { value: 'Result' },
                  n = 0;
                if (e.originalNode && mr(e.originalNode) === Ee.wait_for_response) {
                  var i = e.originalNode.node.router;
                  i &&
                    (yi(e.originalNode.node) && (t = bi(i.cases, e.originalNode)),
                    (a = { value: i.result_name || '' })),
                    e.originalNode.node.router.wait &&
                      e.originalNode.node.router.wait.timeout &&
                      (n = e.originalNode.node.router.wait.timeout.seconds || 0);
                }
                return { cases: t, resultName: a, timeout: n, valid: !0 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleUpdateTimeout',
                value: function(e) {
                  this.setState({ timeout: e });
                }
              },
              {
                key: 'handleCasesUpdated',
                value: function(e) {
                  var t = e.find(function(e) {
                    return !e.valid;
                  });
                  this.setState({ cases: e, valid: !t });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.valid &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = Oi(t.cases, t.timeout > 0, e.originalNode.node),
                          n = a.cases,
                          i = a.exits,
                          r = a.defaultCategory,
                          l = a.timeoutCategory,
                          u = a.caseConfig,
                          c = a.categories,
                          d = {};
                        t.resultName.value && (d.result_name = t.resultName.value);
                        var p = { type: o.msg };
                        t.timeout > 0 && (p.timeout = { seconds: t.timeout, category_uuid: l });
                        var h = Object(y.a)(
                          {
                            type: s.switch,
                            default_category_uuid: r,
                            cases: n,
                            categories: c,
                            operand: '@input.text',
                            wait: p
                          },
                          d
                        );
                        return fi(e.originalNode.node.uuid, h, i, Ee.wait_for_response, [], {
                          cases: u
                        });
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    {
                      title: e.name,
                      headerClass: e.type,
                      buttons: this.getButtons(),
                      gutter: k.createElement(co, {
                        timeout: this.state.timeout,
                        onChanged: this.handleUpdateTimeout
                      })
                    },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('div', null, gi),
                    k.createElement(xs, {
                      'data-spec': 'cases',
                      cases: this.state.cases,
                      onCasesUpdated: this.handleCasesUpdated
                    }),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        ho = function(e) {
          var t =
            e.originalAction ||
            (e.originalNode.node.actions.length > 0 && e.originalNode.node.actions[0]);
          if (t.type === Ee.call_resthook) return t;
        },
        mo = a(146),
        _o = a.n(mo),
        go = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).options = []),
              (n.state = (function(e) {
                var t = { value: null },
                  a = { value: 'Result' },
                  n = !1,
                  i = ho(e);
                i &&
                  i.type === Ee.call_resthook &&
                  ((t = { value: { resthook: i.resthook } }),
                  (a = { value: i.result_name }),
                  (n = !0));
                return { resthook: t, resultName: a, valid: n };
              })(e.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this.props.assetStore.resthooks
                    ? this.props.assetStore.resthooks.items
                    : {};
                  this.options = Object.keys(e).map(function(t) {
                    return { name: e[t].name, value: t };
                  });
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ra, ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleResthookChanged',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = { resthook: oa(Ft.t('forms.resthook', 'Resthook'), e[0], [ua(t)]) },
                    n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.handleResthookChanged([this.state.resthook.value], !0) &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = $(),
                          n = ho(e);
                        n && (a = n.uuid);
                        var i = {
                          uuid: a,
                          resthook: t.resthook.value.resthook,
                          type: Ee.call_resthook,
                          result_name: t.resultName.value
                        };
                        return xi(i, e.originalNode, !1);
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: 'Ok', onClick: this.handleSave },
                    secondary: {
                      name: 'Cancel',
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(Bt, {
                      name: Ft.t('forms.resthook', 'Resthook'),
                      placeholder: Ft.t('forms.resthook_to_call', 'Select the resthook to call'),
                      assets: this.props.assetStore.resthooks,
                      entry: this.state.resthook,
                      searchable: !0,
                      onChange: this.handleResthookChanged,
                      nameKey: 'resthook',
                      valueKey: 'resthook'
                    }),
                    k.createElement(
                      'div',
                      { className: _o.a.result_name },
                      ns(this.state.resultName, this.handleUpdateResultName)
                    ),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent),
        vo = [
          { value: '0', name: 'first' },
          { value: '1', name: 'second' },
          { value: '2', name: 'third' },
          { value: '3', name: 'fourth' },
          { value: '4', name: 'fifth' },
          { value: '5', name: 'sixth' },
          { value: '6', name: 'seventh' },
          { value: '7', name: 'eighth' },
          { value: '8', name: 'ninth' },
          { value: '9', name: 'tenth' },
          { value: '10', name: '11th' },
          { value: '11', name: '12th' },
          { value: '12', name: '13th' },
          { value: '13', name: '14th' },
          { value: '14', name: '15th' },
          { value: '15', name: '16th' },
          { value: '16', name: '17th' },
          { value: '17', name: '18th' },
          { value: '18', name: '19th' },
          { value: '19', name: '20th' }
        ],
        fo = [
          { value: ' ', name: 'spaces' },
          { value: '.', name: 'periods' },
          { value: '+', name: 'plusses' }
        ],
        yo = function(e) {
          return fo.find(function(t) {
            return t.value === e;
          });
        },
        bo = a(44),
        ko = a.n(bo),
        Eo = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).options = []),
              (n.state = (function(e, t) {
                var a = [],
                  n = { value: '' },
                  i = null,
                  s = 1,
                  o = ' ',
                  r = !1,
                  l = mr(e.originalNode);
                if (
                  (e.originalNode && l === Ee.split_by_run_result) ||
                  l === Ee.split_by_run_result_delimited
                ) {
                  var u = e.originalNode.node.router;
                  u &&
                    (yi(e.originalNode.node) && (a = bi(u.cases, e.originalNode)),
                    (n = { value: u.result_name || '' }));
                  var c = e.originalNode.ui.config;
                  c &&
                    c.operand &&
                    (i = c.operand.id in t.results.items ? t.results.items[c.operand.id] : null),
                    l === Ee.split_by_run_result_delimited &&
                      ((s = c.index), (o = c.delimiter), (r = !0));
                }
                return {
                  cases: a,
                  resultName: n,
                  result: { value: i },
                  shouldDelimit: r,
                  fieldNumber: s,
                  delimiter: o,
                  valid: !0
                };
              })(n.props.nodeSettings, n.props.assetStore)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this.props.assetStore.results.items;
                  this.options = Object.keys(e).map(function(t) {
                    return { name: e[t].name, value: t };
                  });
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleResultChanged',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {
                      result: oa(Ft.t('forms.result_to_split_on', 'Result to split on'), e[0], [
                        ua(t)
                      ])
                    },
                    n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleCasesUpdated',
                value: function(e) {
                  this.setState({ cases: e });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.handleResultChanged([this.state.result.value], !0) &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = Oi(t.cases, !1, e.originalNode.node),
                          n = a.cases,
                          i = a.exits,
                          o = a.defaultCategory,
                          r = a.caseConfig,
                          l = a.categories,
                          u = {};
                        t.resultName.value && (u.result_name = t.resultName.value);
                        var c = Ee.split_by_run_result,
                          d = t.result.value,
                          p = '@results.'.concat(d.id),
                          h = { operand: { name: d.name, id: d.id, type: fe.Result }, cases: r };
                        t.shouldDelimit &&
                          ((h.index = t.fieldNumber),
                          (h.delimiter = t.delimiter),
                          (p = '@(field(results.'
                            .concat(d.id, ', ')
                            .concat(t.fieldNumber, ', "')
                            .concat(t.delimiter, '"))')),
                          (c = Ee.split_by_run_result_delimited));
                        var m = Object(y.a)(
                          {
                            type: s.switch,
                            default_category_uuid: o,
                            categories: l,
                            cases: n,
                            operand: p
                          },
                          u
                        );
                        return fi(e.originalNode.node.uuid, m, i, c, [], h);
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleShouldDelimitChanged',
                value: function(e) {
                  this.setState({ shouldDelimit: e });
                }
              },
              {
                key: 'handleFieldNumberChanged',
                value: function(e) {
                  this.setState({ fieldNumber: parseInt(e.value, 10) });
                }
              },
              {
                key: 'handleDelimiterChanged',
                value: function(e) {
                  this.setState({ delimiter: e.value });
                }
              },
              {
                key: 'renderField',
                value: function() {
                  return k.createElement(
                    'div',
                    { className: ko.a.non_delimited },
                    k.createElement('div', { className: ko.a.lead_in }, 'If the flow result'),
                    k.createElement(
                      'div',
                      { className: ko.a.result_select },
                      k.createElement(Bt, {
                        entry: this.state.result,
                        style: Pt.small,
                        name: Ft.t('forms.flow_result', 'Flow Result'),
                        placeholder: 'Select Result',
                        searchable: !1,
                        assets: this.props.assetStore.results,
                        onChange: this.handleResultChanged,
                        additionalOptions: this.options
                      })
                    )
                  );
                }
              },
              {
                key: 'renderFieldDelimited',
                value: function() {
                  return k.createElement(
                    'div',
                    { className: ko.a.delimited },
                    k.createElement('div', { className: ko.a.lead_in }, 'If the'),
                    k.createElement(
                      'div',
                      { className: ko.a.field_number },
                      k.createElement(Sa, {
                        key: 'field_number_select',
                        style: Pt.small,
                        name: Ft.t('forms.field_number', 'Field Number'),
                        entry: {
                          value:
                            ((e = this.state.fieldNumber),
                            vo.find(function(t) {
                              return t.value === '' + e;
                            }))
                        },
                        onChange: this.handleFieldNumberChanged,
                        options: vo
                      })
                    ),
                    k.createElement('div', { className: ko.a.lead_in_sub }, 'field of'),
                    k.createElement(
                      'div',
                      { className: ko.a.result_select_delimited },
                      k.createElement(Bt, {
                        entry: this.state.result,
                        style: Pt.small,
                        name: Ft.t('forms.flow_result', 'Flow Result'),
                        placeholder: Ft.t('forms.select_result', 'Select Result'),
                        searchable: !1,
                        assets: this.props.assetStore.results,
                        onChange: this.handleResultChanged,
                        additionalOptions: this.options
                      })
                    ),
                    k.createElement('div', { className: ko.a.lead_in_sub }, 'delimited by'),
                    k.createElement(
                      'div',
                      { className: ko.a.delimiter },
                      k.createElement(Sa, {
                        key: 'delimiter_select',
                        style: Pt.small,
                        name: Ft.t('forms.delimiter', 'Delimiter'),
                        entry: { value: yo(this.state.delimiter) },
                        onChange: this.handleDelimiterChanged,
                        options: fo
                      })
                    )
                  );
                  var e;
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig,
                    t = {
                      name: 'Advanced',
                      body: k.createElement(
                        'div',
                        { className: ko.a.should_delimit },
                        k.createElement(qa, {
                          name: Ft.t('forms.delimit', 'Delimit'),
                          title: Ft.t('forms.delimit_result', 'Delimit Result'),
                          checked: this.state.shouldDelimit,
                          description: Ft.t(
                            'forms.delimit_result_description',
                            'Evaluate your rules against a delimited part of your result'
                          ),
                          onChange: this.handleShouldDelimitChanged
                        })
                      ),
                      checked: this.state.shouldDelimit
                    };
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons(), tabs: [t] },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    this.state.shouldDelimit ? this.renderFieldDelimited() : this.renderField(),
                    k.createElement(xs, {
                      'data-spec': 'cases',
                      cases: this.state.cases,
                      onCasesUpdated: this.handleCasesUpdated
                    }),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Co = a(68),
        wo = a.n(Co),
        So = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = {};
                if (
                  mr(e.originalNode) === Ee.split_by_subflow ||
                  (e.originalAction && e.originalAction.type === Ee.enter_flow)
                ) {
                  var a = e.originalAction;
                  return (
                    (a && a.type === Ee.enter_flow) ||
                      (a = e.originalNode.node.actions.find(function(e) {
                        return e.type === Ee.enter_flow;
                      })),
                    e.originalNode.node.actions.forEach(function(e) {
                      if (e.type === Ee.set_run_result) {
                        var a = e;
                        t[a.name] = { value: a.value };
                      }
                    }),
                    { flow: { value: a.flow }, params: t, valid: !0 }
                  );
                }
                return { flow: { value: null }, params: {}, valid: !1 };
              })(e.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this;
                  this.state.flow.value &&
                    Xe(this.props.assetStore.flows, this.state.flow.value.uuid).then(function(t) {
                      t &&
                        e.handleFlowChanged([
                          { name: t.name, uuid: t.id, parent_refs: t.content.parent_refs }
                        ]);
                    });
                }
              },
              {
                key: 'handleFlowChanged',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = e[0],
                    n = { flow: oa(Ft.t('forms.flow', 'Flow'), a, [ua(t)]) },
                    i = {};
                  if (a && a.parent_refs) {
                    var s,
                      o = Object(C.a)(a.parent_refs);
                    try {
                      for (o.s(); !(s = o.n()).done; ) {
                        var r = s.value;
                        this.state.params[r]
                          ? (i[r] = Object(y.a)({}, this.state.params[r]))
                          : (i[r] = { value: '' });
                      }
                    } catch (u) {
                      o.e(u);
                    } finally {
                      o.f();
                    }
                    n.params = i;
                  }
                  var l = Zt(this.state, n);
                  return this.setState(l), l.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  var e = this;
                  this.handleFlowChanged([this.state.flow.value], !0);
                  var t = Object.keys(this.state.params).find(function(t) {
                    return ht(e.state.params[t]);
                  });
                  this.state.valid &&
                    !t &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a,
                          n,
                          i,
                          o = {
                            uuid:
                              (
                                e.originalAction ||
                                (e.originalNode.node.actions.length > 0 &&
                                  e.originalNode.node.actions[0])
                              ).uuid || $(),
                            type: Ee.enter_flow,
                            flow: { uuid: t.flow.value.uuid, name: t.flow.value.name }
                          };
                        if (mr(e.originalNode) === Ee.split_by_subflow) {
                          a = e.originalNode.node.exits;
                          var r = e.originalNode.node.router;
                          (n = r.cases), (i = r.categories);
                        } else
                          (a = [
                            { uuid: $(), destination_uuid: null },
                            { uuid: $(), destination_uuid: null }
                          ]),
                            (i = [
                              { uuid: $(), name: d.Complete, exit_uuid: a[0].uuid },
                              { uuid: $(), name: d.Expired, exit_uuid: a[1].uuid }
                            ]),
                            (n = [
                              {
                                uuid: $(),
                                type: Ce.has_only_text,
                                arguments: ['completed'],
                                category_uuid: i[0].uuid
                              },
                              {
                                uuid: $(),
                                arguments: ['expired'],
                                type: Ce.has_only_text,
                                category_uuid: i[1].uuid
                              }
                            ]);
                        var l = [];
                        Object.keys(t.params).forEach(function(e) {
                          var a = (t.params[e] && t.params[e].value) || '';
                          if (a.trim().length > 0) {
                            var n = { uuid: $(), name: e, value: a, type: Ee.set_run_result };
                            l.push(n);
                          }
                        }),
                          l.push(o);
                        var u = {
                          type: s.switch,
                          operand: '@child.run.status',
                          cases: n,
                          categories: i,
                          default_category_uuid: i[i.length - 1].uuid
                        };
                        return fi(e.originalNode.node.uuid, u, a, Ee.split_by_subflow, l);
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'handleFilter',
                value: function(e) {
                  return e.content.type === this.context.config.flowType;
                }
              },
              {
                key: 'handleParamChanged',
                value: function(e, t) {
                  var a = Object(y.a)({}, this.state.params);
                  (a[t] = { value: e }), this.setState({ params: a });
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = this.props.typeConfig,
                    a = [],
                    n = this.state.flow.value,
                    i = !!Object.keys(this.state.params).find(function(t) {
                      return ht(e.state.params[t]);
                    });
                  return (
                    n &&
                      n.parent_refs &&
                      n.parent_refs.length > 0 &&
                      a.push({
                        name: Ft.t('forms.enter_flow_parameters_tab', 'Parameters'),
                        body: k.createElement(
                          'div',
                          null,
                          k.createElement(
                            'p',
                            { className: wo.a.info },
                            k.createElement(
                              Pe.a,
                              {
                                i18nKey: 'forms.enter_flow_parameters_summary',
                                values: {
                                  flow: this.state.flow.value.name,
                                  url:
                                    this.context.config.endpoints.editor +
                                    '/' +
                                    this.state.flow.value.id
                                }
                              },
                              k.createElement(
                                'a',
                                {
                                  target: '_',
                                  href:
                                    this.context.config.endpoints.editor +
                                    '/' +
                                    this.state.flow.value.id
                                },
                                '[[flow]]'
                              ),
                              ' ',
                              'expects the following parameters to be set by this flow. These can be set using a',
                              ' ',
                              k.createElement('span', null, 'Save Flow Result'),
                              ' action or directly below.'
                            )
                          ),
                          k.createElement(
                            'table',
                            { className: wo.a.params },
                            k.createElement(
                              'tbody',
                              null,
                              n.parent_refs.map(function(t) {
                                return k.createElement(
                                  'tr',
                                  { key: 'param_' + t, className: wo.a.param },
                                  k.createElement('td', { className: wo.a.param_name }, t),
                                  k.createElement(
                                    'td',
                                    { className: wo.a.param_input },
                                    k.createElement(xa, {
                                      name: t,
                                      showLabel: !1,
                                      placeholder: t,
                                      onChange: function(a) {
                                        e.handleParamChanged(a, t);
                                      },
                                      entry: e.state.params[t],
                                      autocomplete: !0
                                    })
                                  )
                                );
                              })
                            )
                          )
                        ),
                        hasErrors: i,
                        checked: !!Object.keys(this.state.params).find(function(t) {
                          return e.state.params[t] && e.state.params[t].value.trim().length > 0;
                        })
                      }),
                    k.createElement(
                      me,
                      { title: t.name, headerClass: t.type, buttons: this.getButtons(), tabs: a },
                      k.createElement(Yt, {
                        __className: '',
                        initialType: t,
                        onChange: this.props.onTypeChange
                      }),
                      k.createElement(Bt, {
                        name: Ft.t('forms.flow', 'Flow'),
                        placeholder: 'Select the flow to start',
                        assets: this.props.assetStore.flows,
                        entry: this.state.flow,
                        searchable: !0,
                        onFilter: this.handleFilter,
                        onChange: this.handleFlowChanged
                      }),
                      ot(this.props)
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent);
      So.contextTypes = { config: bt };
      var No,
        Oo = a(147),
        xo = a.n(Oo),
        jo = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = { value: 'Result' };
                if (e.originalNode && e.originalNode.ui.type === Ee.wait_for_response) {
                  var a = e.originalNode.node.router;
                  a && (t = { value: a.result_name || '' });
                }
                return { resultName: t, valid: !0 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.valid &&
                    (this.props.updateRouter(
                      (function(e, t, a) {
                        var n = Oi([], !1, e.originalNode.node),
                          i = n.exits,
                          l = n.defaultCategory,
                          u = n.caseConfig,
                          c = n.categories,
                          d = {};
                        t.resultName.value && (d.result_name = t.resultName.value);
                        var p = '@input.text',
                          h = { type: o.msg };
                        switch (a.type) {
                          case Ee.wait_for_audio:
                            (h.hint = { type: r.audio }), (p = '@input');
                            break;
                          case Ee.wait_for_image:
                            (h.hint = { type: r.image }), (p = '@input');
                            break;
                          case Ee.wait_for_location:
                            (h.hint = { type: r.location }), (p = '@input');
                            break;
                          case Ee.wait_for_video:
                            (h.hint = { type: r.video }), (p = '@input');
                        }
                        var m = Object(y.a)(
                          {
                            type: s.switch,
                            default_category_uuid: l,
                            cases: [],
                            categories: c,
                            wait: h,
                            operand: p
                          },
                          d
                        );
                        return fi(e.originalNode.node.uuid, m, i, Ee.wait_for_response, [], {
                          cases: u
                        });
                      })(this.props.nodeSettings, this.state, this.props.typeConfig)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'div',
                      { className: xo.a.result_name },
                      ns(this.state.resultName, this.handleUpdateResultName)
                    ),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        To = a(40),
        Ao = a.n(To),
        Ro =
          (Ft.t('errors.http_header_missing_name', 'HTTP headers must have a name'),
          Ft.t('forms.webhook_header_name', 'Header Name')),
        Uo = Ft.t('forms.value', 'Value'),
        Do = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            Object(m.a)(this, a);
            var i = (n = t.call(this, e)).props.entry.value,
              s = i.name || '',
              o = i.value || '';
            return (
              (n.state = { name: { value: s }, value: { value: o } }),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'getHeader',
                value: function() {
                  return {
                    name: this.state.name.value,
                    value: this.state.value.value,
                    uuid: this.props.entry.value.uuid
                  };
                }
              },
              {
                key: 'handleChangeName',
                value: function(e) {
                  var t = this,
                    a = oa(Ft.t('forms.header_name', 'Header name'), e, [da]);
                  this.setState({ name: { value: a.value } }, function() {
                    return t.props.onChange(t.getHeader(), pt(t.state.value).concat(pt(a)));
                  });
                }
              },
              {
                key: 'handleChangeValue',
                value: function(e) {
                  var t = this;
                  this.setState({ value: { value: e } }, function() {
                    var e = oa(Ft.t('forms.header_name', 'Header name'), t.state.name.value, [da]);
                    t.props.onChange(t.getHeader(), pt(t.state.value).concat(pt(e)));
                  });
                }
              },
              {
                key: 'handleRemove',
                value: function() {
                  this.props.onRemove(this.getHeader());
                }
              },
              {
                key: 'getRemoveIco',
                value: function() {
                  return k.createElement(
                    'div',
                    {
                      className: Ao.a.remove_ico,
                      onClick: this.handleRemove,
                      'data-spec': 'remove-icon'
                    },
                    k.createElement('span', { className: 'fe-x' })
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.getRemoveIco();
                  return k.createElement(
                    jt,
                    { name: Ft.t('forms.webhook_header', 'Header'), entry: this.props.entry },
                    k.createElement(
                      'div',
                      { className: Ao.a.header, 'data-spec': 'header-container' },
                      k.createElement(
                        'div',
                        { className: Ao.a.header_name, 'data-spec': 'name-container' },
                        k.createElement(xa, {
                          placeholder: Ro,
                          name: Ro,
                          onChange: this.handleChangeName,
                          entry: this.state.name
                        })
                      ),
                      k.createElement(
                        'div',
                        { className: Ao.a.header_value, 'data-spec': 'value-container' },
                        k.createElement(xa, {
                          placeholder: Uo,
                          name: Uo,
                          onChange: this.handleChangeValue,
                          entry: this.state.value,
                          autocomplete: !0
                        })
                      ),
                      e
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      !(function(e) {
        (e.GET = 'GET'),
          (e.POST = 'POST'),
          (e.PUT = 'PUT'),
          (e.DELETE = 'DELETE'),
          (e.HEAD = 'HEAD'),
          (e.PATCH = 'PATCH');
      })(No || (No = {}));
      var Po = { value: No.GET, name: No.GET },
        Fo = [
          Po,
          { value: No.POST, name: No.POST },
          { value: No.PUT, name: No.PUT },
          { value: No.DELETE, name: No.DELETE },
          { value: No.HEAD, name: No.HEAD },
          { value: No.PATCH, name: No.PATCH }
        ],
        Io = function(e) {
          var t =
            e.originalAction ||
            (e.originalNode.node.actions.length > 0 && e.originalNode.node.actions[0]);
          if (t.type === Ee.call_webhook) return t;
        },
        Mo = function(e) {
          return e === No.GET
            ? ''
            : '{\n  "contact": "@contact",\n  "results": "@results",\n  "custom_key": "custom_value"\n}';
        },
        Lo = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = {
                  headers: [],
                  resultName: { value: 'Result' },
                  method: { value: Po },
                  url: { value: '' },
                  body: { value: Mo(No.GET) },
                  valid: !1
                };
                if (mr(e.originalNode) === Ee.split_by_webhook) {
                  var a,
                    n = Io(e),
                    i = Object(C.a)(Object.keys(n.headers || []).sort());
                  try {
                    for (i.s(); !(a = i.n()).done; ) {
                      var s = a.value;
                      t.headers.push({ value: { uuid: $(), value: n.headers[s], name: s } });
                    }
                  } catch (o) {
                    i.e(o);
                  } finally {
                    i.f();
                  }
                  (t.resultName = { value: n.result_name }),
                    (t.url = { value: n.url }),
                    (t.method = { value: { name: n.method, value: n.method } }),
                    (t.body = { value: n.body }),
                    (t.valid = !0);
                } else
                  t.headers.push({
                    value: { uuid: $(), name: 'Accept', value: 'application/json' }
                  });
                return t.headers.push({ value: { uuid: $(), name: '', value: '' } }), t;
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = this,
                    a = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    n = {},
                    i = !1,
                    s = [];
                  if (e.hasOwnProperty('method')) {
                    n.method = { value: e.method };
                    var o = this.state.method.value.value,
                      r = e.method.value;
                    if (o !== r) {
                      var l = this.state.headers.find(function(e) {
                        return 'content-type' === e.value.name.toLowerCase();
                      });
                      if (((n.body = { value: Mo(r) }), o === No.GET && r !== No.GET)) {
                        if (!l) {
                          var u = $(),
                            c =
                              this.state.headers.length > 0
                                ? this.state.headers[this.state.headers.length - 1]
                                : null;
                          c && !c.value.name && (u = c.value.uuid),
                            (e.header = {
                              uuid: u,
                              name: 'Content-Type',
                              value: 'application/json'
                            });
                        }
                      } else
                        o !== No.GET &&
                          r === No.GET &&
                          l &&
                          (s = [{ headers: [{ value: l.value }] }]);
                    }
                  }
                  e.hasOwnProperty('url') &&
                    (n.url = oa(Ft.t('forms.url', 'URL'), e.url, [
                      ua(a),
                      ca(ma, -1 === e.url.indexOf('@'))
                    ])),
                    e.hasOwnProperty('resultName') &&
                      (n.resultName = oa(Ft.t('forms.result_name', 'Result Name'), e.resultName, [
                        ua(a)
                      ])),
                    e.hasOwnProperty('body') && (n.body = { value: e.body }),
                    e.hasOwnProperty('header') &&
                      ((n.headers = [
                        { value: e.header, validationFailures: e.validationFailures }
                      ]),
                      (i = !0)),
                    e.hasOwnProperty('removeHeader') &&
                      ((s = [{ headers: [{ value: e.removeHeader }] }]), (i = !0));
                  var d = Zt(this.state, n, s);
                  return (
                    this.setState(d, function() {
                      if (i) {
                        var e,
                          a = !0,
                          n = Object(C.a)(t.state.headers);
                        try {
                          for (n.s(); !(e = n.n()).done; ) {
                            if ('' === e.value.value.name.trim()) {
                              a = !1;
                              break;
                            }
                          }
                        } catch (s) {
                          n.e(s);
                        } finally {
                          n.f();
                        }
                        a && t.handleCreateHeader();
                      }
                    }),
                    d.valid
                  );
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ra, ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleMethodUpdate',
                value: function(e) {
                  return this.handleUpdate({ method: e });
                }
              },
              {
                key: 'handleUrlUpdate',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                  return this.handleUpdate({ url: e }, a);
                }
              },
              {
                key: 'handleHeaderRemoved',
                value: function(e) {
                  return this.handleUpdate({ removeHeader: e });
                }
              },
              {
                key: 'handleHeaderUpdated',
                value: function(e, t) {
                  return this.handleUpdate({ header: e, validationFailures: t });
                }
              },
              {
                key: 'handleCreateHeader',
                value: function() {
                  return this.handleUpdate({ header: { uuid: $(), name: '', value: '' } });
                }
              },
              {
                key: 'handleBodyUpdate',
                value: function(e) {
                  return this.handleUpdate({ body: e });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.handleUpdate(
                    { url: this.state.url.value, resultName: this.state.resultName.value },
                    !0
                  ) &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a,
                          n = {},
                          i = Object(C.a)(t.headers);
                        try {
                          for (i.s(); !(a = i.n()).done; ) {
                            var s = a.value;
                            0 !== s.value.name.trim().length && (n[s.value.name] = s.value.value);
                          }
                        } catch (u) {
                          i.e(u);
                        } finally {
                          i.f();
                        }
                        var o = $(),
                          r = Io(e);
                        r && (o = r.uuid);
                        var l = {
                          uuid: o,
                          headers: n,
                          type: Ee.call_webhook,
                          url: t.url.value,
                          body: t.body.value,
                          method: t.method.value.value,
                          result_name: t.resultName.value
                        };
                        return xi(l, e.originalNode, !1);
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this,
                    t = this.props.typeConfig,
                    a = this.state.headers.map(function(t, a, n) {
                      return k.createElement(
                        'div',
                        { key: 'header_'.concat(t.value.uuid) },
                        k.createElement(Do, {
                          entry: t,
                          onRemove: e.handleHeaderRemoved,
                          onChange: e.handleHeaderUpdated,
                          index: a
                        })
                      );
                    }),
                    n = [];
                  n.push({
                    name: 'HTTP Headers',
                    hasErrors: !!this.state.headers.find(function(e) {
                      return ht(e);
                    }),
                    body: k.createElement(
                      k.Fragment,
                      null,
                      k.createElement(
                        'p',
                        { className: Ao.a.info },
                        k.createElement(
                          Pe.a,
                          { i18nKey: 'forms.webhook_header_summary' },
                          'Add any additional headers below that you would like to send along with your request.'
                        )
                      ),
                      a
                    ),
                    checked: this.state.headers.length > 1
                  });
                  var i = this.state.method.value.value,
                    s = this.state.method.value.name + ' ' + Ft.t('body', 'Body');
                  return (
                    n.push({
                      name: s,
                      body: k.createElement(
                        'div',
                        { key: 'post_body', className: Ao.a.body_form },
                        k.createElement('h4', null, s),
                        k.createElement(
                          'p',
                          null,
                          k.createElement(
                            Pe.a,
                            {
                              i18nKey: 'forms.webhook_body_summary',
                              values: { method: this.state.method.value.name }
                            },
                            'Modify the body of the [[method]] request that will be sent to your webhook.'
                          )
                        ),
                        k.createElement(xa, {
                          __className: Ao.a.req_body,
                          name: s,
                          showLabel: !1,
                          entry: this.state.body,
                          onChange: this.handleBodyUpdate,
                          helpText: k.createElement(
                            Pe.a,
                            {
                              i18nKey: 'forms.webhook_body_summary',
                              values: { method: this.state.method.value.name }
                            },
                            'Modify the body of the [[method]] request that will be sent to your webhook.'
                          ),
                          autocomplete: !0,
                          textarea: !0
                        })
                      ),
                      checked: this.state.body.value !== Mo(i)
                    }),
                    k.createElement(
                      me,
                      { title: t.name, headerClass: t.type, buttons: this.getButtons(), tabs: n },
                      k.createElement(Yt, {
                        __className: '',
                        initialType: t,
                        onChange: this.props.onTypeChange
                      }),
                      k.createElement(
                        'div',
                        { style: { display: 'flex', alignItems: 'flex-end' } },
                        k.createElement(
                          'div',
                          { className: Ao.a.method },
                          k.createElement(Sa, {
                            key: 'method_select',
                            name: Ft.t('forms.method', 'Method'),
                            entry: this.state.method,
                            onChange: this.handleMethodUpdate,
                            options: Fo
                          })
                        ),
                        k.createElement(
                          'div',
                          { className: Ao.a.url },
                          k.createElement(xa, {
                            name: Ft.t('forms.url', 'URL'),
                            placeholder: Ft.t('forms.enter_a_url', 'Enter a URL'),
                            entry: this.state.url,
                            onChange: this.handleUrlUpdate,
                            autocomplete: !0
                          })
                        )
                      ),
                      k.createElement(
                        'div',
                        { className: Ao.a.instructions },
                        k.createElement(
                          'p',
                          null,
                          k.createElement(
                            Pe.a,
                            { i18nKey: 'forms.webhook_help' },
                            'If your server responds with JSON, each property will be added to the Flow.'
                          )
                        ),
                        k.createElement(
                          'pre',
                          { className: Ao.a.code },
                          '{ "product": "Solar Charging Kit", "stock level": 32 }'
                        ),
                        k.createElement(
                          'p',
                          null,
                          k.createElement(
                            Pe.a,
                            { i18nKey: 'forms.webhook_example' },
                            'This response would add ',
                            k.createElement(
                              'span',
                              { className: Ao.a.example },
                              '@webhook.product'
                            ),
                            ' and',
                            ' ',
                            k.createElement(
                              'span',
                              { className: Ao.a.example },
                              '@webhook["stock level"]'
                            ),
                            ' for use in the flow.'
                          )
                        )
                      ),
                      ns(this.state.resultName, this.handleUpdateResultName),
                      ot(this.props)
                    )
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        zo = function(e, t) {
          var a = e.classifier;
          return dt({ id: a.uuid, name: a.name, type: fe.Classifier }, t.config.endpoints);
        };
      zo.contextTypes = { config: bt };
      var Bo = zo,
        qo = kt,
        Vo = function(e) {
          var t =
            e.originalAction ||
            (e.originalNode.node.actions.length > 0 && e.originalNode.node.actions[0]);
          if (t.type === Ee.call_classifier) return t;
        },
        Ho = function(e, t) {
          var a = $(),
            n = Oi(
              [].concat(Object(ge.a)(t.cases), Object(ge.a)(t.hiddenCases)),
              !1,
              e.originalNode.node,
              'Failure'
            );
          !(function(e, t) {
            var a = e.cases.findIndex(function(e) {
              return (
                e.type === t.type &&
                ((a = e.arguments),
                (n = t.arguments),
                a.every(function(e, t) {
                  return e === n[t];
                }))
              );
              var a, n;
            });
            if (a >= 0) {
              if (a === e.cases.length - 1) return;
              var n = e.cases.splice(a, 1),
                i = Object(w.a)(n, 1)[0];
              e.cases.push(i);
            } else {
              var s = { uuid: $() },
                o = { uuid: $(), name: t.name, exit_uuid: s.uuid },
                r = { uuid: $(), type: t.type, arguments: t.arguments, category_uuid: o.uuid };
              e.categories.push(o), e.cases.push(r), e.exits.splice(e.exits.length - 1, 0, s);
            }
          })(n, { type: Ce.has_category, arguments: ['Success', 'Skipped'], name: 'Other' });
          var i = Vo(e);
          i && (a = i.uuid);
          var o = t.resultName.value,
            r = '_' + o + ' Classification',
            l = {
              uuid: a,
              type: Ee.call_classifier,
              result_name: r,
              input: t.operand.value,
              classifier: { uuid: t.classifier.value.uuid, name: t.classifier.value.name }
            },
            u = {
              cases: n.cases,
              operand: '@results.'.concat(L(r)),
              categories: n.categories,
              type: s.switch,
              default_category_uuid: n.defaultCategory,
              result_name: o
            };
          return fi(e.originalNode.node.uuid, u, n.exits, Ee.split_by_intent, [l]);
        },
        Go = function() {
          var e = $();
          return {
            uuid: e,
            kase: { uuid: e, type: Ce.has_top_intent, arguments: ['', ''], category_uuid: null },
            categoryName: '',
            valid: !0
          };
        },
        Ko = a(148),
        Wo = a.n(Ko),
        Yo = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).dialog = void 0),
              (n.state = (function(e) {
                var t = [],
                  a = '@input.text',
                  n = { value: null },
                  i = [];
                if (mr(e.originalNode) === Ee.split_by_intent) {
                  var s = e.originalNode.node.router;
                  yi(e.originalNode.node) &&
                    ((i = (t = bi(s.cases, e.originalNode)).filter(function(e) {
                      return gs(e.kase.type).visibility === qe;
                    })),
                    (t = t.filter(function(e) {
                      return gs(e.kase.type).visibility !== qe;
                    })));
                  var o = Vo(e);
                  (n = { value: o.classifier }), (a = o.input);
                }
                return {
                  hiddenCases: i,
                  resultName: { value: 'Result' },
                  classifier: n,
                  operand: { value: a },
                  cases: t,
                  valid: !0
                };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n.state.classifier.value &&
                Xe(n.props.assetStore.classifiers, n.state.classifier.value.id).then(function(e) {
                  e && n.handleUpdate({ classifier: { name: e.name, uuid: e.id } });
                }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('resultName') &&
                    (a.resultName = oa(Ft.t('forms.result_name', 'Result Name'), e.resultName, [
                      ua(t)
                    ])),
                    e.hasOwnProperty('classifier') &&
                      (a.classifier = oa(Ft.t('forms.classifier', 'Classifier'), e.classifier, [
                        ua(t)
                      ]));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleCasesUpdated',
                value: function(e) {
                  var t = e.find(function(e) {
                    return !e.valid;
                  });
                  this.setState({ cases: e, valid: !t });
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ra, ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.cases.find(function(e) {
                    return !e.valid;
                  }) ||
                    (this.handleUpdate(
                      {
                        resultName: this.state.resultName.value,
                        classifier: this.state.classifier.value
                      },
                      !0
                    ) &&
                      (this.props.updateRouter(Ho(this.props.nodeSettings, this.state)),
                      this.props.onClose(!1)));
                }
              },
              {
                key: 'handleClassifierUpdated',
                value: function(e) {
                  this.handleUpdate({ classifier: e[0] });
                }
              },
              {
                key: 'handleOperandUpdated',
                value: function(e) {
                  this.setState({ operand: oa(Ft.t('forms.operand', 'Operand'), e, [ra]) });
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this,
                    t = this.props.typeConfig,
                    a = [
                      {
                        name: 'Classifier Input',
                        checked: '@input.text' !== this.state.operand.value,
                        body: k.createElement(
                          k.Fragment,
                          null,
                          k.createElement(
                            'p',
                            null,
                            'Enter an expression to use as the input to your classifier. To classify the last response from the contact use ',
                            k.createElement('code', null, '@input.text'),
                            '.'
                          ),
                          k.createElement(xa, {
                            name: Ft.t('forms.operand', 'Operand'),
                            showLabel: !1,
                            autocomplete: !0,
                            onChange: this.handleOperandUpdated,
                            entry: this.state.operand
                          })
                        )
                      }
                    ];
                  return k.createElement(
                    me,
                    {
                      title: t.name,
                      headerClass: t.type,
                      buttons: this.getButtons(),
                      tabs: a,
                      ref: function(t) {
                        e.dialog = t;
                      }
                    },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: t,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      null,
                      k.createElement('span', null, 'Run '),
                      k.createElement(
                        'span',
                        {
                          className: Wo.a.link,
                          onClick: function() {
                            e.dialog.showTab(0);
                          }
                        },
                        '@input.text' === this.state.operand.value
                          ? 'the last response'
                          : this.state.operand.value
                      ),
                      k.createElement('span', null, ' through the classifier...')
                    ),
                    k.createElement(Bt, {
                      key: 'select_classifier',
                      name: Ft.t('forms.classifier', 'Classifier'),
                      placeholder: 'Select the classifier to use',
                      assets: this.props.assetStore.classifiers,
                      onChange: this.handleClassifierUpdated,
                      entry: this.state.classifier
                    }),
                    K(!!this.state.classifier.value)(
                      k.createElement(xs, {
                        'data-spec': 'cases',
                        cases: this.state.cases,
                        onCasesUpdated: this.handleCasesUpdated,
                        operators: hs,
                        createEmptyCase: Go,
                        classifier: this.state.classifier.value
                      })
                    ),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        Xo = function() {
          return ur
            .filter(function(e) {
              return !e.excludeFromSplit;
            })
            .map(function(e) {
              return { value: e.scheme, name: e.name };
            });
        },
        Qo = function(e) {
          var t = [],
            a = wi(e),
            n = Xo();
          return (
            a &&
              (t = a.cases
                .map(function(e) {
                  if (e.arguments) {
                    var t = Object(w.a)(e.arguments, 1)[0];
                    return n.find(function(e) {
                      return e.value === t;
                    });
                  }
                  return null;
                })
                .filter(function(e) {
                  return null !== e;
                })),
            t
          );
        },
        Jo = function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
            t = arguments.length > 1 ? arguments[1] : void 0;
          return e.map(function(e) {
            var a = e.value,
              n = e.name,
              i = t.find(function(e) {
                return e.arguments[0] === a;
              }),
              s = i ? i.uuid : $();
            return {
              uuid: $(),
              kase: { uuid: s, type: Ce.has_only_phrase, arguments: [a], category_uuid: '' },
              categoryName: n,
              valid: !0
            };
          });
        },
        Zo = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = { schemes: { value: [] }, resultName: { value: '' }, valid: !1 };
                return (
                  mr(e.originalNode) === Ee.split_by_scheme &&
                    ((t.schemes.value = Qo(e.originalNode.node)),
                    (t.resultName = { value: e.originalNode.node.router.result_name || '' }),
                    (t.valid = !0)),
                  t
                );
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleSchemesChanged',
                value: function(e) {
                  this.handleUpdate({ schemes: e });
                }
              },
              {
                key: 'handleUpdateResultName',
                value: function(e) {
                  this.handleUpdate({ resultName: e });
                }
              },
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = {};
                  e.hasOwnProperty('schemes') &&
                    (t.schemes = oa(Ft.t('forms.split_by_scheme', 'Channel types'), e.schemes, [
                      ra
                    ])),
                    e.hasOwnProperty('resultName') && (t.resultName = { value: e.resultName });
                  var a = Zt(this.state, t);
                  return this.setState(a), a.valid;
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.state.valid &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = [];
                        mr(e.originalNode) === Ee.split_by_scheme &&
                          (a = wi(e.originalNode.node).cases);
                        var n = Jo(t.schemes.value, a),
                          i = Oi(n, !1, e.originalNode.node),
                          o = i.cases,
                          r = i.exits,
                          l = i.defaultCategory,
                          u = i.caseConfig,
                          c = i.categories,
                          d = {
                            type: s.switch,
                            cases: o,
                            categories: c,
                            default_category_uuid: l,
                            operand: '@(urn_parts(contact.urn).scheme)',
                            result_name: t.resultName.value
                          };
                        return fi(e.originalNode.node.uuid, d, r, Ee.split_by_scheme, [], {
                          cases: u
                        });
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      null,
                      Ft.t(
                        'forms.split_by_scheme_summary',
                        "The contact's URN is the address they used to reach you such as their phone number or a Facebook ID. Select which URN types to split by below."
                      )
                    ),
                    k.createElement(Sa, {
                      key: 'channel_type_select',
                      name: Ft.t('forms.channel_type', 'Channel Type'),
                      placeholder: Ft.t(
                        'forms.split_by_channel_placeholder',
                        'Select the channels to split by'
                      ),
                      entry: this.state.schemes,
                      onChange: this.handleSchemesChanged,
                      options: Xo(),
                      multi: !0,
                      hideError: !0
                    }),
                    ns(this.state.resultName, this.handleUpdateResultName),
                    ot(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      Zo.contextTypes = { endpoints: bt, assetService: bt };
      var $o = function(e) {
          var t =
            e.originalAction ||
            (e.originalNode.node.actions.length > 0 && e.originalNode.node.actions[0]);
          if (t.type === Ee.open_ticket) return t;
        },
        er = a(104),
        tr = a.n(er),
        ar = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = { value: null },
                  a = { value: '@run.flow.name' },
                  n = { value: '@results' },
                  i = { value: 'Result' };
                if (mr(e.originalNode) === Ee.split_by_ticket) {
                  var s = $o(e);
                  (t = { value: s.ticketer }),
                    (a = { value: s.subject }),
                    (n = { value: s.body }),
                    (i = { value: s.result_name });
                }
                return { ticketer: t, subject: a, body: n, resultName: i, valid: !0 };
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdate',
                value: function(e) {
                  var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                    a = {};
                  e.hasOwnProperty('ticketer') &&
                    (a.ticketer = oa(Ft.t('forms.ticketer', 'Ticketer'), e.ticketer, [ua(t)])),
                    e.hasOwnProperty('subject') &&
                      (a.subject = oa(Ft.t('forms.subject', 'Subject'), e.subject, [ua(t)])),
                    e.hasOwnProperty('body') &&
                      (a.body = oa(Ft.t('forms.body', 'Body'), e.body, [ua(t)])),
                    e.hasOwnProperty('resultName') &&
                      (a.resultName = oa(Ft.t('forms.result_name', 'Result Name'), e.resultName, [
                        ua(t)
                      ]));
                  var n = Zt(this.state, a);
                  return this.setState(n), n.valid;
                }
              },
              {
                key: 'handleTicketerUpdate',
                value: function(e) {
                  this.handleUpdate({ ticketer: e[0] });
                }
              },
              {
                key: 'handleSubjectUpdate',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                  return this.handleUpdate({ subject: e }, a);
                }
              },
              {
                key: 'handleBodyUpdate',
                value: function(e) {
                  return this.handleUpdate({ body: e });
                }
              },
              {
                key: 'handleResultNameUpdate',
                value: function(e) {
                  var t = oa(Ft.t('forms.result_name', 'Result Name'), e, [ra, ga, ha]);
                  this.setState({ resultName: t, valid: this.state.valid && !ht(t) });
                }
              },
              {
                key: 'handleSave',
                value: function() {
                  this.handleUpdate(
                    {
                      ticketer: this.state.ticketer.value,
                      subject: this.state.subject.value,
                      body: this.state.body.value,
                      resultName: this.state.resultName.value
                    },
                    !0
                  ) &&
                    (this.props.updateRouter(
                      (function(e, t) {
                        var a = $(),
                          n = $o(e);
                        n && (a = n.uuid);
                        var i = {
                          uuid: a,
                          type: Ee.open_ticket,
                          ticketer: t.ticketer.value,
                          subject: t.subject.value,
                          body: t.body.value,
                          result_name: t.resultName.value
                        };
                        return xi(i, e.originalNode, !0);
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: e.name, headerClass: e.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: e,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement(
                      'p',
                      null,
                      k.createElement('span', null, 'Open ticket via... ')
                    ),
                    k.createElement(Bt, {
                      key: 'select_ticketer',
                      name: Ft.t('forms.ticketer', 'Ticketer'),
                      placeholder: 'Select the ticketing service to use',
                      assets: this.props.assetStore.ticketers,
                      onChange: this.handleTicketerUpdate,
                      entry: this.state.ticketer
                    }),
                    k.createElement(
                      'div',
                      { className: tr.a.subject },
                      k.createElement(xa, {
                        name: Ft.t('forms.subject', 'Subject'),
                        placeholder: Ft.t('forms.enter_a_subject', 'Enter a subject'),
                        entry: this.state.subject,
                        onChange: this.handleSubjectUpdate,
                        autocomplete: !0
                      })
                    ),
                    k.createElement(
                      'div',
                      { className: tr.a.body },
                      k.createElement(xa, {
                        name: Ft.t('forms.body', 'Body'),
                        placeholder: Ft.t('forms.enter_a_body', 'Enter a body'),
                        entry: this.state.body,
                        onChange: this.handleBodyUpdate,
                        autocomplete: !0,
                        textarea: !0
                      })
                    ),
                    ns(this.state.resultName, this.handleResultNameUpdate),
                    ot(this.props)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        nr = function(e, t) {
          var a = e.ticketer;
          return dt({ id: a.uuid, name: a.name, type: fe.Ticketer }, t.config.endpoints);
        };
      nr.contextTypes = { config: bt };
      var ir = nr,
        sr = a(53),
        or = a.n(sr),
        rr = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = (function(e) {
                var t = { valid: !0, days: '0', hours: '0', minutes: '0' };
                if (e.originalAction && 'wait_for_time' === e.originalAction.type) {
                  var a = e.originalAction;
                  if (a.delay) {
                    var n = parseInt(a.delay);
                    (t.days = Math.floor(n / 86400).toString()),
                      (t.hours = Math.floor((n % 86400) / 3600).toString()),
                      (t.minutes = Math.floor((n % 3600) / 60).toString());
                  }
                }
                return t;
              })(n.props.nodeSettings)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleSave',
                value: function() {
                  isNaN(
                    parseInt(this.state.hours) +
                      parseInt(this.state.minutes) +
                      parseInt(this.state.days)
                  ) ||
                    (this.props.updateAction(
                      (function(e, t) {
                        var a = t.days,
                          n = t.hours,
                          i = t.minutes,
                          s = 86400 * parseInt(a) + 3600 * parseInt(n) + 60 * parseInt(i);
                        return {
                          type: Ee.wait_for_time,
                          uuid: lt(e, Ee.send_msg),
                          delay: s.toString()
                        };
                      })(this.props.nodeSettings, this.state)
                    ),
                    this.props.onClose(!1));
                }
              },
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: { name: Ft.t('buttons.ok', 'Ok'), onClick: this.handleSave },
                    secondary: {
                      name: Ft.t('buttons.cancel', 'Cancel'),
                      onClick: function() {
                        return e.props.onClose(!0);
                      }
                    }
                  };
                }
              },
              {
                key: 'renderEdit',
                value: function() {
                  var e = this,
                    t = this.props.typeConfig;
                  return k.createElement(
                    me,
                    { title: t.name, headerClass: t.type, buttons: this.getButtons() },
                    k.createElement(Yt, {
                      __className: '',
                      initialType: t,
                      onChange: this.props.onTypeChange
                    }),
                    k.createElement('div', null, 'Wait for time'),
                    k.createElement(
                      'div',
                      { className: or.a.delay_container },
                      k.createElement(
                        'div',
                        { className: or.a.input },
                        k.createElement('span', { className: or.a.title }, 'Days'),
                        k.createElement(xa, {
                          name: Ft.t('forms.state', 'State'),
                          placeholder: 'Enter days',
                          onChange: function(t) {
                            return e.setState({ days: t });
                          },
                          style: ba.small,
                          entry: { value: this.state.days }
                        })
                      ),
                      k.createElement(
                        'div',
                        { className: or.a.input },
                        k.createElement('span', { className: or.a.title }, 'Hours'),
                        k.createElement(xa, {
                          name: Ft.t('forms.state', 'State'),
                          placeholder: 'Enter hours',
                          onChange: function(t) {
                            return e.setState({ hours: t });
                          },
                          showInvalid: isNaN(parseInt(this.state.hours)),
                          style: ba.small,
                          entry: { value: this.state.hours }
                        })
                      ),
                      k.createElement(
                        'div',
                        { className: or.a.input },
                        k.createElement('span', { className: or.a.title }, 'Minutes'),
                        k.createElement(xa, {
                          name: Ft.t('forms.state', 'State'),
                          placeholder: 'Enter minutes',
                          onChange: function(t) {
                            return e.setState({ minutes: t });
                          },
                          style: ba.small,
                          entry: { value: this.state.minutes }
                        })
                      )
                    ),
                    isNaN(
                      parseInt(this.state.hours) +
                        parseInt(this.state.minutes) +
                        parseInt(this.state.days)
                    )
                      ? k.createElement('span', { className: or.a.error }, 'Enter valid numbers')
                      : null
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  return this.renderEdit();
                }
              }
            ]),
            a
          );
        })(k.Component),
        lr = function(e) {
          var t = parseInt(e.delay ? e.delay : '0'),
            a = Math.floor(t / 86400),
            n = a > 0 ? a + (a > 1 ? ' days ' : ' day ') : '',
            i = Math.floor((t % 86400) / 3600),
            s = i > 0 ? i + (i > 1 ? ' hours ' : ' hour ') : '',
            o = Math.floor((t % 3600) / 60),
            r = o > 0 ? o + (o > 1 ? ' minutes ' : ' minute ') : '',
            l = 'Waiting for '
              .concat(n, ' ')
              .concat(s, ' ')
              .concat(r);
          return 0 === t && (l = 'Not waiting'), k.createElement('div', null, l);
        },
        ur = [
          {
            scheme: 'tel',
            name: Ft.t('schemes.phone.name', 'SMS'),
            path: Ft.t('schemes.phone.path', 'Phone Number')
          },
          {
            scheme: 'whatsapp',
            name: Ft.t('schemes.whatsapp.name', 'WhatsApp'),
            path: Ft.t('schemes.whatsapp.path', 'WhatsApp Number')
          },
          {
            scheme: 'facebook',
            name: Ft.t('schemes.facebook.path', 'Facebook'),
            path: Ft.t('schemes.facebook.path', 'Facebook ID')
          },
          {
            scheme: 'twitterid',
            name: Ft.t('schemes.twitterid.name', 'Twitter'),
            path: Ft.t('schemes.twitterid.path', 'Twitter ID')
          },
          {
            scheme: 'telegram',
            name: Ft.t('schemes.telegram.name', 'Telegram'),
            path: Ft.t('schemes.telegram.path', 'Telegram ID')
          },
          {
            scheme: 'viber',
            name: Ft.t('schemes.viber.name', 'Viber'),
            path: Ft.t('schemes.viber.path', 'Viber ID')
          },
          {
            scheme: 'line',
            name: Ft.t('schemes.line.name', 'Line'),
            path: Ft.t('schemes.line.path', 'Line ID')
          },
          {
            scheme: 'wechat',
            name: Ft.t('schemes.wechat.name', 'Wechat'),
            path: Ft.t('schemes.wechat.path', 'Wechat ID')
          },
          {
            scheme: 'fcm',
            name: Ft.t('schemes.firebase.name', 'Firebase'),
            path: Ft.t('schemes.firebase.path', 'Firebase ID')
          },
          {
            scheme: 'jiochat',
            name: Ft.t('schemes.jiojach.name', 'Jiochat'),
            path: Ft.t('schemes.jiochat.path', 'Jiochat ID')
          },
          {
            scheme: 'freshchat',
            name: Ft.t('schemes.freschat.name', 'Freshchat'),
            path: Ft.t('schemes.freshchat.path', 'Freshchat ID')
          },
          {
            scheme: 'mailto',
            name: Ft.t('schemes.email.name', 'Email'),
            path: Ft.t('schemes.email.path', 'Email Address'),
            excludeFromSplit: !0
          },
          {
            scheme: 'twitter',
            name: Ft.t('schemes.twitter.name', 'Twitter'),
            path: Ft.t('schemes.twitter.path', 'Twitter Handle'),
            excludeFromSplit: !0
          },
          {
            scheme: 'ext',
            name: Ft.t('schemes.external.name', 'External'),
            path: Ft.t('schemes.external.path', 'External ID')
          }
        ],
        cr = [
          {
            type: Ee.missing,
            name: 'Missing',
            description: ' ** Unsupported ** ',
            component: ln,
            visibility: qe
          },
          {
            type: Ee.say_msg,
            name: Ft.t('actions.play_message.name', 'Play Message'),
            description: Ft.t('actions.play_message.description', 'Play a message'),
            form: fn,
            localization: rn,
            localizeableKeys: ['text', 'audio_url'],
            component: vn,
            visibility: Ve
          },
          {
            type: Ee.wait_for_menu,
            name: Ft.t('actions.wait_for_menu.name', 'Wait for Menu Selection'),
            description: Ft.t('actions.wait_for_menu.description', 'Wait for menu selection'),
            form: Js,
            localization: Ks,
            localizeableKeys: ['exits'],
            visibility: Ve
          },
          {
            type: Ee.wait_for_digits,
            name: Ft.t('actions.wait_for_digits.name', 'Wait for Digits'),
            description: Ft.t('actions.wait_for_digits.description', 'Wait for multiple digits'),
            form: Rs,
            localization: Ks,
            localizeableKeys: ['exits', 'cases'],
            visibility: Ve
          },
          {
            type: Ee.wait_for_audio,
            name: Ft.t('actions.wait_for_audio.name', 'Wait for Audio'),
            description: Ft.t('actions.wait_for_audio.description', 'Wait for an audio recording'),
            form: jo,
            localization: Ks,
            localizeableKeys: ['exits'],
            visibility: [be.SURVEY, be.VOICE]
          },
          {
            type: Ee.send_msg,
            name: Ft.t('actions.send_msg.name', 'Send Message'),
            description: Ft.t('actions.send_msg.description', 'Send the contact a message'),
            form: qn,
            localization: rn,
            localizeableKeys: ['text', 'quick_replies', 'templating.variables', 'attachments'],
            component: Fn,
            massageForDisplay: function(e) {
              e.quick_replies = e.quick_replies || [];
            }
          },
          {
            type: Ee.wait_for_response,
            name: Ft.t('actions.wait_for_response.name', 'Wait for Response'),
            description: Ft.t(
              'actions.wait_for_response.description',
              'Wait for the contact to respond'
            ),
            form: po,
            localization: Ks,
            localizeableKeys: ['categories', 'cases'],
            aliases: [s.switch],
            visibility: Ge
          },
          {
            type: Ee.wait_for_time,
            name: Ft.t('actions.wait_for_time.name', 'Wait for Time'),
            description: Ft.t('actions.wait_for_time.description', 'Wait for time'),
            form: rr,
            component: lr
          },
          {
            type: Ee.send_broadcast,
            name: Ft.t('actions.send_broadcast.name', 'Send Broadcast'),
            description: Ft.t('actions.send_broadcast.description', 'Send somebody else a message'),
            form: wn,
            localization: $a,
            localizeableKeys: ['text'],
            component: Cn
          },
          {
            type: Ee.add_input_labels,
            name: Ft.t('actions.add_input.name', 'Add Labels'),
            description: Ft.t('actions.add_input.description', 'Label the incoming message'),
            form: fa,
            component: Ct
          },
          {
            type: Ee.add_contact_urn,
            name: Ft.t('actions.add_contact_urn.name', 'Add URN'),
            description: Ft.t('actions.add_contact_urn.description', 'Add a URN for the contact'),
            form: Aa,
            component: wa
          },
          {
            type: Ee.add_contact_groups,
            name: Ft.t('actions.add_contact_groups.name', 'Add to Group'),
            description: Ft.t(
              'actions.add_contact_groups.description',
              'Add the contact to a group'
            ),
            form: Pa,
            component: Ma
          },
          {
            type: Ee.remove_contact_groups,
            name: Ft.t('actions.remove_contact_groups.name', 'Remove from Group'),
            description: Ft.t(
              'actions.remove_contact_groups.description',
              'Remove the contact from a group'
            ),
            form: Ya,
            component: Ma
          },
          {
            type: Ee.set_contact_field,
            aliases: [
              Ee.set_contact_name,
              Ee.set_contact_language,
              Ee.set_contact_channel,
              Ee.set_contact_status
            ],
            name: Ft.t('actions.set_contact_field.name', 'Update Contact'),
            description: Ft.t('actions.set_contact_field.description', 'Update the contact'),
            form: Qi,
            component: di
          },
          {
            type: Ee.send_email,
            name: Ft.t('actions.send_email.name', 'Send Email'),
            description: Ft.t('actions.send_email.description', 'Send an email'),
            form: Rn,
            localization: $a,
            localizeableKeys: ['subject', 'body'],
            component: Sn,
            visibility: Ke
          },
          {
            type: Ee.set_run_result,
            name: Ft.t('actions.set_run_result.name', 'Save Flow Result'),
            description: Ft.t('actions.set_run_result.description', 'Save a result for this flow'),
            form: Kn,
            component: Vn
          },
          {
            type: Ee.play_audio,
            name: Ft.t('actions.play_audio.name', 'Play Recording'),
            description: Ft.t('actions.play_audio.description', 'Play a contact recording'),
            form: cn,
            component: un,
            visibility: Ve
          },
          {
            type: Ee.call_webhook,
            name: Ft.t('actions.call_webhook.name', 'Call Webhook'),
            description: Ft.t('actions.call_webhook.description', 'Call a webhook'),
            form: Lo,
            localization: Ks,
            localizeableKeys: ['exits'],
            component: Ua,
            aliases: [Ee.split_by_webhook],
            visibility: Ke
          },
          {
            type: Ee.call_resthook,
            name: Ft.t('actions.call_resthook.name', 'Call Zapier'),
            description: Ft.t('actions.call_resthook.description', 'Call Zapier'),
            form: go,
            localization: Ks,
            localizeableKeys: ['exits'],
            component: Ra,
            aliases: [Ee.split_by_resthook],
            filter: we.HAS_RESTHOOK,
            visibility: Ke
          },
          {
            type: Ee.enter_flow,
            name: Ft.t('actions.enter_flow.name', 'Enter a Flow'),
            description: Ft.t('actions.enter_flow.description', 'Enter another flow'),
            form: So,
            localization: Ks,
            localizeableKeys: ['exits'],
            component: Yn,
            aliases: [Ee.split_by_subflow]
          },
          {
            type: Ee.start_session,
            name: Ft.t('actions.start_session.name', 'Start Somebody Else'),
            description: Ft.t('actions.start_session.description', 'Start somebody else in a flow'),
            localization: Ks,
            localizeableKeys: ['exits'],
            form: ii,
            component: $n,
            visibility: Ke
          },
          {
            type: Ee.open_ticket,
            name: Ft.t('actions.open_ticket.name', 'Open Ticket'),
            description: Ft.t(
              'actions.open_ticket.description',
              'Open a ticket with a human agent'
            ),
            form: ar,
            localization: Ks,
            localizeableKeys: ['exits'],
            component: ir,
            aliases: [Ee.split_by_ticket],
            visibility: Ke,
            filter: we.HAS_TICKETER
          },
          {
            type: Ee.transfer_airtime,
            name: Ft.t('actions.transfer_airtime.name', 'Send Airtime'),
            description: Ft.t('actions.transfer_airtime.description', 'Send the contact airtime'),
            form: cs,
            localization: Ks,
            localizeableKeys: ['exits'],
            component: ri,
            aliases: [Ee.split_by_airtime],
            visibility: Ke,
            filter: we.HAS_AIRTIME
          },
          {
            type: Ee.wait_for_image,
            name: Ft.t('actions.wait_for_image.name', 'Wait for Image'),
            description: Ft.t('actions.wait_for_image.description', 'Wait for an image'),
            form: jo,
            localization: Ks,
            localizeableKeys: ['exits'],
            visibility: He
          },
          {
            type: Ee.wait_for_video,
            name: Ft.t('actions.wait_for_video.name', 'Wait for Video'),
            description: Ft.t('actions.wait_for_video.description', 'Wait for a video'),
            form: jo,
            localization: Ks,
            localizeableKeys: ['exits'],
            visibility: He
          },
          {
            type: Ee.wait_for_location,
            name: Ft.t('actions.wait_for_location.name', 'Wait for Location'),
            description: Ft.t(
              'actions.wait_for_location.description',
              'Wait for location GPS coordinates'
            ),
            form: jo,
            localization: Ks,
            localizeableKeys: ['exits'],
            visibility: He
          },
          {
            type: Ee.split_by_intent,
            name: Ft.t('actions.split_by_intent.name', 'Split by Intent'),
            description: Ft.t('actions.split_by_intent.description', 'Split by intent'),
            form: Yo,
            localization: Ks,
            localizeableKeys: ['exits'],
            component: Bo,
            aliases: [Ee.call_classifier],
            visibility: Ke,
            filter: we.HAS_CLASSIFIER
          },
          {
            type: Ee.split_by_expression,
            name: Ft.t('actions.split_by_expression.name', 'Split by Expression'),
            description: Ft.t(
              'actions.split_by_expression.description',
              'Split by a custom expression'
            ),
            localization: Ks,
            localizeableKeys: ['exits', 'cases'],
            form: Ds
          },
          {
            type: Ee.split_by_contact_field,
            name: Ft.t('actions.split_by_contact_field.name', 'Split by Contact Field'),
            description: Ft.t(
              'actions.split_by_contact_field.description',
              'Split by a contact field'
            ),
            localization: Ks,
            localizeableKeys: ['exits', 'cases'],
            form: Ms
          },
          {
            type: Ee.split_by_run_result,
            aliases: [Ee.split_by_run_result_delimited],
            name: Ft.t('actions.split_by_run_result.name', 'Split by Flow Result'),
            description: Ft.t(
              'actions.split_by_run_result.description',
              'Split by a result in the flow'
            ),
            localization: Ks,
            localizeableKeys: ['exits', 'cases'],
            form: Eo
          },
          {
            type: Ee.split_by_random,
            name: Ft.t('actions.split_by_random.name', 'Split Randomly'),
            description: Ft.t('actions.split_by_random.description', 'Split by random chance'),
            localization: Ks,
            localizeableKeys: ['exits'],
            form: io
          },
          {
            type: Ee.split_by_groups,
            name: Ft.t('actions.split_by_groups.name', 'Split by Group Membership'),
            description: Ft.t('actions.split_by_groups.description', 'Split by group membership'),
            localization: Ks,
            localizeableKeys: ['exits'],
            form: qs
          },
          {
            type: Ee.split_by_scheme,
            name: Ft.t('actions.split_by_scheme.name', 'Split by URN Type'),
            description: Ft.t('actions.split_by_scheme.description', 'Split by URN type'),
            localization: Ks,
            localizeableKeys: ['exits'],
            form: Zo
          }
        ],
        dr = (function(e) {
          var t = {};
          return e.filter(function(e) {
            if ('missing' === e.type) return !1;
            var a = e.name;
            return !t[a] && (t[a] = !0);
          });
        })(cr),
        pr = cr.reduce(function(e, t) {
          return (
            (e[t.type] = t),
            t.aliases &&
              t.aliases.forEach(function(a) {
                return (e[a] = t);
              }),
            e
          );
        }, {}),
        hr = function(e) {
          var t = pr[e];
          return t || (t = pr.missing), t;
        },
        mr = function(e) {
          var t = e.node.router && e.node.router.wait;
          if (t && t.hint)
            switch (t.hint.type) {
              case r.digits:
                return 1 === t.hint.count ? Ee.wait_for_menu : Ee.wait_for_digits;
              case r.audio:
                return Ee.wait_for_audio;
              case r.image:
                return Ee.wait_for_image;
              case r.location:
                return Ee.wait_for_location;
              case r.video:
                return Ee.wait_for_video;
            }
          return e.ui.type !== Ee.split_by_contact_field || e.ui.config.operand.name
            ? e.ui.type
            : Ee.split_by_expression;
        },
        _r = function(e, t) {
          return !!(e.filters || []).find(function(e) {
            return e === t;
          });
        },
        gr = function(e, t) {
          var a = {
            type: Ee.set_contact_name,
            valid: !1,
            name: { value: '' },
            channel: { value: null },
            language: { value: null },
            status: { value: Gi },
            field: { value: gt },
            fieldValue: { value: '' }
          };
          if (e.originalAction) {
            var n = e.originalAction.type;
            if (hr(n) === hr(Ee.set_contact_field))
              switch (((a.type = n), n)) {
                case Ee.set_contact_field:
                  var i = e.originalAction;
                  return (
                    (a.field = { value: { key: i.field.key, label: i.field.name } }),
                    (a.fieldValue = { value: i.value }),
                    (a.valid = !0),
                    a
                  );
                case Ee.set_contact_channel:
                  var s = e.originalAction;
                  return (
                    (a.field = { value: vt }),
                    (a.channel = { value: s.channel ? s.channel : Ne }),
                    (a.valid = !0),
                    a
                  );
                case Ee.set_contact_language:
                  var o = e.originalAction;
                  return (
                    (a.field = { value: ft }),
                    (a.valid = !0),
                    (a.language = {
                      value: o.language
                        ? { iso: o.language, name: yr(o.language, t.languages.items) }
                        : Ne
                    }),
                    a
                  );
                case Ee.set_contact_status:
                  var r = e.originalAction;
                  return (
                    (a.field = { value: yt }),
                    (a.valid = !0),
                    (a.status = {
                      value: Xi.find(function(e) {
                        return e.value === r.status;
                      })
                    }),
                    a
                  );
                case Ee.set_contact_name:
                  var l = e.originalAction;
                  return (a.valid = !0), (a.name = { value: l.name }), a;
              }
          }
          return a;
        },
        vr = function(e, t) {
          var a = t.field.value;
          return t.type === Ee.set_contact_field
            ? {
                uuid: lt(e, Ee.set_contact_field),
                type: t.type,
                field: { name: a.label, key: a.key },
                value: t.fieldValue.value
              }
            : t.type === Ee.set_contact_channel
            ? t.channel.value.type === Ne.type
              ? { uuid: lt(e, Ee.set_contact_channel), type: t.type }
              : { uuid: lt(e, Ee.set_contact_channel), type: t.type, channel: t.channel.value }
            : t.type === Ee.set_contact_language
            ? t.language.value.type === Ne.type
              ? { uuid: lt(e, Ee.set_contact_language), type: t.type }
              : {
                  uuid: lt(e, Ee.set_contact_language),
                  type: t.type,
                  language: t.language.value.iso
                }
            : t.type === Ee.set_contact_status
            ? { uuid: lt(e, Ee.set_contact_status), type: t.type, status: t.status.value.value }
            : t.type === Ee.set_contact_name
            ? { uuid: lt(e, Ee.set_contact_name), type: t.type, name: t.name.value }
            : void 0;
        },
        fr = function(e, t) {
          var a = e.type || '',
            n = t.type || '',
            i = e.name || e.label || '',
            s = t.name || t.label || '';
          if (e.id === gt.id && t.id !== gt.id) return -1;
          if (t.id === gt.id && e.id !== gt.id) return 1;
          if (a === n) return i.localeCompare(s);
          if (a === fe.Scheme) return 1;
          if (n === fe.Scheme) return -1;
          if (a !== n) {
            if (a === fe.ContactProperty) return -1;
            if (n === fe.ContactProperty) return 1;
          }
          return i.localeCompare(s);
        },
        yr = function(e, t) {
          var a = e;
          return t && a in t && (a = t[a].name), a;
        },
        br = function(e) {
          return e.label || e.name;
        },
        kr = a(105),
        Er = a.n(kr),
        Cr = {
          dragStartTime: 0,
          dragDownPosition: null,
          dragActive: !1,
          dragNodeUUID: null,
          dragGroup: !1,
          dragSelection: null
        },
        wr = {
          completionSchema: { types: [], root: [] },
          functions: [],
          currentRevision: null,
          simulating: !1,
          translating: !1,
          language: null,
          fetchingFlow: !1,
          dragStartTime: 0,
          dragDownPosition: null,
          dragActive: !1,
          dragNodeUUID: null,
          dragGroup: !1,
          dragSelection: null,
          ghostNode: null,
          debug: null,
          warnings: {},
          popped: null,
          activity: { segments: {}, nodes: {} },
          liveActivity: { segments: {}, nodes: {} },
          activityInterval: 5e3,
          visible: !0,
          scrollToNode: null,
          scrollToAction: null
        },
        Sr = function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : wr,
            t = arguments.length > 1 ? arguments[1] : void 0;
          switch (t.type) {
            case ye.UPDATE_EDITOR_STATE:
              return t.payload.editorState;
            default:
              return e;
          }
        },
        Nr = function() {},
        Or = null,
        xr = !1,
        jr = 0,
        Tr = 0,
        Ar = Ft.t(
          'errors.network',
          'Hmm, we ran into a problem trying to save your changes. It could just be that your internet connection is not working well at the moment. Please wait a minute or so and try again.'
        ),
        Rr = function(e) {
          window.setInterval(function() {
            Tr < jr &&
              new Date().getTime() - jr > 6e4 &&
              e(
                Dr({
                  modalMessage: { title: "Uh oh, we couldn't save your changes", body: Ar },
                  saving: !1
                })
              );
          }, 5e3);
        },
        Ur = function(e, t, a) {
          return function() {
            var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e3;
            (jr = new Date().getTime()), Or && window.clearTimeout(Or);
            var i = a(),
              s = i.flowContext,
              o = s.definition,
              r = s.nodes,
              l = s.assetStore,
              u = s.issues,
              c = i.editorState.currentRevision;
            t(Dr({ saving: !0 }));
            var d = dl(o, r, !0);
            (d.revision = c),
              (Or = xr
                ? window.setTimeout(function() {
                    Nr();
                  }, 1e3)
                : window.setTimeout(function() {
                    (xr = !0),
                      We(e, d).then(
                        function(e) {
                          var a = e.revision;
                          (o.revision = a.revision),
                            t(je(o)),
                            e.metadata && (t(Re(e.metadata)), t(Ae(fl(u, e.metadata.issues))));
                          var n = Pi(l, a);
                          t(Ue(n)),
                            t(
                              Dr({ currentRevision: a.revision, saving: !1, activityInterval: 5e3 })
                            ),
                            (Tr = new Date().getTime()),
                            (xr = !1);
                        },
                        function(e) {
                          var a = e.response ? e.response.data.description : Ar;
                          t(
                            Dr({
                              modalMessage: {
                                title: "Uh oh, we couldn't save your changes",
                                body: a
                              },
                              saving: !1
                            })
                          ),
                            (xr = !1);
                        }
                      );
                  }, n));
          };
        },
        Dr = function(e) {
          return function(t, a) {
            var n = a().editorState,
              i = Jt()(n, { $merge: e });
            return (
              t(
                (function(e) {
                  return { type: ye.UPDATE_EDITOR_STATE, payload: { editorState: e } };
                })(i)
              ),
              i
            );
          };
        },
        Pr = function() {
          return function(e, t) {
            Nr(0);
          };
        },
        Fr = function(e, t) {
          return function(a, n) {
            var i = e.definition,
              s = n(),
              o = s.flowContext.issues;
            s.editorState.fetchingFlow || a(Dr({ fetchingFlow: !0 })),
              (i.localization = i.localization || {}),
              (i._ui = i._ui || { nodes: {}, languages: [], stickies: {} });
            var r,
              l = 0,
              u = Object(C.a)(i.nodes);
            try {
              for (u.s(); !(r = u.n()).done; ) {
                var c = r.value;
                i._ui.nodes[c.uuid] ||
                  ((i._ui.nodes[c.uuid] = { position: { left: 0, top: l }, type: ml(c) }),
                  (l += 150));
              }
            } catch (_) {
              u.e(_);
            } finally {
              u.f();
            }
            var d,
              p,
              h = gl(i);
            vl(t.fields.items, h.fields),
              vl(t.groups.items, h.groups),
              vl(t.labels.items, h.labels),
              vl(t.results.items, h.results),
              i.language && (d = t.languages.items[i.language]),
              d || ((d = Oe), a(Dr({ language: Oe })), vl(t.languages.items, { base: Oe })),
              e.metadata && e.metadata.issues ? a(Ae(fl(o, e.metadata.issues))) : a(Ae({})),
              a(((p = d), { type: ye.UPDATE_BASE_LANGUAGE, payload: { baseLanguage: p } })),
              a(Re(e.metadata)),
              a(
                je(
                  (function(e) {
                    return Ai(e, { nodes: [], _ui: { $merge: { nodes: {} } } });
                  })(i)
                )
              ),
              a(Te(h.renderNodeMap)),
              a(Ue(t)),
              a(Dr({ language: d, fetchingFlow: !1 }));
            var m = document.querySelector('temba-store');
            m && m.setKeyedAssets('results', Object.keys(t.results.items));
          };
        },
        Ir = function(e, t) {
          var a = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
          return (function() {
            var n = Object(Me.a)(
              Ie.a.mark(function n(i, s) {
                var o, r, l, u;
                return Ie.a.wrap(function(n) {
                  for (;;)
                    switch ((n.prev = n.next)) {
                      case 0:
                        if (
                          (i(Dr({ fetchingFlow: !0 })),
                          (o = s()),
                          (r = o.flowContext.assetStore),
                          Object.keys(r).length)
                        ) {
                          n.next = 6;
                          break;
                        }
                        return (n.next = 5), et(e);
                      case 5:
                        r = n.sent;
                      case 6:
                        return (
                          yl(e.activity, i, s, t),
                          (window.triggerActivityUpdate = function() {
                            yl(e.activity, i, s, t);
                          }),
                          (n.next = 10),
                          at(e.completion)
                        );
                      case 10:
                        return (l = n.sent), (n.next = 13), tt(e.functions);
                      case 13:
                        (u = n.sent),
                          nt(r.revisions)
                            .then(function(e) {
                              var t = e.definition
                                ? e
                                : { definition: e, metadata: { issues: [] } };
                              i(Fr(t, r)),
                                i(
                                  Dr({
                                    currentRevision: t.definition.revision,
                                    completionSchema: l,
                                    functions: u
                                  })
                                ),
                                (Nr = Ur(r.revisions.endpoint, i, s)),
                                a && Nr(0),
                                Rr(i);
                            })
                            .catch(function(e) {
                              console.error(e);
                            });
                      case 15:
                      case 'end':
                        return n.stop();
                    }
                }, n);
              })
            );
            return function(e, t) {
              return n.apply(this, arguments);
            };
          })();
        },
        Mr = function(e, t) {
          return function(a, n) {
            var i = n().flowContext.assetStore,
              s = Jt()(i, Object(S.a)({}, e, { items: { $merge: Object(S.a)({}, t.id, t) } })),
              o = document.querySelector('temba-store');
            o && o.setKeyedAssets(e, Object.keys(s[e])), a(Ue(s));
          };
        },
        Lr = function(e) {
          return function(t, a) {
            var n = a(),
              i = n.flowContext.baseLanguage,
              s = n.editorState,
              o = s.translating,
              r = s.language;
            Er()(e, i) ? t(Dr({ translating: !1 })) : o || t(Dr({ translating: !0 })),
              Er()(e, r) || t(Dr({ language: e }));
          };
        },
        zr = function(e, t) {
          return function(a, n) {
            var i = (function(e, t, a) {
              var n = e;
              return (
                n.localization[t] || (n = Ai(n, { localization: Object(S.a)({}, t, Y({})) })),
                a.forEach(function(e) {
                  var a = e.translations,
                    i = e.uuid;
                  if (a) {
                    for (var s = {}, o = 0, r = Object.keys(a); o < r.length; o++) {
                      var l = r[o],
                        u = a[l];
                      Array.isArray(u) ? (s[l] = u) : (s[l] = [u]);
                    }
                    n = Ai(n, { localization: Object(S.a)({}, t, Object(S.a)({}, i, Y(s))) });
                  } else n = Ai(n, { localization: Object(S.a)({}, t, Q([i])) });
                }),
                n
              );
            })(n().flowContext.definition, e, t);
            return a(je(i)), Nr(), i;
          };
        },
        Br = function(e, t, a) {
          return function(n, i) {
            var s = i().flowContext.nodes,
              o = Fi(s, e, t, a);
            return n(Te(o)), Nr(), o;
          };
        },
        qr = function(e, t) {
          return function(a, n) {
            return a(Br(e, t, null));
          };
        },
        Vr = function(e, t) {
          return function(a, n) {
            var i = e.split(':'),
              s = Object(w.a)(i, 2),
              o = s[0],
              r = s[1];
            return a(Br(o, r, t));
          };
        },
        Hr = function(e) {
          return function(t, a) {
            var n = a().flowContext,
              i = n.nodes,
              s = n.assetStore;
            if (e.router && e.router.result_name) {
              var o = Ui(e.router.result_name, s, { nodeUUID: e.uuid });
              t(Ue(o));
            }
            var r = Li(i, e.uuid);
            return t(Te(r)), Nr(), r;
          };
        },
        Gr = function(e, t) {
          return function(a, n) {
            var i = n().flowContext,
              s = i.nodes,
              o = i.assetStore,
              r = s[e];
            if (t.type === Ee.set_run_result) {
              var l = Ui(t.name, o, { nodeUUID: e, actionUUID: t.uuid });
              a(Ue(l));
            }
            if (1 === r.node.actions.length) {
              var u = a(Hr(r.node));
              return Nr(), u;
            }
            var c = (function(e, t, a) {
              var n = sl(e, t),
                i = rl(n.node, a);
              return Ai(e, Object(S.a)({}, t, { node: { actions: Z([[i, 1]]) } }));
            })(s, e, t.uuid);
            return a(Te(c)), Nr(), c;
          };
        },
        Kr = function(e, t) {
          return function(a, n) {
            var i = (function(e, t, a) {
              var n = sl(e, t),
                i = n.node.actions,
                s = rl(n.node, a);
              if (0 === s) throw new Error('Cannot move an action at the top upwards');
              var o = i[s],
                r = i[s - 1];
              return Ai(e, Object(S.a)({}, t, { node: { actions: Z([[s - 1, 2, o, r]]) } }));
            })(n().flowContext.nodes, e, t.uuid);
            return a(Te(i)), Nr(), i;
          };
        },
        Wr = function(e) {
          return function(t) {
            t(
              (function(e) {
                return { type: ye.UPDATE_TYPE_CONFIG, payload: { typeConfig: e } };
              })(e)
            );
          };
        },
        Yr = function() {
          return function(e, t) {
            e(Dr({ ghostNode: null })), e(ea(null));
          };
        },
        Xr = function(e, t) {
          return function(a, n) {
            var i = n(),
              s = i.nodeEditor,
              o = s.userAddingAction,
              r = s.settings,
              l = i.flowContext,
              u = l.nodes,
              c = l.contactFields,
              d = l.assetStore;
            if (null == r || null == r.originalNode)
              throw new Error('Need originalNode in settings to update an action');
            var p = r.originalNode,
              h = r.originalAction,
              m = d;
            if (h && h.type === Ee.set_run_result) {
              var _ = h.name;
              m = Ui(_, m, { nodeUUID: p.node.uuid, actionUUID: e.uuid });
            }
            var g = u,
              v = null;
            if (!(null === p || !p.ghost)) {
              var f = {
                node: { uuid: $(), actions: [e], exits: [{ uuid: $(), destination_uuid: null }] },
                ui: { position: p.ui.position, type: Ee.execute_actions },
                inboundConnections: p.inboundConnections
              };
              (g = Ii(u, f)), (v = f.node.uuid);
            } else
              (v = p.node.uuid),
                (g = o
                  ? (function(e, t, a) {
                      return sl(e, t), Ai(e, Object(S.a)({}, t, { node: { actions: J([a]) } }));
                    })(u, p.node.uuid, e)
                  : p.node.hasOwnProperty('router')
                  ? Mi(u, p.node.uuid, e)
                  : (function(e, t, a, n) {
                      var i = sl(e, t),
                        s = n ? rl(i.node, n.uuid) : 0;
                      return Ai(
                        e,
                        Object(S.a)({}, t, { node: { actions: Object(S.a)({}, s, Y(a)) } })
                      );
                    })(u, p.node.uuid, e, h));
            (a(Te(g)), a(ta(!1)), e.type === Ee.set_run_result) &&
              ((m = (function(e, t, a) {
                if (e) {
                  var n = Di(e, t.results.items, a);
                  return Ai(t, { results: { items: { $set: n } } });
                }
              })(e.name, m, { nodeUUID: v, actionUUID: e.uuid })),
              a(Ue(m)));
            if (e.type === Ee.set_contact_field) {
              var b = e.field;
              a(
                (function(e) {
                  return { type: ye.UPDATE_CONTACT_FIELDS, payload: { contactFields: e } };
                })(Object(y.a)(Object(y.a)({}, c), {}, Object(S.a)({}, b.key, b.name)))
              );
            }
            return Nr(0), t && t(a, n), g;
          };
        },
        Qr = function(e) {
          return function(t, a) {
            var n = a().flowContext.nodes,
              i = { uuid: $(), type: Ee.send_msg, text: '' };
            t(ea({ originalNode: sl(n, e.uuid), originalAction: i, showAdvanced: !1 })),
              Nr(),
              t(ta(!0)),
              t(Wr(hr(Ee.send_msg))),
              t(Dr(Cr));
          };
        },
        Jr = function(e) {
          return function(t, a) {
            var n = a().flowContext,
              i = n.nodes,
              s = n.definition,
              o = i,
              r = s,
              l = !1,
              u = !1;
            return (
              e.forEach(function(e) {
                e in o
                  ? ((o = Li(o, e, !0)), (l = !0))
                  : e in r._ui.stickies && ((r = qi(r, e, null)), (u = !0));
              }),
              l && t(Te(o)),
              u && t(je(r)),
              (u || l) && Nr(),
              i
            );
          };
        },
        Zr = function(e) {
          return function(t, a) {
            var n = a().flowContext,
              i = n.nodes,
              s = n.definition,
              o = i,
              r = !1,
              l = !1;
            for (var u in e)
              o[u]
                ? ((o = zi(o, u, e[u])), (r = !0))
                : s._ui.stickies[u] && ((s = Bi(s, u, e[u])), (l = !0));
            var c = !1;
            return r && ((c = !0), t(Te(o))), l && ((c = !0), t(je(s))), c && Nr(), o;
          };
        },
        $r = function(e, t) {
          return function(a, n) {
            for (
              var i = n().flowContext,
                s = i.nodes,
                o = i.assetStore,
                r = e.sourceId.split(':'),
                l = Object(w.a)(r, 2),
                u = l[0],
                c = l[1],
                d = s[u],
                p = Object.keys(o.results ? o.results.items : {}),
                h = p.length + 1,
                m = 'result_'.concat(h);
              te(p, m);

            )
              h++, (m = 'result_'.concat(h));
            var _ = hl(d, c, h, t);
            (_.inboundConnections = Object(S.a)({}, c, u)), a(Dr({ ghostNode: _ }));
          };
        },
        el = function(e, t) {
          return function(a, n) {
            var i = n().flowContext.definition,
              s = qi(i, e, t);
            a(je(s)), Nr();
          };
        },
        tl = function(e) {
          return function(t, a) {
            var n,
              i,
              s = a(),
              o = s.flowContext,
              r = o.nodes,
              l = o.assetStore,
              u = s.nodeEditor.settings,
              c = u.originalNode,
              d = u.originalAction,
              p = r;
            if (c) {
              var h = c.ui.position;
              (e.ui.position = h), (e.inboundConnections = c.inboundConnections);
            }
            if (c.ghost) {
              e.inboundConnections = c.inboundConnections;
              var m = c.ui.position,
                _ = m.left,
                g = m.top;
              (e.ui.position = { left: _, top: g }), (e.node = Ri(e.node));
            }
            if (Ti(e.node)) {
              var v = l,
                f = Ti(c.node);
              f && (v = Ui(f, v, { nodeUUID: c.node.uuid })),
                (v = (function(e, t) {
                  var a = e;
                  a || (a = { results: { items: {}, type: fe.Result } }),
                    a.results || (a.results = { items: {}, type: fe.Result });
                  var n = Ti(t);
                  if (n) {
                    var i = Di(n, e.results.items, { nodeUUID: t.uuid });
                    return Ai(e, { results: { items: { $set: i } } });
                  }
                  return e;
                })(v, e.node)),
                t(Ue(v));
            }
            if (c && d && !c.ghost && !wi(c.node)) {
              var b = c.node.actions.find(function(e) {
                return e.uuid === d.uuid;
              });
              if (b)
                return (
                  (e.ui.position.top = c.ui.position.top),
                  t(
                    ((n = e),
                    (i = { nodeUUID: c.node.uuid, actionUUID: b.uuid }),
                    function(e, t) {
                      var a = t().flowContext.nodes,
                        s = a[i.nodeUUID],
                        o = a;
                      (o = Li(o, s.node.uuid, !1)), (n.node = Ri(n.node));
                      var r,
                        l,
                        u = rl(s.node, i.actionUUID),
                        c = u > 0 ? Object(ge.a)(s.node.actions.slice(0, u)) : [],
                        d = s.node.actions.slice(u + 1, s.node.actions.length),
                        p = s.ui.position,
                        h = p.left,
                        m = p.top;
                      return (
                        c.length > 0
                          ? ((r = {
                              node: {
                                uuid: $(),
                                actions: c,
                                exits: [{ uuid: $(), destination_uuid: null }]
                              },
                              ui: { position: { left: h, top: m } },
                              inboundConnections: Object(y.a)({}, s.inboundConnections)
                            }),
                            (o = Ii(o, r)),
                            (m += P),
                            (n.inboundConnections = Object(S.a)(
                              {},
                              r.node.exits[0].uuid,
                              r.node.uuid
                            )),
                            (n.ui.position.top += P))
                          : (n.inboundConnections = Object(y.a)({}, s.inboundConnections)),
                        (o = Ii(o, n)),
                        d.length > 0
                          ? ((l = {
                              node: {
                                uuid: $(),
                                actions: d,
                                exits: [
                                  { uuid: $(), destination_uuid: s.node.exits[0].destination_uuid }
                                ]
                              },
                              ui: { position: { left: h, top: m } },
                              inboundConnections: Object(S.a)({}, n.node.exits[0].uuid, n.node.uuid)
                            }),
                            (o = Ii(o, l)))
                          : (o = Fi(
                              o,
                              n.node.uuid,
                              n.node.exits[0].uuid,
                              s.node.exits[0].destination_uuid
                            )),
                        e(Te(o)),
                        Nr(),
                        o
                      );
                    })
                  )
                );
              var k = wi(e.node);
              if (k) {
                var E = k.categories.find(function(e) {
                  return e.uuid === k.default_category_uuid;
                });
                e.node.exits.find(function(e) {
                  return e.uuid === E.exit_uuid;
                }).destination_uuid = c.node.exits[0].destination_uuid;
              }
              (e.inboundConnections = Object(S.a)({}, c.node.exits[0].uuid, c.node.uuid)),
                (e.node = Ri(e.node)),
                (e.ui.position.top += P),
                (p = Ii(p, e));
            } else p = Ii(p, e);
            return t(Te(p)), Nr(0), p;
          };
        },
        al = function(e) {
          return function(t, a) {
            var n = a(),
              i = n.flowContext.definition.localization,
              s = n.editorState,
              o = s.language,
              r = s.translating,
              l = e.originalNode,
              u = e.originalAction,
              c = l.node;
            if (((e.localizations = []), r)) {
              var d,
                p = u;
              if (
                !p &&
                c.actions.length > 0 &&
                (p = c.actions[c.actions.length - 1]).type !== Ee.send_msg &&
                p.type !== Ee.send_broadcast
              )
                return;
              var h = i[o.id];
              (d = e.localizations).push.apply(d, Object(ge.a)(cl(c, p, o, h)));
            }
            !u && c.actions.length > 0 && (u = c.actions[c.actions.length - 1]);
            var m = Ja(e);
            t(Wr(m)), t(ea(e)), t(Dr(Cr));
          };
        },
        nl = function(e) {
          return function(t, a) {
            var n = a().flowContext.definition;
            (n._ui.translation_filters = e), t(je(n)), Nr();
          };
        },
        il = null,
        sl = function(e, t) {
          var a = e[t];
          if (!a) throw new Error('Cannot find node ' + t);
          return a;
        },
        ol = function(e, t) {
          var a,
            n = Object(C.a)(e.exits.entries());
          try {
            for (n.s(); !(a = n.n()).done; ) {
              var i = Object(w.a)(a.value, 2),
                s = i[0];
              if (i[1].uuid === t) return s;
            }
          } catch (o) {
            n.e(o);
          } finally {
            n.f();
          }
          throw new Error('Cannot find exit ' + t);
        },
        rl = function(e, t) {
          var a,
            n = Object(C.a)(e.actions.entries());
          try {
            for (n.s(); !(a = n.n()).done; ) {
              var i = Object(w.a)(a.value, 2),
                s = i[0];
              if (i[1].uuid === t) return s;
            }
          } catch (o) {
            n.e(o);
          } finally {
            n.f();
          }
          throw new Error('Cannot find action ' + t);
        },
        ll = function(e) {
          var t = mr(e);
          return (
            (function(e) {
              return !(!e.node.router || !e.node.router.wait);
            })(e) ||
            t === Ee.split_by_expression ||
            t === Ee.split_by_subflow
          );
        },
        ul = function e(t, a, n) {
          var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [],
            s = t[a],
            o = t[n];
          if (a === n) throw new Error("Flow loop detected, can't point to self");
          if (!ll(o) && !ll(s))
            if (0 !== i.length) {
              if (n === i[0]) throw new Error('Flow loop detected, route through a wait first');
              i.push(n);
              var r,
                l = Object(C.a)(o.node.exits);
              try {
                for (l.s(); !(r = l.n()).done; ) {
                  var u = r.value;
                  u.destination_uuid && e(t, n, u.destination_uuid, i);
                }
              } catch (h) {
                l.e(h);
              } finally {
                l.f();
              }
            } else {
              i.push(a);
              var c,
                d = Object(C.a)(o.node.exits);
              try {
                for (d.s(); !(c = d.n()).done; ) {
                  var p = c.value;
                  p.destination_uuid && e(t, o.node.uuid, p.destination_uuid, i);
                }
              } catch (h) {
                d.e(h);
              } finally {
                d.f();
              }
            }
        },
        cl = function(e, t, a, n) {
          var i = [];
          e.router &&
            e.router.type === s.switch &&
            e.router.cases.forEach(function(e) {
              return i.push(j.translate(e, a, n));
            });
          if (t && (i.push(j.translate(t, a, n)), t.type === Ee.send_msg)) {
            var o = t;
            o.templating && i.push(j.translate(o.templating, a, n));
          }
          return (
            e.router &&
              e.router.categories.forEach(function(e) {
                e.name && i.push(j.translate(e, a, n));
              }),
            i
          );
        },
        dl = function(e, t) {
          var a = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2],
            n = pl(t),
            i = [];
          n.forEach(function(e) {
            return i.push(e.node);
          });
          for (var s = {}, o = 0, r = Object.keys(t); o < r.length; o++) {
            var l = r[o];
            s[l] = t[l].ui;
          }
          var u = Object(y.a)(Object(y.a)({}, e), {}, { nodes: i });
          return (
            a &&
              (u._ui = {
                nodes: s,
                stickies: e._ui.stickies,
                languages: e._ui.languages,
                translation_filters: e._ui.translation_filters
              }),
            u
          );
        },
        pl = function(e) {
          var t = [];
          return (
            Object.keys(e).forEach(function(a) {
              t.push(e[a]);
            }),
            t.sort(function(e, t) {
              var a = e.ui.position.top - t.ui.position.top;
              return 0 === a && (a = e.ui.position.left - t.ui.position.left), a;
            })
          );
        },
        hl = function(e, t, a, n) {
          var i,
            l,
            u = { uuid: $(), actions: [], exits: [{ uuid: $(), destination_uuid: null }] },
            c = Ee.execute_actions;
          if (!e || ((l = e) && l.node.router)) {
            var d = n === be.VOICE ? Ee.say_msg : Ee.send_msg,
              p = { uuid: $(), text: '', type: d };
            u.actions.push(p);
          } else {
            var h = [{ uuid: $(), name: Zn.All_Responses, exit_uuid: u.exits[0].uuid }],
              m = { type: o.msg };
            (c = Ee.wait_for_response),
              n === be.VOICE && (m.hint = { type: r.digits, count: 1 }),
              (u.router = {
                type: s.switch,
                result_name: ((i = a), 'Result '.concat(i)),
                default_category_uuid: h[0].uuid,
                categories: h,
                wait: m,
                cases: []
              });
          }
          var _ = {};
          return (
            e && (_ = Object(S.a)({}, t, e.node.uuid)),
            {
              node: u,
              ui: { position: { left: 0, top: 0 }, type: c },
              inboundConnections: _,
              ghost: !0
            }
          );
        },
        ml = function(e) {
          if (e.router) {
            if (1 === e.actions.length) {
              if (e.actions[0].type === Ee.call_webhook) return Ee.split_by_webhook;
              if (e.actions[0].type === Ee.transfer_airtime) return Ee.split_by_airtime;
              if (e.actions[0].type === Ee.call_resthook) return Ee.split_by_resthook;
              if (e.actions[0].type === Ee.enter_flow) return Ee.split_by_subflow;
            }
            if (e.router.wait) return Ee.wait_for_response;
            if (e.router.type === s.random) return Ee.split_by_random;
            var t = wi(e);
            return t && '@contact.groups' === t.operand
              ? Ee.split_by_groups
              : Ee.split_by_expression;
          }
          return Ee.execute_actions;
        },
        _l = function(e) {
          var t,
            a = {},
            n = Object(C.a)(e);
          try {
            for (n.s(); !(t = n.n()).done; ) {
              var i = t.value;
              a[i.id] = i;
            }
          } catch (s) {
            n.e(s);
          } finally {
            n.f();
          }
          return a;
        },
        gl = function(e) {
          var t,
            a,
            n = {},
            i = e.nodes,
            s = e._ui,
            o = {},
            r = {},
            l = {},
            u = {},
            c = {},
            d = Object(C.a)(i);
          try {
            for (d.s(); !(t = d.n()).done; ) {
              var p = t.value;
              p.actions || (p.actions = []);
              var h = { node: p, ui: s.nodes[p.uuid], inboundConnections: {} };
              n[p.uuid] = h;
              var m = Ti(p);
              if ((m && (c = Di(m, c, { nodeUUID: p.uuid })), mr(h) === Ee.split_by_groups)) {
                var _,
                  g = wi(p),
                  v = Object(C.a)(g.cases);
                try {
                  var f = function() {
                    var e = _.value,
                      t = e.arguments[0],
                      a = g.categories.find(function(t) {
                        return t.uuid === e.category_uuid;
                      });
                    a && t && (r[t] = { name: a.name, id: t, type: fe.Group });
                  };
                  for (v.s(); !(_ = v.n()).done; ) f();
                } catch (B) {
                  v.e(B);
                } finally {
                  v.f();
                }
              }
              var y,
                b = Object(C.a)(p.actions);
              try {
                for (b.s(); !(y = b.n()).done; ) {
                  var k = y.value;
                  if (
                    (a = k.type) === Ee.add_contact_groups ||
                    a === Ee.remove_contact_groups ||
                    a === Ee.send_broadcast
                  ) {
                    var E = k.groups;
                    if (E) {
                      var w,
                        S = Object(C.a)(E);
                      try {
                        for (S.s(); !(w = S.n()).done; ) {
                          var N = w.value;
                          N.uuid && (r[N.uuid] = { name: N.name, id: N.uuid, type: fe.Group });
                        }
                      } catch (B) {
                        S.e(B);
                      } finally {
                        S.f();
                      }
                    }
                  } else if (k.type === Ee.set_contact_field) {
                    var O = k;
                    l[O.field.key] = { name: O.field.name, id: O.field.key, type: fe.Field };
                  } else if (k.type === Ee.add_input_labels) {
                    var x,
                      j = Object(C.a)(k.labels);
                    try {
                      for (j.s(); !(x = j.n()).done; ) {
                        var T = x.value;
                        u[T.uuid] = { name: T.name, id: T.uuid, type: fe.Label };
                      }
                    } catch (B) {
                      j.e(B);
                    } finally {
                      j.f();
                    }
                  } else if (k.type === Ee.set_run_result) {
                    var A = k,
                      R = L(A.name);
                    R in c
                      ? c[R].references.push({ nodeUUID: p.uuid, actionUUID: k.uuid })
                      : (c[R] = {
                          name: A.name,
                          id: R,
                          type: fe.Result,
                          references: [{ nodeUUID: p.uuid, actionUUID: k.uuid }]
                        });
                  }
                }
              } catch (B) {
                b.e(B);
              } finally {
                b.f();
              }
              var U,
                D = Object(C.a)(p.exits);
              try {
                for (D.s(); !(U = D.n()).done; ) {
                  var P = U.value;
                  if (P.destination_uuid) {
                    var F = o[P.destination_uuid];
                    F || (F = {}), (F[P.uuid] = p.uuid), (o[P.destination_uuid] = F);
                  }
                }
              } catch (B) {
                D.e(B);
              } finally {
                D.f();
              }
            }
          } catch (B) {
            d.e(B);
          } finally {
            d.f();
          }
          for (var I = 0, M = Object.keys(o); I < M.length; I++) {
            var z = M[I];
            n[z].inboundConnections = o[z];
          }
          return { renderNodeMap: n, groups: r, fields: l, labels: u, results: c, warnings: {} };
        },
        vl = function(e, t) {
          Object.keys(t).forEach(function(a) {
            e[a] = e[a] || t[a];
          });
        },
        fl = function(e, t) {
          for (
            var a = (t || [])
                .filter(function(e) {
                  return e.type !== i.LEGACY_EXTRA;
                })
                .reduce(function(e, t) {
                  var a = e[t.node_uuid] || [];
                  return a.push(t), (e[t.node_uuid] = a), e;
                }, {}),
              n = 0,
              s = Object.entries(a);
            n < s.length;
            n++
          ) {
            var o = Object(w.a)(s[n], 2),
              r = o[0],
              l = o[1];
            JSON.stringify(e[r]) === JSON.stringify(l) && (a[r] = e[r]);
          }
          return a;
        },
        yl = function e(t, a, n, i) {
          var s = n().editorState,
            o = s.simulating,
            r = s.activityInterval;
          s.visible
            ? (function(e, t) {
                var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                return new Promise(function(n, i) {
                  return ze.a
                    .get(''.concat(e, '?flow=').concat(t), { headers: a })
                    .then(function(e) {
                      return n(e.data);
                    })
                    .catch(function(e) {
                      return i(e);
                    });
                });
              })(t, i).then(function(s) {
                if (s) {
                  var l = { liveActivity: s, activityInterval: Math.min(3e5, r + 200) };
                  o || (l.activity = s),
                    a(Dr(l)),
                    il && window.clearTimeout(il),
                    (il = window.setTimeout(function() {
                      e(t, a, n, i);
                    }, r));
                }
              })
            : (il && window.clearTimeout(il),
              (il = window.setTimeout(function() {
                e(t, a, n, i);
              }, 1e3)));
        },
        bl = a(106),
        kl = a.n(bl),
        El = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).ele = void 0),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, 'ref'] }),
              (n.state = {}),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'ref',
                value: function(e) {
                  return (this.ele = e);
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this;
                  if (this.ele && this.props.updateDimensions) {
                    var t =
                        this.ele.clientWidth ||
                        this.props.position.right - this.props.position.left,
                      a =
                        this.ele.clientHeight ||
                        this.props.position.bottom - this.props.position.top;
                    this.setState({ width: t, height: a }, function() {
                      e.props.updateDimensions(e.props.uuid, { width: t, height: a });
                    });
                  }
                }
              },
              {
                key: 'shouldComponentUpdate',
                value: function(e, t, a) {
                  return (
                    e.position.left !== this.props.position.left ||
                    e.position.top !== this.props.position.top ||
                    e.position.right !== this.props.position.right ||
                    e.position.bottom !== this.props.position.bottom ||
                    e.idx !== this.props.idx ||
                    e.selected !== this.props.selected ||
                    e.config !== this.props.config
                  );
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e, t) {
                  var a = this;
                  ne(function() {
                    if (
                      a.ele &&
                      a.ele.clientWidth &&
                      a.ele.clientHeight &&
                      (a.state.width !== a.ele.clientWidth ||
                        a.state.height !== a.ele.clientHeight) &&
                      a.props.updateDimensions
                    ) {
                      var e = a.ele.clientHeight,
                        t = a.ele.clientWidth;
                      a.setState({ width: t, height: e }, function() {
                        a.props.updateDimensions(a.props.uuid, { width: t, height: e });
                      });
                    }
                  });
                }
              },
              {
                key: 'handleMouseUp',
                value: function(e) {
                  3 !== e.nativeEvent.which && this.props.onDragStop && this.props.onDragStop();
                }
              },
              {
                key: 'handleMouseDown',
                value: function(e) {
                  var t, a;
                  (this.props.selected || 'TEXTAREA' !== e.target.tagName.toUpperCase()) &&
                    (3 !== e.nativeEvent.which &&
                      this.props.onDragStart &&
                      this.props.onDragStart(
                        this.props.uuid,
                        ((t = e.pageX - this.props.position.left),
                        (a = e.pageY - this.props.position.top),
                        { left: t, top: a })
                      ));
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = [kl.a.draggable];
                  this.props.selected && t.push(kl.a.selected);
                  return k.createElement(
                    'div',
                    {
                      'data-testid': 'draggable_' + this.props.uuid,
                      onTransitionEnd: function() {
                        e.props.onAnimated && e.props.onAnimated(e.props.uuid);
                      },
                      ref: this.ref,
                      className: t.join(' '),
                      style: { left: this.props.position.left, top: this.props.position.top },
                      onMouseDown: this.handleMouseDown,
                      onMouseUp: this.handleMouseUp
                    },
                    this.props.elementCreator(this.props)
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Cl = a(15),
        wl = function(e, t, a) {
          return (
            !(!e.bottom || !t.bottom) &&
            ((e.bottom += a),
            !(t.left > e.right || t.right < e.left || t.top > e.bottom || t.bottom < e.top))
          );
        },
        Sl = function(e, t, a) {
          for (
            var n = (function(e) {
                var t = [];
                return (
                  Object.keys(e).forEach(function(a) {
                    t.push(Object(y.a)(Object(y.a)({}, e[a]), {}, { uuid: a }));
                  }),
                  t.sort(function(e, t) {
                    var a = e.top - t.top;
                    return 0 === a && (a = e.left - t.left), a;
                  })
                );
              })(e),
              i = function(e) {
                var i = n[e];
                if (e + 1 < n.length)
                  for (
                    var s = function(e) {
                        var s = n[e];
                        if (wl(i, s, a)) {
                          if (e + 1 < n.length) {
                            var o = n[e + 1];
                            if (wl(s, o, a)) return { v: { v: [i, s, o] } };
                          }
                          return t.find(function(e) {
                            return s.uuid === e;
                          }) &&
                            !t.find(function(e) {
                              return i.uuid === e;
                            })
                            ? { v: { v: [s, i] } }
                            : { v: { v: [i, s] } };
                        }
                      },
                      o = e + 1;
                    o < n.length;
                    o++
                  ) {
                    var r = s(o);
                    if ('object' === typeof r) return r.v;
                  }
              },
              s = 0;
            s < n.length;
            s++
          ) {
            var o = i(s);
            if ('object' === typeof o) return o.v;
          }
          return [];
        },
        Nl = function(e, t) {
          return M({ top: t, left: e.left, bottom: t + (e.bottom - e.top), right: e.right });
        },
        Ol = a(79),
        xl = a.n(Ol),
        jl = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            Object(m.a)(this, a),
              ((n = t.call(this, e)).ele = void 0),
              (n.isScrolling = void 0),
              (n.reflowTimeout = void 0),
              (n.lastX = void 0),
              (n.lastY = void 0),
              (n.justSelected = !1),
              (n.onDragThrottled = ae(n.props.onDragging, 300)),
              (n.onMouseThrottled = ae(n.handleMouseMove.bind(Object(g.a)(n)), 10));
            var i = document.documentElement.clientHeight,
              s = {};
            return (
              n.props.draggables.forEach(function(e) {
                (s[e.uuid] = e.position),
                  e.position.bottom && (i = Math.max(i, e.position.bottom + 300));
              }),
              (n.state = {
                height: i,
                dragDownPosition: null,
                dragUUID: null,
                dragGroup: !1,
                dragSelection: null,
                uuid: n.props.uuid,
                selected: {},
                positions: s
              }),
              Object(b.react)(Object(g.a)(n), {
                include: [/^handle/, /^render/, /^mark/, /^do/, /^ensure/]
              }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleWindowResize',
                value: function() {
                  var e = document.documentElement.clientHeight;
                  this.setState({ height: Math.max(e, this.state.height) });
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  window.addEventListener('resize', this.handleWindowResize),
                    document.addEventListener('keydown', this.handleKeyDown),
                    this.props.onLoaded();
                }
              },
              {
                key: 'handleKeyDown',
                value: function(e) {
                  this.state.selected &&
                    'Backspace' === e.key &&
                    (Object.keys(this.state.selected).length > 0 &&
                      this.props.onRemoveNodes(Object.keys(this.state.selected)));
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  window.removeEventListener('resize', this.handleWindowResize),
                    document.removeEventListener('keydown', this.handleKeyDown);
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e, t) {
                  var a = this,
                    n = !1,
                    i = Object(y.a)({}, this.state.positions);
                  this.props.draggables.forEach(function(e) {
                    a.state.positions[e.uuid] ||
                      ((i = Jt()(i, { $merge: Object(S.a)({}, e.uuid, e.position) })), (n = !0));
                  }),
                    Object.keys(i).forEach(function(e) {
                      a.props.draggables.find(function(t) {
                        return t.uuid === e;
                      }) || ((i = Jt()(i, { $unset: [[e]] })), (n = !0));
                    }),
                    n && this.setState({ positions: i });
                }
              },
              {
                key: 'renderSelectionBox',
                value: function() {
                  var e = this.state.dragSelection;
                  if (e && e.startX && e.startY && e.currentX && e.currentY) {
                    var t = Math.min(e.startX, e.currentX),
                      a = Math.min(e.startY, e.currentY),
                      n = Math.max(e.startX, e.currentX) - t,
                      i = Math.max(e.startY, e.currentY) - a;
                    if (this.state.dragSelection && this.state.dragSelection.startX)
                      return E.a.createElement('div', {
                        className: xl.a.drag_selection,
                        style: { left: t, top: a, width: n, height: i }
                      });
                  }
                  return null;
                }
              },
              {
                key: 'isClickOnCanvas',
                value: function(e) {
                  return 3 !== e.nativeEvent.which && 'canvas' === e.target.id;
                }
              },
              {
                key: 'handleMouseDown',
                value: function(e) {
                  if (3 !== e.nativeEvent.which && this.props.mutable) {
                    var t = this.ele.getBoundingClientRect();
                    if (((this.justSelected = !1), this.isClickOnCanvas(e))) {
                      var a = e.pageX - t.left,
                        n = e.pageY - t.top - window.scrollY;
                      this.setState({
                        dragSelection: { startX: a, startY: n, currentX: a, currentY: n }
                      });
                    }
                  }
                }
              },
              {
                key: 'handleMouseMove',
                value: function(e) {
                  if (this.props.mutable) {
                    if (this.props.draggingNew)
                      return (
                        (this.lastX = e.pageX),
                        (this.lastY = e.pageY),
                        this.updateStateWithScroll(e.clientY, e.pageY),
                        void (
                          this.state.dragUUID &&
                          this.updatePositions(e.pageX, e.pageY, e.clientY, !1)
                        )
                      );
                    if (this.state.dragSelection && this.state.dragSelection.startX) {
                      var t = this.state.dragSelection;
                      if (t && t.startX && t.startY && t.currentX && t.currentY) {
                        var a = Math.min(t.startX, t.currentX),
                          n = Math.min(t.startY, t.currentY),
                          i = Math.max(t.startX, t.currentX),
                          s = Math.max(t.startY, t.currentY),
                          o = (function(e, t) {
                            for (var a = {}, n = 0, i = Object.keys(e); n < i.length; n++) {
                              var s = i[n],
                                o = e[s];
                              wl(t, o, 0) && (a[s] = o);
                            }
                            return a;
                          })(this.state.positions, { left: a, top: n, right: i, bottom: s }),
                          r = this.ele.getBoundingClientRect();
                        this.setState({
                          dragSelection: {
                            startX: t.startX,
                            startY: t.startY,
                            currentX: e.pageX - r.left,
                            currentY: e.pageY - r.top - window.scrollY
                          }
                        }),
                          this.setState({ selected: o }),
                          Object.keys(o).length > 0 && (this.justSelected = !0);
                      }
                    }
                    this.state.dragUUID && this.updatePositions(e.pageX, e.pageY, e.clientY, !1);
                  }
                }
              },
              {
                key: 'scrollCanvas',
                value: function(e) {
                  var t = this;
                  if (!this.isScrolling) {
                    this.isScrolling = !0;
                    var a = e;
                    window.scrollY + e < 0 && (a = 0),
                      (this.isScrolling = window.setInterval(function() {
                        t.lastX &&
                          t.lastY &&
                          (t.updatePositions(t.lastX, t.lastY + a, 0, !1), window.scrollBy(0, a));
                      }, 30));
                  }
                }
              },
              {
                key: 'handleMouseUpCapture',
                value: function(e) {
                  this.props.mutable &&
                    3 !== e.nativeEvent.which &&
                    ((this.lastX = null),
                    (this.lastY = null),
                    this.state.dragUUID &&
                      this.setState({
                        dragDownPosition: null,
                        dragSelection: null,
                        dragUUID: null
                      }),
                    this.justSelected ||
                      (this.props.mergeEditorState({ dragActive: !1 }),
                      this.setState({ selected: {} })),
                    this.state.dragSelection &&
                      this.state.dragSelection.startX &&
                      this.setState({
                        dragSelection: {
                          startX: void 0,
                          startY: void 0,
                          currentX: void 0,
                          currentY: void 0
                        }
                      }),
                    (this.justSelected = !1));
                }
              },
              {
                key: 'handleUpdateDimensions',
                value: function(e, t) {
                  if (t.width && t.height) {
                    var a = this.state.positions[e];
                    a ||
                      (a = this.props.draggables.find(function(t) {
                        return t.uuid === e;
                      }).position);
                    var n = {
                      left: a.left,
                      top: a.top,
                      right: a.left + t.width,
                      bottom: a.top + t.height
                    };
                    (n.bottom === a.bottom && n.right === a.right) ||
                      this.setState(function(t) {
                        return {
                          positions: Jt()(t.positions, { $merge: Object(S.a)({}, e, n) }),
                          height: Math.max(n.bottom + 300, t.height)
                        };
                      }, this.markReflow);
                  }
                }
              },
              {
                key: 'ensureCanvasHeight',
                value: function() {
                  var e = this,
                    t = this.state.height;
                  Object.keys(this.state.positions).forEach(function(a) {
                    var n = e.state.positions[a].bottom + 300;
                    n > t && (t = n);
                  }),
                    t > this.state.height && this.setState({ height: t });
                }
              },
              {
                key: 'doReflow',
                value: function() {
                  var e = Object(y.a)({}, this.state.positions);
                  delete e[this.state.dragUUID];
                  var t = (function(e, t) {
                      for (var a = e, n = [], i = 0, s = Sl(e, n, t); s.length > 0 && i < 100; ) {
                        if ((i++, s.length)) {
                          var o = s,
                            r = Object(w.a)(o, 3),
                            l = r[0],
                            u = r[1],
                            c = r[2];
                          if (
                            ((a = Cl(a, Object(S.a)({}, u.uuid, Y(Nl(u, l.bottom + P))))),
                            n.push(u.uuid),
                            c)
                          ) {
                            var d = l.bottom + P;
                            (d += u.bottom - u.top),
                              (a = Cl(a, Object(S.a)({}, c.uuid, Y(Nl(c, d))))),
                              n.push(c.uuid);
                          }
                        }
                        s = Sl(a, n, t);
                      }
                      return { positions: a, changed: n };
                    })(e, 5),
                    a = t.positions,
                    n = t.changed;
                  n &&
                    (this.setState({ positions: a }),
                    n &&
                      this.props.onUpdatePositions(
                        n.reduce(function(e, t) {
                          return (e[t] = a[t]), e;
                        }, {})
                      )),
                    this.props.onDragging(n);
                }
              },
              {
                key: 'markReflow',
                value: function() {
                  var e = this;
                  this.reflowTimeout && clearTimeout(this.reflowTimeout),
                    (this.reflowTimeout = setTimeout(function() {
                      e.state.dragUUID || e.doReflow();
                    }, 200));
                }
              },
              {
                key: 'updateStateWithScroll',
                value: function(e, t) {
                  var a = this,
                    n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                    i = document.documentElement.clientHeight;
                  this.setState(
                    function(e) {
                      return Object(y.a)(
                        Object(y.a)({}, n),
                        {},
                        { height: Math.max(t + 300, e.height) }
                      );
                    },
                    function() {
                      a.isScrolling || 0 === e
                        ? 0 !== e &&
                          e > 100 &&
                          e + 100 < i &&
                          (window.clearInterval(a.isScrolling), (a.isScrolling = null))
                        : e + 100 > i
                        ? a.scrollCanvas(15)
                        : e < 100 && a.scrollCanvas(-15);
                    }
                  );
                }
              },
              {
                key: 'updatePositions',
                value: function(e, t, a, n) {
                  if (this.state.dragUUID) {
                    var i = this.state.dragUUID;
                    (this.lastX = e), (this.lastY = t);
                    var s = this.props.dragActive
                        ? this.state.selected[i]
                        : this.state.positions[i],
                      o = this.ele.getBoundingClientRect();
                    if (this.state.dragDownPosition) {
                      var r = e - o.left - this.state.dragDownPosition.left - s.left,
                        l = t - o.top - this.state.dragDownPosition.top - s.top - window.scrollY,
                        u = 0;
                      if (this.props.dragActive) {
                        var c = { left: r, top: l },
                          d = this.state,
                          p = Object.keys(d.selected),
                          h = {};
                        p.forEach(function(e) {
                          var t = (function(e, t) {
                            var a = e.right - e.left,
                              n = e.bottom - e.top,
                              i = e.top + t.top,
                              s = e.left + t.left;
                            return a && n
                              ? { left: s, top: i, right: s + a, bottom: i + n }
                              : { top: i, left: s };
                          })(d.selected[e], c);
                          n && (t = M(t)), t && t.bottom > u && (u = t.bottom), (h[e] = t);
                        }),
                          (h = Jt()(d.positions, { $merge: h })),
                          this.updateStateWithScroll(a, u, { positions: h }),
                          p.length <= 5 ? this.props.onDragging(p) : this.onDragThrottled(p);
                      } else if (Math.abs(r) + Math.abs(l) > pc) {
                        var m = this.state.selected;
                        this.state.dragUUID in m ||
                          (m = Object(S.a)({}, i, this.state.positions[i])),
                          this.props.mergeEditorState({ dragActive: !0 }),
                          this.setState({ selected: m });
                      }
                    }
                  }
                }
              },
              {
                key: 'handleDragStart',
                value: function(e, t) {
                  var a = this.ele.getBoundingClientRect();
                  this.setState({
                    dragUUID: e,
                    dragDownPosition: { left: t.left - a.left, top: t.top - a.top - window.scrollY }
                  });
                }
              },
              {
                key: 'getSelectedPositions',
                value: function() {
                  var e = this;
                  return Object.keys(this.state.selected).reduce(function(t, a) {
                    return (t[a] = e.state.positions[a]), t;
                  }, {});
                }
              },
              {
                key: 'handleDragStop',
                value: function() {
                  this.state.dragUUID && this.updatePositions(this.lastX, this.lastY, 0, !0),
                    this.props.onUpdatePositions(this.getSelectedPositions()),
                    this.setState({ dragUUID: null, dragDownPosition: null, dragSelection: null }),
                    this.markReflow(),
                    this.props.mergeEditorState({ dragActive: !1 });
                }
              },
              {
                key: 'handleAnimated',
                value: function(e) {
                  this.props.onDragging([e]);
                }
              },
              {
                key: 'handleDoubleClick',
                value: function(e) {
                  if (this.isClickOnCanvas(e)) {
                    var t = this.ele.getBoundingClientRect();
                    this.props.onDoubleClick(I(e.pageX - t.left, e.pageY - t.top - window.scrollY));
                  }
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this;
                  return E.a.createElement(
                    'div',
                    {
                      id: 'canvas-container',
                      className: xl.a.canvas_container,
                      onMouseDown: this.handleMouseDown,
                      onMouseMove: this.onMouseThrottled,
                      onMouseUp: this.handleMouseUpCapture,
                      onDoubleClick: this.handleDoubleClick
                    },
                    E.a.createElement(
                      'div',
                      { className: xl.a.canvas_background },
                      E.a.createElement(
                        'div',
                        {
                          'data-testid': 'canvas',
                          style: { height: this.state.height },
                          id: 'canvas',
                          ref: function(t) {
                            e.ele = t;
                          },
                          className: xl.a.canvas
                        },
                        this.props.newDragElement,
                        this.props.draggables.map(function(t, a) {
                          var n = e.state.positions[t.uuid] || t.position;
                          return E.a.createElement(El, {
                            onAnimated: e.handleAnimated,
                            key: 'draggable_' + t.uuid,
                            uuid: t.uuid,
                            updateDimensions: e.handleUpdateDimensions,
                            position: n,
                            idx: t.idx,
                            selected: !!e.state.selected[t.uuid],
                            elementCreator: t.elementCreator,
                            onDragStart: e.handleDragStart,
                            onDragStop: e.handleDragStop,
                            dragOnAdd: t.dragOnAdd,
                            config: t.config
                          });
                        }),
                        this.renderSelectionBox()
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(E.a.PureComponent),
        Tl = a(88),
        Al = a.n(Tl),
        Rl = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).ele = void 0),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^get/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  this.handleScrollIntoView();
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  e.count !== this.props.count && this.handleScrollIntoView();
                }
              },
              {
                key: 'handleScrollIntoView',
                value: function() {
                  var e = this;
                  this.ele &&
                    this.props.count > 0 &&
                    this.props.keepVisible &&
                    window.setTimeout(function() {
                      window.scrollTo({
                        top: e.ele.getBoundingClientRect().top - 200 + window.scrollY,
                        behavior: 'smooth'
                      });
                    }, 200);
                }
              },
              {
                key: 'handleMouseEvent',
                value: function(e, t) {
                  e.preventDefault(), e.stopPropagation(), t && t();
                }
              },
              {
                key: 'handleMouseEnter',
                value: function(e) {
                  this.handleMouseEvent(e, this.props.onMouseEnter);
                }
              },
              {
                key: 'handleMouseLeave',
                value: function(e) {
                  this.handleMouseEvent(e, this.props.onMouseLeave);
                }
              },
              {
                key: 'handleClick',
                value: function(e) {
                  this.handleMouseEvent(e, this.props.onClick);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = this.props.count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                  return k.createElement(
                    'div',
                    {
                      ref: function(t) {
                        e.ele = t;
                      },
                      className:
                        Al.a.counter +
                        ' ' +
                        this.props.containerStyle +
                        ' ' +
                        (this.props.onClick ? Al.a.clickable : '') +
                        ' ' +
                        (this.props.count > 0 ? Al.a.visible : ''),
                      onClick: this.handleClick,
                      'data-spec': 'counter-outter'
                    },
                    k.createElement(
                      'div',
                      {
                        onMouseEnter: this.handleMouseEnter,
                        onMouseLeave: this.handleMouseLeave,
                        className: this.props.countStyle,
                        'data-spec': 'counter-inner'
                      },
                      t
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Ul = a(45),
        Dl = a.n(Ul),
        Pl = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).confirmationTimeout = void 0),
              (n.state = { confirmingRemoval: !1 }),
              (n.handleConfirmRemoval = n.handleConfirmRemoval.bind(Object(g.a)(n))),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentWillUnmount',
                value: function() {
                  this.confirmationTimeout && window.clearTimeout(this.confirmationTimeout);
                }
              },
              {
                key: 'handleMouseUpCapture',
                value: function(e) {
                  e && (e.preventDefault(), e.stopPropagation());
                }
              },
              {
                key: 'handleConfirmRemoval',
                value: function(e) {
                  var t = this;
                  e && (e.preventDefault(), e.stopPropagation()),
                    this.setState({ confirmingRemoval: !0 }),
                    (this.confirmationTimeout = window.setTimeout(function() {
                      return t.setState({ confirmingRemoval: !1 });
                    }, 2e3));
                }
              },
              {
                key: 'getMoveArrow',
                value: function() {
                  return this.props.showMove && this.context.config.mutable
                    ? k.createElement(
                        'div',
                        Object.assign(
                          { className: Dl.a.up_button },
                          q(
                            this.props.onMoveUp,
                            this.props.shouldCancelClick,
                            this.handleMouseUpCapture
                          ),
                          { 'data-testid': 'move-icon' }
                        ),
                        k.createElement('span', { className: 'fe-arrow-up' })
                      )
                    : k.createElement('div', { className: Dl.a.up_button, 'data-spec': 'move' });
                }
              },
              {
                key: 'getRemove',
                value: function() {
                  var e = k.createElement('div', {
                    className: Dl.a.remove_button,
                    'data-testid': 'remove-icon'
                  });
                  return (
                    this.props.showRemoval &&
                      this.context.config.mutable &&
                      (e = k.createElement(
                        'div',
                        Object.assign(
                          { className: Dl.a.remove_button },
                          q(
                            this.handleConfirmRemoval,
                            this.props.shouldCancelClick,
                            this.handleMouseUpCapture
                          ),
                          { 'data-testid': 'remove-icon' }
                        ),
                        k.createElement('span', { className: 'fe-x' })
                      )),
                    e
                  );
                }
              },
              {
                key: 'getConfirmationEl',
                value: function() {
                  var e;
                  return (
                    this.state.confirmingRemoval &&
                      this.context.config.mutable &&
                      (e = k.createElement(
                        'div',
                        { className: Dl.a.remove_confirm, 'data-spec': 'confirmation' },
                        k.createElement('div', { className: Dl.a.up_button, 'data-spec': 'move' }),
                        k.createElement(
                          'div',
                          { className: Dl.a.titletext },
                          Ft.t('removal_confirmation', 'Remove?')
                        ),
                        k.createElement(
                          'div',
                          Object.assign(
                            { className: Dl.a.remove_button },
                            q(
                              this.props.onRemoval,
                              this.props.shouldCancelClick,
                              this.handleMouseUpCapture
                            ),
                            { 'data-testid': 'confirm-removal' }
                          ),
                          k.createElement('span', { className: 'fe-x' })
                        )
                      )),
                    e
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.getConfirmationEl(),
                    t = this.getMoveArrow(),
                    a = this.getRemove();
                  return k.createElement(
                    'div',
                    { className: Dl.a.titlebar, 'data-spec': 'titlebar-container' },
                    k.createElement(
                      'div',
                      {
                        className: ''.concat(this.props.__className, ' ').concat(Dl.a.normal),
                        'data-spec': 'titlebar'
                      },
                      t,
                      k.createElement('div', { className: Dl.a.titletext }, this.props.title),
                      a
                    ),
                    e
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      Pl.contextTypes = { config: bt };
      var Fl = a(31),
        Il = a(89),
        Ml = a.n(Il),
        Ll = St.a.bind(Ml.a),
        zl = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).ele = void 0),
              (n.handleScroll = void 0),
              (n.state = { pulse: !1 }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this,
                    t = this.handleScrollCompleted.bind(this),
                    a = null;
                  (this.handleScroll = function() {
                    null !== a && window.clearTimeout(a),
                      (a = window.setTimeout(function() {
                        t(), window.removeEventListener('scroll', e.handleScroll);
                      }, 50));
                  }),
                    window.addEventListener('scroll', this.handleScroll),
                    this.handleScrollIntoView();
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  window.removeEventListener('scroll', this.handleScroll);
                }
              },
              {
                key: 'handleScrollCompleted',
                value: function() {
                  this.setState({ pulse: !0 });
                }
              },
              {
                key: 'handleScrollIntoView',
                value: function() {
                  if (this.ele) {
                    var e = this.ele.getBoundingClientRect().top - 200 + window.scrollY;
                    if (e !== window.scrollY)
                      window.innerHeight + window.scrollY >= document.body.scrollHeight - 2 &&
                      e > window.scrollY
                        ? this.handleScrollCompleted()
                        : window.setTimeout(function() {
                            window.scrollTo({ top: e, behavior: 'smooth' });
                          }, 0);
                    else this.handleScrollCompleted();
                  }
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this,
                    a = Ll(
                      ((e = {}),
                      Object(S.a)(e, Ml.a.wrapper, !0),
                      Object(S.a)(e, Ml.a.pulse, this.state.pulse),
                      e)
                    );
                  return k.createElement(
                    'div',
                    {
                      className: a,
                      ref: function(e) {
                        t.ele = e;
                      }
                    },
                    this.props.children
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Bl = St.a.bind(Object(y.a)(Object(y.a)({}, ce.a), Qa.a)),
        ql = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleActionClicked',
                value: function(e) {
                  var t = e.target,
                    a = t && t.attributes && 'true' === t.getAttribute('data-advanced');
                  this.props.onOpenNodeEditor({
                    originalNode: this.props.renderNode,
                    originalAction: this.props.action,
                    showAdvanced: a
                  });
                }
              },
              {
                key: 'handleRemoval',
                value: function(e) {
                  e && (e.preventDefault(), e.stopPropagation()),
                    this.props.removeAction(this.props.renderNode.node.uuid, this.props.action);
                }
              },
              {
                key: 'handleMoveUp',
                value: function(e) {
                  e && (e.preventDefault(), e.stopPropagation()),
                    this.props.moveActionUp(this.props.renderNode.node.uuid, this.props.action);
                }
              },
              {
                key: 'getAction',
                value: function() {
                  return this.props.translating
                    ? V(this.props.action, this.props.localization, this.props.language).getObject()
                    : this.props.action;
                }
              },
              {
                key: 'getClasses',
                value: function() {
                  var e,
                    t = [],
                    a = !1;
                  if (
                    this.props.translating &&
                    ((this.props.action.type !== Ee.send_msg &&
                      this.props.action.type !== Ee.send_broadcast &&
                      this.props.action.type !== Ee.say_msg) ||
                      t.push('text'),
                    this.props.action.type === Ee.send_email && t.push('subject'),
                    0 !== t.length)
                  ) {
                    var n = V(this.props.action, this.props.localization, this.props.language);
                    if (n.isLocalized()) {
                      var i,
                        s = Object(C.a)(t);
                      try {
                        for (s.s(); !(i = s.n()).done; ) {
                          if (!(i.value in n.localizedKeys)) {
                            a = !0;
                            break;
                          }
                        }
                      } catch (r) {
                        s.e(r);
                      } finally {
                        s.f();
                      }
                    } else a = !0;
                  }
                  var o = this.props.translating && 0 === t.length;
                  return Bl(
                    ((e = {}),
                    Object(S.a)(e, Qa.a.action, !0),
                    Object(S.a)(
                      e,
                      Qa.a.has_router,
                      this.props.renderNode.node.hasOwnProperty('router') &&
                        null !== this.props.renderNode.node.router
                    ),
                    Object(S.a)(e, Qa.a.translating, this.props.translating),
                    Object(S.a)(e, Qa.a.not_localizable, o),
                    Object(S.a)(e, Qa.a.missing_localization, a),
                    Object(S.a)(e, Qa.a.localized, !o && !a),
                    e)
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this,
                    t = hr(this.props.action.type).name,
                    a = this.getClasses(),
                    n = this.getAction(),
                    i = ce.a[this.props.action.type] || ce.a.missing,
                    s = Qa.a[this.props.action.type] || Qa.a.missing,
                    o = !this.props.translating,
                    r = !this.props.first && !this.props.translating;
                  Za(this.props.issues, this.props.translating, this.props.language) &&
                    (i = ce.a.missing);
                  var l = this.context.config.mutable
                      ? q(this.handleActionClicked, function() {
                          return e.props.selected;
                        })
                      : {},
                    u = k.createElement(
                      k.Fragment,
                      null,
                      k.createElement(Pl, {
                        __className: i,
                        title: t,
                        onRemoval: this.handleRemoval,
                        showRemoval: o,
                        showMove: r,
                        onMoveUp: this.handleMoveUp,
                        shouldCancelClick: function() {
                          return e.props.selected;
                        }
                      }),
                      k.createElement(
                        'div',
                        { className: Qa.a.body + ' ' + s, 'data-spec': 'action-body' },
                        this.props.render(n, this.context.config.endpoints)
                      )
                    );
                  return k.createElement(
                    'div',
                    {
                      id: 'action-'.concat(this.props.action.uuid),
                      className: a,
                      'data-spec': 'action-container'
                    },
                    k.createElement('div', {
                      className: Qa.a.overlay,
                      'data-spec': 'action-overlay'
                    }),
                    k.createElement(
                      'div',
                      Object.assign({}, l, { 'data-spec': 'interactive-div' }),
                      this.props.scrollToAction &&
                        this.props.scrollToAction === this.props.action.uuid
                        ? k.createElement(zl, { pulseAfterScroll: !0 }, u)
                        : u
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      ql.contextTypes = { config: bt };
      var Vl = Object(Fl.b)(
          function(e) {
            var t = e.flowContext,
              a = t.assetStore,
              n = t.definition.localization,
              i = e.editorState,
              s = i.language,
              o = i.translating;
            return {
              scrollToAction: i.scrollToAction,
              assetStore: a,
              language: s,
              translating: o,
              localization: n
            };
          },
          function(e) {
            return Object(ve.bindActionCreators)(
              { onOpenNodeEditor: al, removeAction: Gr, moveActionUp: Kr },
              e
            );
          },
          null,
          { forwardRef: !0 }
        )(ql),
        Hl = a(59),
        Gl = a.n(Hl),
        Kl = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return Object(m.a)(this, a), ((n = t.call(this, e)).state = { visible: !1 }), n;
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this;
                  window.setTimeout(function() {
                    e.state.visible || e.setState({ visible: !0 });
                  }, 100);
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    'div',
                    {
                      className: Gl.a.drag_helper + ' ' + (this.state.visible ? Gl.a.visible : '')
                    },
                    k.createElement(
                      'div',
                      { className: Gl.a.arrow },
                      k.createElement('div', { className: Gl.a.tail }),
                      k.createElement('div', { className: Gl.a.head })
                    ),
                    k.createElement(
                      'div',
                      { className: Gl.a.help_text },
                      k.createElement(
                        Pe.a,
                        { i18nKey: 'drag_helper' },
                        'To connect nodes, ',
                        k.createElement('span', { className: Gl.a.bold }, 'drag'),
                        ' from the red circle.'
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Wl = function(e) {
          return e.uuid + ':' + e.destination_uuid;
        },
        Yl = a(149),
        Xl = a.n(Yl),
        Ql = function(e) {
          var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
          return t ? { r: parseInt(t[1], 16), g: parseInt(t[2], 16), b: parseInt(t[3], 16) } : null;
        },
        Jl = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return Object(m.a)(this, a), ((n = t.call(this, e)).state = { color: Ql(e.color) }), n;
          }
          return (
            Object(_.a)(a, [
              {
                key: 'render',
                value: function() {
                  var e = this;
                  return k.createElement(
                    'div',
                    {
                      className: Xl.a.loading,
                      style: {
                        width: this.props.size * this.props.units * 2,
                        height: this.props.size
                      }
                    },
                    ee(0, this.props.units).map(function(t) {
                      return k.createElement('div', {
                        key: 'ball_'.concat(t),
                        style: {
                          borderRadius: e.props.square ? '0' : '50%',
                          width: e.props.size,
                          height: e.props.size,
                          margin: e.props.size / 3,
                          animationDelay: '-'.concat(1 - t * (1 / e.props.units), 's'),
                          background: 'rgba('
                            .concat(e.state.color.r, ',')
                            .concat(e.state.color.g, ',')
                            .concat(e.state.color.b, ', ')
                            .concat(1 - t * (1 / e.props.units), ')')
                        }
                      });
                    })
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Zl = a(150),
        $l = a(32),
        eu = a.n($l),
        tu = a(39),
        au = a.n(tu),
        nu = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).el = null),
              (n.portalRoot = null),
              (n.el = document.createElement('div')),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this;
                  window.setTimeout(function() {
                    (e.portalRoot = document.getElementById(e.props.id || 'portal-root')),
                      e.portalRoot && e.portalRoot.appendChild(e.el);
                  }, 100);
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  this.portalRoot && this.el.remove();
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  var t = this;
                  this.props.id &&
                    e.id !== this.props.id &&
                    window.setTimeout(function() {
                      (t.portalRoot = document.getElementById(t.props.id || 'portal-root')),
                        t.portalRoot.appendChild(t.el);
                    }, 100);
                }
              },
              {
                key: 'render',
                value: function() {
                  return au.a.createPortal(this.props.children, this.el);
                }
              }
            ]),
            a
          );
        })(k.Component),
        iu = St.a.bind(eu.a),
        su = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).timeout = void 0),
              (n.hideDragHelper = void 0),
              (n.pendingMessageFetch = {}),
              (n.ele = void 0),
              (n.state = {
                confirmDelete: !1,
                recentMessages: null,
                fetchingRecentMessages: !1,
                showDragHelper: e.showDragHelper
              }),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^get/, /^handle/, /^connect/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'getSourceId',
                value: function() {
                  return ''.concat(this.props.node.uuid, ':').concat(this.props.exit.uuid);
                }
              },
              {
                key: 'handleDisconnect',
                value: function() {
                  this.setState({ showDragHelper: !1 });
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  this.props.plumberMakeSource(this.getSourceId()),
                    this.ele && this.ele.addEventListener('disconnect', this.handleDisconnect),
                    this.props.exit.destination_uuid && this.connect();
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  this.props.exit.destination_uuid !== e.exit.destination_uuid &&
                    (this.connect(),
                    this.state.confirmDelete && this.setState({ confirmDelete: !1 })),
                    this.state.showDragHelper &&
                      e.showDragHelper &&
                      !this.props.showDragHelper &&
                      this.setState({ showDragHelper: !1 }),
                    this.props.plumberUpdateClass(
                      this.props.node,
                      this.props.exit,
                      'confirm-delete',
                      this.state.confirmDelete
                    );
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  this.props.exit.destination_uuid && this.props.plumberRemove(this.getSourceId()),
                    this.ele && this.ele.removeEventListener('disconnect', this.handleDisconnect);
                }
              },
              {
                key: 'handleMouseDown',
                value: function(e) {
                  e.preventDefault(), e.stopPropagation();
                }
              },
              {
                key: 'handleClick',
                value: function(e) {
                  var t = this;
                  this.props.translating ||
                    (this.props.exit.destination_uuid
                      ? (e.preventDefault(),
                        e.stopPropagation(),
                        this.setState({ confirmDelete: !0 }, function() {
                          t.timeout = window.setTimeout(function() {
                            t.setState({ confirmDelete: !1 });
                          }, 2e3);
                        }))
                      : (e.preventDefault(),
                        e.stopPropagation(),
                        this.state.showDragHelper ||
                          this.setState({ showDragHelper: !0 }, function() {
                            t.hideDragHelper && window.clearTimeout(t.hideDragHelper),
                              (t.hideDragHelper = window.setTimeout(function() {
                                t.setState({ showDragHelper: !1 });
                              }, 3e3));
                          })));
                }
              },
              {
                key: 'onDisconnect',
                value: function(e) {
                  this.timeout && window.clearTimeout(this.timeout),
                    this.hideDragHelper && window.clearTimeout(this.hideDragHelper),
                    this.props.disconnectExit(this.props.node.uuid, this.props.exit.uuid);
                }
              },
              {
                key: 'connect',
                value: function() {
                  this.props.plumberConnectExit(this.props.node, this.props.exit);
                }
              },
              {
                key: 'handleShowRecentMessages',
                value: function() {
                  var e = this;
                  this.props.recentMessages
                    ? this.setState({ recentMessages: this.props.recentMessages })
                    : this.setState({ fetchingRecentMessages: !0 }, function() {
                        var t, a, n;
                        ((t = e.context.config.endpoints.recents),
                        (a = e.props.exit),
                        (n = e.pendingMessageFetch),
                        new Promise(function(e, i) {
                          return (
                            (n.reject = i),
                            ze.a
                              .get(
                                ''
                                  .concat(t, '?exits=')
                                  .concat(a.uuid, '&to=')
                                  .concat(a.destination_uuid)
                              )
                              .then(function(t) {
                                var a,
                                  n = [],
                                  i = Object(C.a)(t.data);
                                try {
                                  for (i.s(); !(a = i.n()).done; ) {
                                    var s = a.value;
                                    n.push({ text: s.text, sent: s.sent });
                                  }
                                } catch (o) {
                                  i.e(o);
                                } finally {
                                  i.f();
                                }
                                e(t.data);
                              })
                              .catch(function(e) {
                                return i(e);
                              })
                          );
                        }))
                          .then(function(t) {
                            e.setState({ recentMessages: t, fetchingRecentMessages: !1 });
                          })
                          .catch(function() {});
                      });
                }
              },
              {
                key: 'handleHideRecentMessages',
                value: function() {
                  this.pendingMessageFetch.reject &&
                    (this.pendingMessageFetch.reject(), (this.pendingMessageFetch = {})),
                    this.setState({ fetchingRecentMessages: !1, recentMessages: null });
                }
              },
              {
                key: 'getSegmentCount',
                value: function() {
                  if (this.props.segmentCount > 0) {
                    var e = ''.concat(this.props.exit.uuid, '-label');
                    return k.createElement(
                      'div',
                      { style: { position: 'absolute', bottom: '-25px' } },
                      k.createElement(Rl, {
                        key: e,
                        count: this.props.segmentCount,
                        containerStyle: eu.a.activity,
                        countStyle: eu.a.count,
                        keepVisible: !1,
                        onMouseEnter: this.handleShowRecentMessages,
                        onMouseLeave: this.handleHideRecentMessages
                      })
                    );
                  }
                }
              },
              {
                key: 'getName',
                value: function() {
                  var e = this;
                  if (this.props.translating) {
                    var t = '',
                      a = '',
                      n = !1;
                    return (
                      this.props.categories.forEach(function(i) {
                        var s = V(i, e.props.localization, e.props.language);
                        n = n || 'name' in s.localizedKeys;
                        var o = s.getObject();
                        (t += a + o.name), (a = ', ');
                      }),
                      { name: t, localized: n }
                    );
                  }
                  var i = [];
                  return (
                    this.props.categories.forEach(function(e) {
                      i.push(e.name);
                    }),
                    { name: i.join(', ') }
                  );
                }
              },
              {
                key: 'getRecentMessages',
                value: function() {
                  if (this.state.fetchingRecentMessages || null !== this.state.recentMessages) {
                    var e = this.state.recentMessages || [],
                      t = 0 !== e.length,
                      a = [eu.a.recent_messages],
                      n = 'Recent Messages';
                    t ||
                      this.state.fetchingRecentMessages ||
                      ((n = 'No Recent Messages'), a.push(eu.a.no_recents));
                    var i = document.getElementById('canvas-container'),
                      s = 0,
                      o = 0;
                    if (i) {
                      var r = i.getBoundingClientRect().top + window.scrollY,
                        l = this.ele.getBoundingClientRect();
                      (s = l.left + window.scrollX + 5), (o = l.top + window.scrollY - r + 30);
                    }
                    return k.createElement(
                      nu,
                      { id: 'activity_recent_messages' },
                      k.createElement(
                        'div',
                        {
                          className: a.join(' '),
                          style: { position: 'absolute', left: s, top: o }
                        },
                        k.createElement('div', { className: eu.a.title }, n),
                        e.map(function(e, t) {
                          return k.createElement(
                            'div',
                            { key: 'recent_' + t, className: eu.a.message },
                            k.createElement('div', { className: eu.a.text }, e.text),
                            k.createElement(
                              'div',
                              { className: eu.a.sent },
                              Zl.utc(e.sent).fromNow()
                            )
                          );
                        }),
                        null === this.state.recentMessages
                          ? k.createElement(
                              'div',
                              { className: eu.a.loading },
                              k.createElement(Jl, { size: 10, units: 6, color: '#999999' })
                            )
                          : null
                      )
                    );
                  }
                  return null;
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this,
                    a = this.getName(),
                    n = a.name,
                    i = a.localized,
                    s = n ? eu.a.name : '',
                    o = this.props.exit.destination_uuid ? ' jtk-connected' : '',
                    r = iu(eu.a.endpoint, o),
                    l =
                      this.state.confirmDelete &&
                      this.props.exit.hasOwnProperty('destination_uuid'),
                    u =
                      l && this.context.config.mutable
                        ? k.createElement(
                            'div',
                            Object.assign(
                              { className: eu.a.confirm_x + ' fe-x' },
                              q(this.onDisconnect, function() {
                                return t.props.dragging;
                              })
                            )
                          )
                        : null,
                    c = iu(
                      ((e = {}),
                      Object(S.a)(e, eu.a.exit, !0),
                      Object(S.a)(e, 'plumb-exit', !0),
                      Object(S.a)(e, eu.a.translating, this.props.translating),
                      Object(S.a)(e, eu.a.unnamed_exit, null == n),
                      Object(S.a)(e, eu.a.missing_localization, n && this.props.translating && !i),
                      Object(S.a)(e, eu.a.confirm_delete, l),
                      e)
                    ),
                    d = this.getSegmentCount(),
                    p = this.getRecentMessages(),
                    h = this.context.config.mutable
                      ? q(
                          this.handleClick,
                          function() {
                            return t.props.dragging;
                          },
                          this.handleMouseDown
                        )
                      : {};
                  return k.createElement(
                    'div',
                    { className: c },
                    n ? k.createElement('div', { className: s }, n) : null,
                    k.createElement(
                      'div',
                      Object.assign(
                        {
                          ref: function(e) {
                            return (t.ele = e);
                          }
                        },
                        h,
                        {
                          id: ''.concat(this.props.node.uuid, ':').concat(this.props.exit.uuid),
                          className: r
                        }
                      ),
                      u
                    ),
                    d,
                    p,
                    K(this.state.showDragHelper)(k.createElement(Kl, null))
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent);
      su.contextTypes = { config: bt };
      var ou = Object(Fl.b)(
          function(e, t) {
            var a = e.flowContext.definition.localization,
              n = e.editorState,
              i = n.translating,
              s = n.language,
              o = n.dragActive,
              r = n.activity,
              l = null,
              u = Wl(t.exit);
            return (
              u in (r.recentMessages || {}) && (l = r.recentMessages[u]),
              {
                dragging: o,
                segmentCount: r.segments[Wl(t.exit)] || 0,
                translating: i,
                language: s,
                localization: a,
                recentMessages: l
              }
            );
          },
          function(e) {
            return Object(ve.bindActionCreators)({ disconnectExit: qr }, e);
          }
        )(su),
        ru = a(151),
        lu = a(35),
        uu = a.n(lu),
        cu = St.a.bind(Object(y.a)(Object(y.a)({}, ce.a), uu.a)),
        du = [],
        pu = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e, n) {
            var i;
            return (
              Object(m.a)(this, a),
              ((i = t.call(this, e)).ele = void 0),
              (i.firstAction = void 0),
              (i.clicking = void 0),
              (i.events = void 0),
              Object(b.react)(Object(g.a)(i), { include: [/Ref$/, /^on/, /^get/, /^handle/] }),
              (i.events = n.config.mutable ? q(i.onClick, i.handleShouldCancelClick) : {}),
              i
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleShouldCancelClick',
                value: function() {
                  return this.props.selected;
                }
              },
              {
                key: 'eleRef',
                value: function(e) {
                  return (this.ele = e);
                }
              },
              {
                key: 'getGhostListener',
                value: function() {
                  var e = this;
                  return function(t) {
                    if (e.ele) {
                      var a = e.ele.parentElement;
                      e.ele.parentElement.parentElement && (a = e.ele.parentElement.parentElement);
                      var n = a.getBoundingClientRect(),
                        i = e.ele.getBoundingClientRect().width,
                        s = t.pageX - i / 2 - 15 - n.left,
                        o = t.pageY - n.top - window.scrollY,
                        r = e.ele.style;
                      (r.left = s + 'px'),
                        (r.top = o + 'px'),
                        (r.visibility = document.querySelector('.plumb-drop-hover')
                          ? 'hidden'
                          : 'visible');
                    }
                  };
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  if (
                    (this.props.plumberMakeTarget(this.props.renderNode.node.uuid),
                    this.props.ghost)
                  ) {
                    var e = this.getGhostListener();
                    (window.ghostListener = e), document.addEventListener('mousemove', e);
                  }
                }
              },
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  if (!this.props.ghost)
                    try {
                      this.props.plumberRecalculate(this.props.renderNode.node.uuid);
                      var t,
                        a = Object(C.a)(this.props.renderNode.node.exits);
                      try {
                        for (a.s(); !(t = a.n()).done; ) {
                          var n = t.value;
                          this.props.plumberRecalculate(
                            this.props.renderNode.node.uuid + ':' + n.uuid
                          );
                        }
                      } catch (i) {
                        a.e(i);
                      } finally {
                        a.f();
                      }
                    } catch (s) {}
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  this.props.plumberRemove(this.props.renderNode.node.uuid);
                }
              },
              {
                key: 'handleUUIDClicked',
                value: function(e) {
                  var t = window.getSelection(),
                    a = document.createRange();
                  a.selectNodeContents(e.currentTarget),
                    t.removeAllRanges(),
                    t.addRange(a),
                    document.execCommand('copy'),
                    t.removeAllRanges(),
                    console.log(e.currentTarget.textContent + ' copied to clipboard.');
                }
              },
              {
                key: 'handleAddToNode',
                value: function() {
                  this.props.onAddToNode(this.props.renderNode.node);
                }
              },
              {
                key: 'onClick',
                value: function(e) {
                  this.props.onOpenNodeEditor({ originalNode: this.props.renderNode });
                }
              },
              {
                key: 'handleRemoval',
                value: function(e) {
                  e.preventDefault(),
                    e.stopPropagation(),
                    this.props.removeNode(this.props.renderNode.node);
                }
              },
              {
                key: 'getExits',
                value: function() {
                  var e = this;
                  return this.props.renderNode.node.exits
                    ? this.props.renderNode.node.exits.map(function(t, a) {
                        return k.createElement(ou, {
                          key: t.uuid,
                          node: e.props.renderNode.node,
                          categories: ji(e.props.renderNode, t),
                          exit: t,
                          showDragHelper: e.props.onlyNode && 0 === a,
                          plumberMakeSource: e.props.plumberMakeSource,
                          plumberRemove: e.props.plumberRemove,
                          plumberConnectExit: e.props.plumberConnectExit,
                          plumberUpdateClass: e.props.plumberUpdateClass
                        });
                      })
                    : [];
                }
              },
              {
                key: 'isSelected',
                value: function() {
                  return this.props.selected;
                }
              },
              {
                key: 'isStartNodeVisible',
                value: function() {
                  return this.props.startingNode;
                }
              },
              {
                key: 'renderDebug',
                value: function() {
                  if (this.props.debug && this.props.debug.showUUIDs)
                    return k.createElement(
                      'span',
                      {
                        id: 'uuid-'.concat(this.props.renderNode.node.uuid),
                        onClick: this.handleUUIDClicked,
                        className: uu.a.uuid
                      },
                      this.props.renderNode.node.uuid
                    );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t,
                    a = this,
                    n = [],
                    i = null;
                  if (this.props.renderNode.node.actions) {
                    var s = {
                      ref: (function(e) {
                        function t(t) {
                          return e.apply(this, arguments);
                        }
                        return (
                          (t.toString = function() {
                            return e.toString();
                          }),
                          t
                        );
                      })(function(e) {
                        return (a.firstAction = e);
                      })
                    };
                    ((t = this.props.renderNode),
                    mr(t) === Ee.split_by_subflow
                      ? t.node.actions.filter(function(e) {
                          return e.type !== Ee.set_run_result;
                        })
                      : t.node.actions).forEach(function(e, t) {
                      var i = hr(e.type),
                        o = (function(e, t, a) {
                          return a.filter(function(a) {
                            return a.node_uuid === e && a.action_uuid === t.uuid;
                          });
                        })(a.props.nodeUUID, e, a.props.issues);
                      if (i.hasOwnProperty('component') && i.component) {
                        var r = i.component;
                        i.massageForDisplay && i.massageForDisplay(e),
                          n.push(
                            k.createElement(
                              Vl,
                              Object.assign({}, s, {
                                key: e.uuid,
                                renderNode: a.props.renderNode,
                                selected: a.props.selected,
                                action: e,
                                first: 0 === t,
                                issues: o,
                                render: function(e) {
                                  return k.createElement(
                                    r,
                                    Object.assign({}, e, {
                                      languages: a.props.languages,
                                      issues: o
                                    })
                                  );
                                }
                              })
                            )
                          );
                      }
                      s = {};
                    }),
                      (i =
                        n.length > 0
                          ? k.createElement(
                              ru.a,
                              {
                                enterAnimation: 'fade',
                                leaveAnimation: 'fade',
                                duration: 300,
                                easing: 'ease-out'
                              },
                              n
                            )
                          : null);
                  }
                  var o = null,
                    r = null,
                    l = null,
                    u = mr(this.props.renderNode);
                  if (u !== Ee.execute_actions) {
                    var c = hr(u),
                      d = c.name;
                    wi(this.props.renderNode.node) &&
                      u === Ee.split_by_contact_field &&
                      this.props.renderNode.ui.config.operand.name &&
                      (d = 'Split by '.concat(this.props.renderNode.ui.config.operand.name));
                    var p = Ti(this.props.renderNode.node);
                    p &&
                      (l = k.createElement(
                        'div',
                        Object.assign({}, this.events, { className: uu.a.save_result }),
                        k.createElement('div', { className: uu.a.save_as }, 'Save as '),
                        k.createElement('div', { className: uu.a.result_name }, p)
                      )),
                      null !== d ||
                        (u !== Ee.split_by_run_result && u !== Ee.split_by_run_result_delimited) ||
                        (d = 'Split by '.concat(
                          this.props.results[this.props.renderNode.ui.config.operand.id].name
                        )),
                      null === d && (d = c.name),
                      (this.props.renderNode.node.actions &&
                        this.props.renderNode.node.actions.length) ||
                        (o = k.createElement(
                          'div',
                          { style: { position: 'relative' } },
                          k.createElement(
                            'div',
                            this.events,
                            k.createElement(Pl, {
                              __className:
                                ce.a[
                                  Za(this.props.issues, this.props.translating, this.props.language)
                                    ? 'missing'
                                    : c.type
                                ],
                              showRemoval: !this.props.translating,
                              onRemoval: this.handleRemoval,
                              shouldCancelClick: this.handleShouldCancelClick,
                              title: d
                            })
                          )
                        ));
                  } else
                    !this.props.translating &&
                      this.context.config.mutable &&
                      (r = k.createElement(
                        'div',
                        Object.assign(
                          { className: uu.a.add },
                          q(this.handleAddToNode, this.handleShouldCancelClick)
                        ),
                        k.createElement('span', { className: 'fe-add' })
                      ));
                  var h = this.getExits(),
                    m = cu(
                      ((e = { 'plumb-drag': !0 }),
                      Object(S.a)(e, uu.a.ghost, this.props.ghost),
                      Object(S.a)(e, uu.a.flow_start, this.isStartNodeVisible()),
                      Object(S.a)(e, uu.a.selected, this.isSelected()),
                      Object(S.a)(e, uu.a.immutable, !this.context.config.mutable),
                      e)
                    ),
                    _ = this.renderDebug(),
                    g = k.createElement(
                      'div',
                      { className: uu.a.node },
                      this.isStartNodeVisible()
                        ? k.createElement(
                            'div',
                            { className: uu.a.flow_start_message },
                            'Flow Start'
                          )
                        : null,
                      _,
                      k.createElement(Rl, {
                        count: this.props.activeCount,
                        containerStyle: uu.a.active,
                        countStyle: '',
                        keepVisible: this.props.simulating,
                        onClick: function() {
                          a.context.config.onActivityClicked &&
                            a.context.config.onActivityClicked(
                              a.props.nodeUUID,
                              a.props.activeCount
                            );
                        }
                      }),
                      k.createElement('div', { className: uu.a.cropped }, o, i, l),
                      k.createElement(
                        'div',
                        { className: ''.concat(uu.a.exit_table) },
                        k.createElement(
                          'div',
                          Object.assign({ className: uu.a.exits }, this.events),
                          h
                        ),
                        r
                      )
                    );
                  return k.createElement(
                    'div',
                    {
                      id: this.props.renderNode.node.uuid,
                      className: ''.concat(uu.a.node_container, ' ').concat(m),
                      ref: this.eleRef
                    },
                    !this.props.scrollToAction &&
                      this.props.scrollToNode &&
                      this.props.scrollToNode === this.props.nodeUUID
                      ? k.createElement(zl, { pulseAfterScroll: !0 }, g)
                      : g
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent);
      pu.contextTypes = { config: bt };
      var hu,
        mu = Object(Fl.b)(
          function(e, t) {
            var a = e.flowContext,
              n = a.nodes,
              i = a.issues,
              s = a.assetStore,
              o = s.results.items,
              r = s.languages.items,
              l = e.editorState,
              u = l.translating,
              c = l.debug,
              d = l.ghostNode,
              p = l.simulating,
              h = l.activity,
              m = l.language,
              _ = l.scrollToAction,
              g = l.scrollToNode,
              v = null;
            if (
              (d && d.node.uuid === t.nodeUUID ? (v = d) : t.nodeUUID in n && (v = n[t.nodeUUID]),
              !v)
            )
              throw Error("Couldn't find node for " + t.nodeUUID);
            var f = h.nodes[t.nodeUUID] || 0,
              y = g && g === t.nodeUUID ? g : null,
              b = _ && y ? _ : null;
            return {
              issues: (i || {})[t.nodeUUID] || du,
              results: o,
              language: m,
              languages: r,
              activeCount: f,
              translating: u,
              debug: c,
              renderNode: v,
              simulating: p,
              scrollToNode: y,
              scrollToAction: b
            };
          },
          function(e) {
            return Object(ve.bindActionCreators)(
              { onAddToNode: Qr, onOpenNodeEditor: al, removeNode: Hr, mergeEditorState: Dr },
              e
            );
          },
          null,
          { forwardRef: !0 }
        )(pu),
        _u = a(152),
        gu = a.n(_u),
        vu = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a() {
            return Object(m.a)(this, a), t.apply(this, arguments);
          }
          return (
            Object(_.a)(a, [
              {
                key: 'render',
                value: function() {
                  var e = {
                    content: {
                      marginLeft: 'auto',
                      marginRight: 'auto',
                      marginTop: '40px',
                      bottom: 'initial',
                      padding: 'none',
                      borderRadius: 'none',
                      outline: 'none',
                      width: this.props.width ? this.props.width : '700px',
                      border: 'none'
                    }
                  };
                  return k.createElement(
                    gu.a,
                    {
                      ariaHideApp: !1,
                      isOpen: this.props.show,
                      onAfterOpen: this.props.onModalOpen,
                      onRequestClose: this.props.onClose,
                      style: e,
                      shouldCloseOnOverlayClick: !1,
                      contentLabel: 'Modal'
                    },
                    this.props.children
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        fu = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^close/, /^update/, /^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'updateLocalizations',
                value: function(e, t) {
                  this.props.onUpdateLocalizations(e, t);
                }
              },
              {
                key: 'close',
                value: function(e) {
                  if (e) {
                    var t = pi(this.props.settings.originalNode);
                    if (t) {
                      var a,
                        n = this.props.nodes[t.nodeUUID],
                        i = Object(C.a)(n.node.exits);
                      try {
                        for (i.s(); !(a = i.n()).done; ) {
                          var s = a.value;
                          if (s.uuid === t.exitUUID) {
                            this.props.plumberConnectExit(n.node, s);
                            break;
                          }
                        }
                      } catch (o) {
                        i.e(o);
                      } finally {
                        i.f();
                      }
                    }
                  }
                  this.props.resetNodeEditingState(), this.props.updateUserAddingAction(!1);
                }
              },
              {
                key: 'updateAction',
                value: function(e, t) {
                  this.props.onUpdateAction(e, t);
                }
              },
              {
                key: 'updateRouter',
                value: function(e) {
                  this.props.onUpdateRouter(e);
                }
              },
              {
                key: 'handleAddAsset',
                value: function(e, t) {
                  this.props.addAsset(e, t);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this;
                  if (this.props.settings) {
                    var t = this.props.typeConfig;
                    if (this.props.translating) {
                      var a = t.localization;
                      if (a) {
                        var n = {
                          updateLocalizations: this.updateLocalizations,
                          nodeSettings: this.props.settings,
                          onClose: this.close,
                          language: this.props.language,
                          helpArticles: this.props.helpArticles,
                          issues: this.props.issues.filter(function(t) {
                            return t.language === e.props.language.id;
                          })
                        };
                        return k.createElement(
                          vu,
                          { width: '600px', show: !0 },
                          k.createElement(a, Object(y.a)({}, n))
                        );
                      }
                    }
                    var i = t.form,
                      s = {
                        assetStore: this.props.assetStore,
                        completionSchema: this.props.completionSchema,
                        addAsset: this.handleAddAsset,
                        updateAction: this.updateAction,
                        updateRouter: this.updateRouter,
                        nodeSettings: this.props.settings,
                        helpArticles: this.props.helpArticles,
                        issues: this.props.issues.filter(function(e) {
                          return !e.language;
                        }),
                        typeConfig: this.props.typeConfig,
                        onTypeChange: this.props.handleTypeConfigChange,
                        onClose: this.close
                      };
                    return k.createElement(
                      vu,
                      { width: '600px', show: !0 },
                      k.createElement(i, Object(y.a)({}, s))
                    );
                  }
                  return null;
                }
              }
            ]),
            a
          );
        })(k.Component),
        yu = Object(Fl.b)(
          function(e) {
            var t = e.flowContext,
              a = t.definition,
              n = t.nodes,
              i = t.assetStore,
              s = t.issues,
              o = e.editorState,
              r = o.language,
              l = o.translating,
              u = o.completionSchema,
              c = e.nodeEditor,
              d = c.typeConfig,
              p = c.settings;
            return {
              issues: (s[p.originalNode.node.uuid] || []).filter(function(e) {
                return !p.originalAction || p.originalAction.uuid === e.action_uuid;
              }),
              language: r,
              definition: a,
              nodes: n,
              translating: l,
              typeConfig: d,
              settings: p,
              assetStore: i,
              completionSchema: u
            };
          },
          function(e) {
            return Object(ve.bindActionCreators)(
              {
                addAsset: Mr,
                resetNodeEditingState: Yr,
                mergeEditorState: Dr,
                handleTypeConfigChange: Wr,
                onUpdateLocalizations: zr,
                onUpdateAction: Xr,
                onUpdateRouter: tl,
                updateUserAddingAction: ta
              },
              e
            );
          }
        )(fu),
        bu =
          ($(),
          function() {
            var e = new Date(),
              t = e.getMinutes(),
              a = '' + t;
            return t < 10 && (a = '0' + t), Math.abs(12 - e.getHours()) + ':' + a;
          }),
        ku = function(e) {
          return !!['msg_created', 'msg_received', 'ivr_created'].find(function(t) {
            return t === e.type;
          });
        },
        Eu = function(e) {
          return !!['msg_created', 'ivr_created'].find(function(t) {
            return t === e.type;
          });
        },
        Cu = a(23),
        wu = a.n(Cu),
        Su = a(125);
      !(function(e) {
        (e[(e.MT = 0)] = 'MT'), (e[(e.MO = 1)] = 'MO');
      })(hu || (hu = {}));
      var Nu,
        Ou = function(e) {
          return e === hu.MO ? wu.a.msg_received : wu.a.send_msg;
        },
        xu = function(e) {
          return k.createElement(
            'div',
            { className: wu.a.error },
            k.createElement('span', null, 'Error: ', e)
          );
        },
        ju = function(e) {
          return k.createElement(
            'div',
            { key: e, className: wu.a.info },
            k.createElement('span', { dangerouslySetInnerHTML: { __html: e } })
          );
        },
        Tu = function(e, t, a) {
          var n = t || [];
          return k.createElement(
            'div',
            { className: Ou(a) },
            n.map(function(t) {
              return k.createElement(
                'div',
                { key: e + t },
                (function(e) {
                  var t = e.indexOf(':');
                  if (t > -1) {
                    var a = e.substr(0, t),
                      n = e.substr(t + 1);
                    if (a.startsWith('audio'))
                      return k.createElement(
                        'div',
                        { className: wu.a.audio_attachment },
                        k.createElement(
                          'div',
                          { className: wu.a.media_player },
                          k.createElement(hn, { url: n })
                        ),
                        k.createElement('div', { className: wu.a.audio_text }, 'Audio Recording')
                      );
                    if (a.startsWith('image'))
                      return k.createElement('img', { src: n, alt: 'Attachment' });
                    if (a.startsWith('application'))
                      return k.createElement(
                        'div',
                        {
                          onClick: function() {
                            window.open(n);
                          },
                          style: {
                            cursor: 'pointer',
                            textDecoration: 'none',
                            padding: '10px 12px',
                            background: '#e6e6e6',
                            color: '#666'
                          }
                        },
                        k.createElement(
                          'div',
                          { style: { display: 'flex', alignItems: 'center' } },
                          k.createElement('div', {
                            className: 'fe-document-file-pdf',
                            style: { textDecoration: 'none', fontSize: '20px' }
                          }),
                          k.createElement(
                            'div',
                            { style: { marginLeft: '5px', lineHeight: '16px' } },
                            Ft.t('document', 'Document')
                          )
                        )
                      );
                    if (a.startsWith('geo'))
                      return k.createElement('img', { src: Su, alt: 'Attachment' });
                    if (a.startsWith('video'))
                      return k.createElement(
                        'div',
                        { className: wu.a.video_attachment },
                        k.createElement('video', { controls: !0, src: n })
                      );
                  }
                  return null;
                })(t)
              );
            }),
            e
              ? e
                  .trim()
                  .split('\n')
                  .map(function(e, t) {
                    return k.createElement('div', { key: $(), className: wu.a.msg_text }, e);
                  })
              : null
          );
        },
        Au = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = { detailsVisible: !1 }),
              (n.showDetails = n.showDetails.bind(Object(g.a)(n))),
              (n.getButtons = n.getButtons.bind(Object(g.a)(n))),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'getButtons',
                value: function() {
                  var e = this;
                  return {
                    primary: {
                      name: 'Ok',
                      onClick: function() {
                        e.setState({ detailsVisible: !1 });
                      }
                    }
                  };
                }
              },
              {
                key: 'showDetails',
                value: function() {
                  this.setState({ detailsVisible: !0 });
                }
              },
              {
                key: 'renderGroupsChanged',
                value: function() {
                  var e = [];
                  if (this.props.groups_added) {
                    var t = Ft.t('simulator.added_to_group', 'Added to ');
                    e.push(
                      t +
                        this.renderValueList(
                          this.props.groups_added.map(function(e) {
                            return e.name;
                          })
                        )
                    );
                  }
                  if (this.props.groups_removed) {
                    var a = Ft.t('simulator.removed_from_group', 'Removed from ');
                    e.push(
                      a +
                        this.renderValueList(
                          this.props.groups_removed.map(function(e) {
                            return e.name;
                          })
                        )
                    );
                  }
                  return ju(e.join('. '));
                }
              },
              {
                key: 'renderLabelsAdded',
                value: function() {
                  var e = Ft.t('simulator.input_labels_added', 'Message labeled with ');
                  return ju(
                    e +
                      this.renderValueList(
                        this.props.labels.map(function(e) {
                          return e.name;
                        })
                      )
                  );
                }
              },
              {
                key: 'renderEmailSent',
                value: function() {
                  var e = this.props.to || this.props.addresses;
                  return this.renderClickable(
                    k.createElement(
                      'div',
                      { className: wu.a.info + ' ' + wu.a.email },
                      k.createElement(
                        Pe.a,
                        {
                          i18nKey: 'simulator.sent_email.summary',
                          values: {
                            recipients: this.renderValueList(e),
                            subject: this.props.subject
                          }
                        },
                        'Sent email to [[recipients]] with subject "[[subject]]"'
                      )
                    ),
                    k.createElement(
                      me,
                      {
                        title: Ft.t('simulator.sent_email.title', 'Email Details'),
                        headerClass: Ee.send_email,
                        buttons: this.getButtons(),
                        noPadding: !0
                      },
                      k.createElement(
                        'div',
                        { className: wu.a.email_details },
                        k.createElement(
                          'div',
                          { className: wu.a.to },
                          Ft.t('email.to', 'To'),
                          ': ',
                          this.renderValueList(e)
                        ),
                        k.createElement(
                          'div',
                          { className: wu.a.subject },
                          Ft.t('email.subject', 'Subject'),
                          ': ',
                          this.props.subject
                        ),
                        k.createElement('div', { className: wu.a.body }, this.props.body)
                      )
                    )
                  );
                }
              },
              {
                key: 'renderHTTPRequest',
                value: function(e, t) {
                  return this.renderClickable(
                    k.createElement(
                      'div',
                      { className: wu.a.info + ' ' + wu.a.webhook },
                      k.createElement('span', null, 'Called ', t.url)
                    ),
                    k.createElement(
                      me,
                      {
                        title: Ft.t('simulator.httplog_dialog', 'HTTP Request Details'),
                        headerClass: e,
                        buttons: this.getButtons(),
                        noPadding: !0
                      },
                      k.createElement(
                        'div',
                        { className: wu.a.webhook_details },
                        k.createElement('div', { className: '' }, t.request),
                        k.createElement('div', { className: wu.a.response }, t.response)
                      )
                    )
                  );
                }
              },
              {
                key: 'renderWebhook',
                value: function(e) {
                  var t = this;
                  return this.props.http_logs
                    ? k.createElement(
                        k.Fragment,
                        null,
                        this.props.http_logs.map(function(a) {
                          return t.renderHTTPRequest(e, a);
                        })
                      )
                    : this.props.url
                    ? this.renderHTTPRequest(e, this.props)
                    : void 0;
                }
              },
              {
                key: 'renderClickable',
                value: function(e, t) {
                  return k.createElement(
                    'div',
                    { key: this.props.step_uuid },
                    k.createElement(
                      'div',
                      { className: wu.a.has_detail, onClick: this.showDetails },
                      e
                    ),
                    k.createElement(
                      vu,
                      { show: this.state.detailsVisible },
                      k.createElement('div', { className: wu.a.event_viewer }, t)
                    )
                  );
                }
              },
              {
                key: 'renderClassification',
                value: function() {
                  var e = this;
                  return k.createElement(
                    'table',
                    { className: wu.a.classification },
                    k.createElement(
                      'tbody',
                      null,
                      (this.props.extra.intents || []).map(function(e) {
                        return k.createElement(
                          'tr',
                          { key: e.name + e.confidence },
                          k.createElement('td', null, e.name),
                          k.createElement('td', null, 'intent'),
                          k.createElement('td', null, e.confidence.toFixed(3))
                        );
                      }),
                      Object.keys(this.props.extra.entities || []).map(function(t) {
                        return e.props.extra.entities[t].map(function(e) {
                          return t !== e.value
                            ? k.createElement(
                                'tr',
                                { key: e.value + e.confidence },
                                k.createElement('td', null, e.value),
                                k.createElement('td', null, t),
                                k.createElement('td', null, e.confidence.toFixed(3))
                              )
                            : null;
                        });
                      })
                    )
                  );
                }
              },
              {
                key: 'renderLogEvent',
                value: function() {
                  if (this.props.extra && this.props.extra.intents)
                    return this.renderClassification();
                  switch (this.props.type) {
                    case 'msg_received':
                      return Tu(this.props.msg.text, this.props.msg.attachments, hu.MO);
                    case 'msg_created':
                    case 'ivr_created':
                      return Tu(this.props.msg.text, this.props.msg.attachments, hu.MT);
                    case 'error':
                    case 'failure':
                      return xu(this.props.text);
                    case 'msg_wait':
                      return ju(Ft.t('simulator.msg_wait', 'Waiting for reply'));
                    case 'contact_groups_changed':
                      return this.renderGroupsChanged();
                    case 'contact_urns_changed':
                      return ju('Added a URN for the contact');
                    case 'contact_field_changed':
                      var e = this.getValue(this.props.value);
                      return ju(
                        '' !== e
                          ? Ft.t(
                              'simulator.contact_field_changed',
                              'Set contact "[[field]]" to "[[value]]"',
                              {
                                field: this.props.field.name,
                                value: this.getValue(this.props.value)
                              }
                            )
                          : Ft.t('simulator.contact_field_cleared', 'Cleared contact "[[field]]"', {
                              field: this.props.field.name
                            })
                      );
                    case 'run_result_changed':
                      return ju(
                        Ft.t(
                          'simulator.run_result_changed',
                          'Set result "[[field]]" to "[[value]]"',
                          { field: this.props.name, value: this.getValue(this.props.value) }
                        )
                      );
                    case 'contact_name_changed':
                      return ju(
                        Ft.t('simulator.contact_name_changed', 'Set contact name to "[[name]]"', {
                          name: this.props.name
                        })
                      );
                    case 'email_created':
                    case 'email_sent':
                      return this.renderEmailSent();
                    case 'broadcast_created':
                      return Tu(
                        this.props.translations[this.props.base_language].text,
                        this.props.msg ? this.props.msg.attachments : [],
                        hu.MT
                      );
                    case 'resthook_called':
                      return ju(
                        Ft.t('simulator.resthook_called', 'Triggered flow event "[[resthook]]"', {
                          resthook: this.props.resthook
                        })
                      );
                    case 'service_called':
                      if ('classifier' === this.props.service)
                        return this.renderWebhook(Ee.call_classifier);
                      break;
                    case 'webhook_called':
                      return this.renderWebhook(Ee.call_webhook);
                    case 'flow_entered':
                      return ju(
                        Ft.t('simulator.flow_entered', 'Entered flow "[[flow]]"', {
                          flow: this.props.flow.name
                        })
                      );
                    case 'session_triggered':
                      return ju(
                        Ft.t('simulator.session_triggered', 'Started somebody else in "[[flow]]"', {
                          flow: this.props.flow.name
                        })
                      );
                    case 'contact_language_changed':
                      return ju(
                        Ft.t(
                          'simulator.contact_language_changed',
                          'Set preferred language to "[[language]]"',
                          { language: this.props.language }
                        )
                      );
                    case 'contact_status_changed':
                      return ju(
                        Ft.t('simulator.contact_status_changed', 'Set status to "[[status]]"', {
                          status: this.props.status
                        })
                      );
                    case 'info':
                      return ju(this.props.text);
                    case 'input_labels_added':
                      return this.renderLabelsAdded();
                    case 'environment_refreshed':
                      return null;
                    case 'ticket_opened':
                      return ju(
                        Ft.t(
                          'simulator.ticket_opened',
                          'Ticket opened with subject "[[subject]]"',
                          { subject: this.props.subject }
                        )
                      );
                    case 'airtime_transferred':
                      var t = this.props;
                      return k.createElement(
                        k.Fragment,
                        null,
                        this.renderWebhook(Ee.transfer_airtime),
                        ju(
                          Ft.t(
                            'simulator.airtime_transferred',
                            'Transferred [[amount]] [[currency]] to [[recipient]]',
                            {
                              amount: t.actual_amount,
                              currency: t.currency,
                              recipient: ((a = t.recipient), a.split(':')[1])
                            }
                          )
                        )
                      );
                  }
                  var a;
                  return console.log('Simulator render missing', this.props), null;
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement('div', { className: wu.a.evt }, this.renderLogEvent());
                }
              },
              {
                key: 'renderValueList',
                value: function(e) {
                  var t = '',
                    a = '';
                  return (
                    e.forEach(function(e) {
                      (t += ''.concat(a, '"').concat(e, '"')), (a = ', ');
                    }),
                    t
                  );
                }
              },
              {
                key: 'getValue',
                value: function(e) {
                  return e ? ('string' === typeof e ? e : e.text) : '';
                }
              }
            ]),
            a
          );
        })(k.Component),
        Ru = a(33),
        Uu = a.n(Ru),
        Du = St.a.bind(Uu.a),
        Pu = { 'parent.run': !0, 'child.run': !0, legacy_extra: !0 },
        Fu = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = {
                opened: {},
                expression: null,
                messageVisible: !1,
                showEmpty: !1,
                message: null
              }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleHide',
                value: function() {
                  this.props.onClose();
                }
              },
              {
                key: 'isOpen',
                value: function(e) {
                  var t,
                    a = this.state.opened,
                    n = Object(C.a)(e);
                  try {
                    for (n.s(); !(t = n.n()).done; ) {
                      if (!(a = a[t.value])) return !1;
                    }
                  } catch (i) {
                    n.e(i);
                  } finally {
                    n.f();
                  }
                  return !0;
                }
              },
              {
                key: 'handleCopyPath',
                value: function(e, t) {
                  var a,
                    n = this,
                    i = '@' + [].concat(Object(ge.a)(t), [e]).join('.');
                  (a = i),
                    navigator.clipboard.writeText(a),
                    this.setState({ expression: i, messageVisible: !0, message: null }, function() {
                      window.setTimeout(function() {
                        n.state.expression === i && n.setState({ messageVisible: !1 });
                      }, 1500);
                    });
                }
              },
              {
                key: 'handleToggleHide',
                value: function() {
                  var e = this,
                    t = this.state.showEmpty
                      ? Ft.t('context_explorer.hide_empty', 'Showing keys with values')
                      : Ft.t('context_explorer.show_empty', 'Showing all keys');
                  this.setState(
                    {
                      showEmpty: !this.state.showEmpty,
                      message: t,
                      expression: null,
                      messageVisible: !0
                    },
                    function() {
                      window.setTimeout(function() {
                        e.state.message === t && e.setState({ messageVisible: !1 });
                      }, 1e3);
                    }
                  );
                }
              },
              {
                key: 'handlePathClick',
                value: function(e, t) {
                  for (
                    var a = Object(y.a)({}, this.state.opened),
                      n = [].concat(Object(ge.a)(t), [e]),
                      i = a;
                    n.length > 0;

                  ) {
                    var s = n.shift(),
                      o = !1;
                    if ((0 === n.length && i[s] && (o = !0), o)) delete i[s];
                    else {
                      var r = i[s] || {};
                      i[s] = r;
                    }
                    i = i[s];
                  }
                  this.setState({ opened: a });
                }
              },
              {
                key: 'renderContextNode',
                value: function(e, t, a) {
                  var n,
                    i,
                    s = this;
                  if (!e) return null;
                  var o = [].concat(Object(ge.a)(a), [e]);
                  if (Pu[o.join('.')]) return null;
                  var r = typeof t,
                    l = 'object' !== r ? t : '',
                    u = t && 'object' === r && Object.keys(t).length > 0;
                  t &&
                    t.hasOwnProperty('__default__') &&
                    ((l = t.__default__), 1 === Object.keys(t).length && (u = !1));
                  var c = this.isOpen(o),
                    d = Du(
                      ((n = {}),
                      Object(S.a)(n, Uu.a.arrow_right, !0),
                      Object(S.a)(n, Uu.a.has_children, u),
                      Object(S.a)(n, Uu.a.open, c),
                      n)
                    ),
                    p = Du(
                      ((i = {}),
                      Object(S.a)(i, Uu.a.key, !0),
                      Object(S.a)(i, Uu.a.has_children, u),
                      i)
                    ),
                    h = Array.isArray(t) ? '['.concat(t.length, ']') : null;
                  return k.createElement(
                    'div',
                    { key: e + a.length },
                    k.createElement(
                      'div',
                      {
                        className: Uu.a.row,
                        style: { marginLeft: 10 * a.length + 'px' },
                        onClick: function(t) {
                          t.shiftKey ? s.handleCopyPath(e, a) : u && s.handlePathClick(e, a);
                        }
                      },
                      k.createElement('div', { className: d }, '\u203a'),
                      k.createElement(
                        'div',
                        { className: p },
                        e,
                        k.createElement('div', { className: Uu.a.key_summary }, h),
                        k.createElement('div', {
                          className: Uu.a.clipboard + ' fe-clipboard-empty',
                          onClick: function(t) {
                            t.stopPropagation(), s.handleCopyPath(e, a);
                          }
                        })
                      ),
                      k.createElement('div', { className: Uu.a.str_value }, l)
                    ),
                    c ? this.renderProperties(t, o) : null
                  );
                }
              },
              {
                key: 'renderProperties',
                value: function(e) {
                  var t = this,
                    a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
                  return e
                    ? k.createElement(
                        k.Fragment,
                        null,
                        Object.keys(e).map(function(n) {
                          return '__default__' !== n ? t.renderContextNode(n, e[n], a) : null;
                        })
                      )
                    : null;
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this,
                    a = this.props.contents;
                  this.props.contents &&
                    !this.state.showEmpty &&
                    (a = (function e(t) {
                      return (
                        'object' === typeof t &&
                          Object.keys(t).forEach(function(a) {
                            !t[a] ||
                            (1 === Object.keys(t[a]).length && t[a].hasOwnProperty('__default__'))
                              ? delete t[a]
                              : (e(t[a]),
                                null !== t[a] &&
                                  'object' === typeof t[a] &&
                                  0 === Object.keys(t[a]).length &&
                                  delete t[a]);
                          }),
                        t
                      );
                    })(JSON.parse(JSON.stringify(this.props.contents))));
                  var n = null;
                  (this.state.message || this.state.expression) &&
                    (this.state.message
                      ? (n = this.state.message)
                      : this.state.expression &&
                        (n = k.createElement(
                          Pe.a,
                          {
                            i18nKey: 'context_explorer.copied_expression',
                            values: { expression: this.state.expression }
                          },
                          'Copied ',
                          k.createElement('span', { className: Uu.a.expression }, '[[expression]]'),
                          ' to clipboard'
                        )));
                  var i = Du(
                    ((e = {}),
                    Object(S.a)(e, Uu.a.message, !0),
                    Object(S.a)(e, Uu.a.visible, this.state.messageVisible),
                    e)
                  );
                  return k.createElement(
                    'div',
                    {
                      className:
                        Uu.a.context_explorer + ' ' + (this.props.visible ? Uu.a.visible : '')
                    },
                    k.createElement('div', { className: i }, n),
                    k.createElement('div', { className: Uu.a.panel }, this.renderProperties(a)),
                    k.createElement(
                      'div',
                      { className: Uu.a.footer },
                      k.createElement(
                        'div',
                        {
                          className: Uu.a.empty_toggle,
                          onClick: function() {
                            t.handleToggleHide();
                          }
                        },
                        k.createElement('div', {
                          className: this.state.showEmpty ? 'fe-eye' : 'fe-eye-crossed'
                        })
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Iu = a(13),
        Mu = a.n(Iu),
        Lu = a(125),
        zu = 'https://s3.amazonaws.com/floweditor-assets.temba.io/simulator/sim_image_a.jpg',
        Bu = 'https://s3.amazonaws.com/floweditor-assets.temba.io/simulator/sim_image_b.jpg',
        qu = 'https://s3.amazonaws.com/floweditor-assets.temba.io/simulator/sim_image_c.jpg',
        Vu = 'https://s3.amazonaws.com/floweditor-assets.temba.io/simulator/sim_video_a.mp4',
        Hu = 'https://s3.amazonaws.com/floweditor-assets.temba.io/simulator/sim_video_a_thumb.jpg';
      !(function(e) {
        (e.audio = 'audio'),
          (e.images = 'images'),
          (e.videos = 'videos'),
          (e.location = 'location'),
          (e.digit = 'digit'),
          (e.digits = 'digits'),
          (e.quickReplies = 'quickReplies');
      })(Nu || (Nu = {}));
      var Gu = (function(e) {
        Object(v.a)(a, e);
        var t = Object(f.a)(a);
        function a(e, n) {
          var i;
          return (
            Object(m.a)(this, a),
            ((i = t.call(this, e)).debug = []),
            (i.flows = []),
            (i.currentFlow = void 0),
            (i.inputBox = void 0),
            (i.drawerEle = void 0),
            (i.bottom = void 0),
            (i.state = {
              active: !1,
              visible: !1,
              events: [],
              contact: { uuid: $(), urns: ['tel:+12065551212'], fields: {}, groups: [] },
              keypadEntry: '',
              drawerHeight: 0,
              channel: $(),
              time: bu(),
              waitingForHint: !1,
              drawerOpen: !1,
              attachmentOptionsVisible: !1,
              contextExplorerVisible: !1,
              sprinting: !1
            }),
            (i.bottomRef = i.bottomRef.bind(Object(g.a)(i))),
            (i.inputBoxRef = i.inputBoxRef.bind(Object(g.a)(i))),
            (i.currentFlow = i.props.definition.uuid),
            Object(b.react)(Object(g.a)(i), { include: [/^on/, /^get/, /^handle/] }),
            i
          );
        }
        return (
          Object(_.a)(a, [
            {
              key: 'bottomRef',
              value: function(e) {
                return (this.bottom = e);
              }
            },
            {
              key: 'inputBoxRef',
              value: function(e) {
                this.inputBox = e;
              }
            },
            {
              key: 'updateActivity',
              value: function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                if (this.state.session) {
                  var t,
                    a,
                    n = null,
                    i = {},
                    s = {},
                    o = Object(C.a)(this.state.session.runs);
                  try {
                    for (o.s(); !(a = o.n()).done; ) {
                      var r,
                        l = a.value,
                        u = null,
                        c = Object(C.a)(l.path);
                      try {
                        for (c.s(); !(r = c.n()).done; ) {
                          var d = r.value;
                          if (n) {
                            var p = n + ':' + d.node_uuid,
                              h = i[p];
                            h || (h = 0), (i[p] = ++h), p in e || (e[p] = []);
                          }
                          (n = d.exit_uuid), (u = d);
                        }
                      } catch (b) {
                        c.e(b);
                      } finally {
                        c.f();
                      }
                      if (u) {
                        var m = s[u.node_uuid];
                        if ((m || (m = 0), n)) {
                          var _ = n + ':null';
                          (i[_] = 1), _ in e || (e[_] = []);
                        }
                        'waiting' === this.state.session.status && (s[u.node_uuid] = ++m),
                          (t = l.flow_uuid);
                      }
                    }
                  } catch (b) {
                    o.e(b);
                  } finally {
                    o.f();
                  }
                  var g = (this.state.session.input && this.props.activity.recentMessages) || {};
                  for (var v in e) {
                    var f = g[v] || [];
                    (f = e[v].concat(f)), (g[v] = f);
                  }
                  var y = { segments: i, nodes: s, recentMessages: g };
                  this.props.mergeEditorState({ activity: y }),
                    t && t !== this.currentFlow && (this.currentFlow = t);
                }
              }
            },
            {
              key: 'updateEvents',
              value: function(e, t, a, n) {
                var i = this;
                if (e && e.length > 0) {
                  for (var s = [], o = null, r = !1; e.length > 0 && !r; ) {
                    var l = e.shift();
                    if (ku(l)) {
                      r = !0;
                      for (var u = '', c = '', d = t.runs.length - 1; d >= 0; d--) {
                        for (var p = t.runs[d].path, h = p.length - 1; h >= 0; h--)
                          if (p[h].uuid === l.step_uuid) {
                            (u = p[h].exit_uuid),
                              (c = p.length > h + 1 ? p[h + 1].node_uuid : null);
                            break;
                          }
                        if (u) {
                          var m = ''.concat(u, ':').concat(c),
                            _ = { sent: l.created_on, text: l.msg.text };
                          m in a ? a[m].unshift(_) : (a[m] = [_]);
                        }
                      }
                      Eu(l) && l.msg.quick_replies && (o = l.msg.quick_replies);
                    }
                    s.push(l);
                  }
                  var g = { events: Jt()(this.state.events, { $push: s }) };
                  null !== o && (g.quickReplies = o),
                    this.scrollToBottom(),
                    this.setState(g, function() {
                      0 === e.length
                        ? n()
                        : window.setTimeout(function() {
                            i.updateEvents(e, t, a, n);
                          }, 200);
                    });
                } else n();
              }
            },
            {
              key: 'updateRunContext',
              value: function(e, t) {
                var a = this,
                  n = this.state.active || (e.events && e.events.length > 0);
                this.setState({ quickReplies: [] }, function() {
                  if (!e.events || (0 === e.events.length && t)) {
                    var i = e.session.runs,
                      s = i[i.length - 1],
                      o = s.path[s.path.length - 1];
                    e.events = [
                      {
                        msg: {
                          uuid: $(),
                          urn: a.state.contact.urns[0],
                          text: t.text,
                          attachments: t.attachments
                        },
                        type: 'msg_created',
                        created_on: new Date().toISOString(),
                        step_uuid: o.uuid
                      }
                    ];
                  }
                  var r = {};
                  a.updateEvents(e.events, e.session, r, function() {
                    var t,
                      i = !1,
                      s = Object(C.a)(e.session.runs);
                    try {
                      for (s.s(); !(t = s.n()).done; ) {
                        if ('waiting' === t.value.status) {
                          i = !0;
                          break;
                        }
                      }
                    } catch (d) {
                      s.e(d);
                    } finally {
                      s.f();
                    }
                    var o = a.state.events;
                    !i &&
                      n &&
                      (o = Jt()(a.state.events, {
                        $push: [{ type: 'info', text: 'Exited flow', created_on: new Date() }]
                      }));
                    var l = e.session && e.session.wait && void 0 !== e.session.wait.hint,
                      u = null;
                    if (l)
                      switch (e.session.wait.hint.type) {
                        case 'audio':
                          u = Nu.audio;
                          break;
                        case 'video':
                          u = Nu.videos;
                          break;
                        case 'image':
                          u = Nu.images;
                          break;
                        case 'location':
                          u = Nu.location;
                          break;
                        case 'digits':
                          (u = Nu.digit), 1 !== e.session.wait.hint.count && (u = Nu.digits);
                          break;
                        default:
                          console.log('Unknown hint', e.session.wait.hint.type);
                      }
                    var c = l;
                    !u && a.hasQuickReplies() && ((u = Nu.quickReplies), (c = !0)),
                      a.setState(
                        {
                          active: i,
                          context: e.context,
                          sprinting: !1,
                          session: e.session,
                          events: o,
                          drawerOpen: c,
                          drawerType: u,
                          waitingForHint: l
                        },
                        function() {
                          a.updateActivity(r), a.handleFocusUpdate();
                        }
                      );
                  });
                });
              }
            },
            {
              key: 'startFlow',
              value: function() {
                var e = this,
                  t = new Date().toISOString(),
                  a = {
                    uuid: $(),
                    urns: ['tel:+12065551212'],
                    fields: {},
                    groups: [],
                    created_on: t
                  };
                this.props.language && (a.language = this.props.language.id),
                  this.setState(
                    { sprinting: !0, drawerOpen: !1, attachmentOptionsVisible: !1, events: [] },
                    function() {
                      var n = {
                        contact: e.state.contact,
                        flow: dl(e.props.definition, e.props.nodes, !1),
                        trigger: {
                          type: 'manual',
                          environment: {
                            date_format: 'DD-MM-YYYY',
                            time_format: 'hh:mm',
                            timezone: 'America/New_York',
                            languages: []
                          },
                          contact: a,
                          flow: { uuid: e.props.definition.uuid, name: e.props.definition.name },
                          params: {},
                          triggered_on: t
                        }
                      };
                      ze.a
                        .post(
                          it(e.context.config.endpoints.simulateStart),
                          JSON.stringify(n, null, 2)
                        )
                        .then(function(t) {
                          e.updateRunContext(t.data);
                        });
                    }
                  );
              }
            },
            {
              key: 'resume',
              value: function(e, t) {
                var a = this;
                (e || t) &&
                  ('\\debug' !== e
                    ? '\\recalc' !== e
                      ? this.setState(
                          { sprinting: !0, attachmentOptionsVisible: !1, drawerOpen: !1 },
                          function() {
                            var n = new Date().toISOString(),
                              i = {
                                text: e,
                                uuid: $(),
                                urn: a.state.session.contact.urns[0],
                                attachments: t ? [t] : []
                              },
                              s = {
                                flow: dl(a.props.definition, a.props.nodes, !1),
                                session: a.state.session,
                                resume: {
                                  type: 'msg',
                                  msg: i,
                                  resumed_on: n,
                                  contact: a.state.session.contact
                                }
                              };
                            ze.a
                              .post(
                                it(a.context.config.endpoints.simulateResume),
                                JSON.stringify(s, null, 2)
                              )
                              .then(function(e) {
                                a.updateRunContext(e.data, i);
                              })
                              .catch(function(e) {
                                e.response.status;
                                var t = Jt()(a.state.events, {
                                  $push: [
                                    {
                                      type: 'error',
                                      text:
                                        e.response.status > 499
                                          ? 'Server error, try again later'
                                          : e.response.data.error
                                    }
                                  ]
                                });
                                a.setState({ events: t });
                              });
                          }
                        )
                      : console.log('recal..')
                    : console.log(JSON.stringify(this.debug, null, 2)));
              }
            },
            {
              key: 'onReset',
              value: function(e) {
                this.startFlow();
              }
            },
            {
              key: 'scrollToBottom',
              value: function(e) {
                var t = this,
                  a = e || 0;
                this.bottom &&
                  window.setTimeout(function() {
                    t.bottom && t.bottom.scrollIntoView(!1);
                  }, a);
              }
            },
            {
              key: 'componentDidUpdate',
              value: function(e, t) {
                var a = this;
                null !== this.drawerEle &&
                  ((t.drawerHeight === this.drawerEle.clientHeight &&
                    t.drawerOpen === this.state.drawerOpen) ||
                    this.setState({ drawerHeight: this.drawerEle.clientHeight }, function() {
                      a.scrollToBottom(800);
                    }));
              }
            },
            {
              key: 'onKeyUp',
              value: function(e) {
                if ('Enter' === e.key) {
                  var t = e.target,
                    a = t.value;
                  (t.value = ''), this.resume(a);
                }
              }
            },
            {
              key: 'onToggle',
              value: function(e) {
                var t = this,
                  a = !this.state.visible;
                this.props.onToggled(a, Se.SIMULATOR),
                  this.props.mergeEditorState({ simulating: a }),
                  this.setState({ visible: a, contextExplorerVisible: !1 }, function() {
                    t.state.visible
                      ? (t.updateActivity(),
                        0 === t.state.events.length && t.startFlow(),
                        t.handleFocusUpdate())
                      : window.setTimeout(function() {
                          t.props.mergeEditorState({ activity: t.props.liveActivity });
                        }, 500);
                  });
              }
            },
            {
              key: 'handleFocusUpdate',
              value: function() {
                this.inputBox && this.inputBox.focus();
              }
            },
            {
              key: 'sendAttachment',
              value: function(e) {
                var t = this;
                this.setState({ drawerOpen: !1, attachmentOptionsVisible: !1 }, function() {
                  window.setTimeout(function() {
                    t.resume(null, e);
                  }, 200);
                });
              }
            },
            {
              key: 'getImageDrawer',
              value: function() {
                var e = this;
                return E.a.createElement(
                  'div',
                  { className: Mu.a.drawer_items },
                  E.a.createElement(
                    'div',
                    {
                      className: Mu.a.drawer_item,
                      onClick: function() {
                        e.sendAttachment('image/jpeg:' + zu);
                      }
                    },
                    E.a.createElement('img', { src: zu, alt: 'Attachment' })
                  ),
                  E.a.createElement(
                    'div',
                    {
                      className: Mu.a.drawer_item,
                      onClick: function() {
                        e.sendAttachment('image/jpeg:' + Bu);
                      }
                    },
                    E.a.createElement('img', { src: Bu, alt: 'Attachment' })
                  ),
                  E.a.createElement(
                    'div',
                    {
                      className: Mu.a.drawer_item,
                      onClick: function() {
                        e.sendAttachment('image/jpeg:' + qu);
                      }
                    },
                    E.a.createElement('img', { src: qu, alt: 'Attachment' })
                  )
                );
              }
            },
            {
              key: 'getLocationDrawer',
              value: function() {
                var e = this;
                return E.a.createElement(
                  'div',
                  {
                    className: Mu.a.map_thumb,
                    onClick: function() {
                      e.sendAttachment('geo:2.904194,-79.003418');
                    }
                  },
                  E.a.createElement('img', { src: Lu, alt: 'Attachment' })
                );
              }
            },
            {
              key: 'getAudioDrawer',
              value: function() {
                var e = this;
                return E.a.createElement(
                  'div',
                  {
                    className: Mu.a.audio_picker,
                    onClick: function() {
                      e.sendAttachment(
                        'audio/mp3:https://s3.amazonaws.com/floweditor-assets.temba.io/simulator/sim_audio_a.mp3'
                      );
                    }
                  },
                  E.a.createElement('div', { className: Mu.a.audio_icon + ' fe-mic' }),
                  E.a.createElement('div', { className: Mu.a.audio_message }, 'Upload Audio')
                );
              }
            },
            {
              key: 'getVideoDrawer',
              value: function() {
                var e = this;
                return E.a.createElement(
                  'div',
                  { className: Mu.a.drawer_items },
                  E.a.createElement(
                    'div',
                    {
                      className: Mu.a.drawer_item,
                      onClick: function() {
                        e.sendAttachment('video/mp4:' + Vu);
                      }
                    },
                    E.a.createElement('img', { src: Hu, alt: 'Attachment' })
                  ),
                  E.a.createElement(
                    'div',
                    {
                      className: Mu.a.drawer_item,
                      onClick: function() {
                        e.sendAttachment('video/mp4:' + Vu);
                      }
                    },
                    E.a.createElement('img', { src: Hu, alt: 'Attachment' })
                  ),
                  E.a.createElement(
                    'div',
                    {
                      className: Mu.a.drawer_item,
                      onClick: function() {
                        e.sendAttachment('video/mp4:' + Vu);
                      }
                    },
                    E.a.createElement('img', { src: Hu, alt: 'Attachment' })
                  )
                );
              }
            },
            {
              key: 'getQuickRepliesDrawer',
              value: function() {
                var e = this;
                return E.a.createElement(
                  'div',
                  { className: Mu.a.quick_replies },
                  this.state.quickReplies.map(function(t) {
                    return E.a.createElement(
                      'div',
                      {
                        className: Mu.a.quick_reply,
                        onClick: function() {
                          e.resume(t);
                        },
                        key: 'reply_'.concat(t)
                      },
                      t
                    );
                  })
                );
              }
            },
            {
              key: 'handleKeyPress',
              value: function(e, t) {
                t
                  ? '#' === e
                    ? (this.resume(this.state.keypadEntry), this.setState({ keypadEntry: '' }))
                    : this.setState(function(t) {
                        return { keypadEntry: (t.keypadEntry += e) };
                      })
                  : this.resume(e);
              }
            },
            {
              key: 'getKeyRow',
              value: function(e, t) {
                var a = this;
                return E.a.createElement(
                  'div',
                  { className: Mu.a.row },
                  e.map(function(e) {
                    return E.a.createElement(
                      'div',
                      {
                        key: 'btn_' + e,
                        onClick: function() {
                          a.handleKeyPress(e, t);
                        },
                        className: Mu.a.key
                      },
                      e
                    );
                  })
                );
              }
            },
            {
              key: 'getKeypadDrawer',
              value: function(e) {
                return E.a.createElement(
                  'div',
                  { className: Mu.a.keypad },
                  e
                    ? E.a.createElement(
                        'div',
                        { className: Mu.a.keypad_entry },
                        this.state.keypadEntry
                      )
                    : null,
                  E.a.createElement(
                    'div',
                    { className: Mu.a.keys },
                    this.getKeyRow(['1', '2', '3'], e),
                    this.getKeyRow(['4', '5', '6'], e),
                    this.getKeyRow(['7', '8', '9'], e),
                    this.getKeyRow(['*', '0', '#'], e)
                  )
                );
              }
            },
            {
              key: 'getDrawerContents',
              value: function() {
                switch (this.state.drawerType) {
                  case Nu.location:
                    return this.getLocationDrawer();
                  case Nu.audio:
                    return this.getAudioDrawer();
                  case Nu.images:
                    return this.getImageDrawer();
                  case Nu.videos:
                    return this.getVideoDrawer();
                  case Nu.quickReplies:
                    return this.getQuickRepliesDrawer();
                  case Nu.digits:
                  case Nu.digit:
                    return this.getKeypadDrawer(this.state.drawerType === Nu.digits);
                }
                return null;
              }
            },
            {
              key: 'handleDrawerRef',
              value: function(e) {
                return (this.drawerEle = e);
              }
            },
            {
              key: 'getDrawer',
              value: function() {
                var e = {};
                return (
                  this.state.drawerOpen
                    ? ((e.bottom = 50),
                      this.state.waitingForHint &&
                        ((e.bottom = 25), (e.zIndex = 150), (e.paddingBottom = 10)))
                    : (e.bottom = -this.state.drawerHeight),
                  E.a.createElement(
                    'div',
                    {
                      ref: this.handleDrawerRef,
                      style: e,
                      className:
                        Mu.a.drawer +
                        ' ' +
                        (this.state.drawerOpen ? Mu.a.drawer_visible : '') +
                        ' ' +
                        (this.state.attachmentOptionsVisible ? '' : Mu.a.forced)
                    },
                    this.getDrawerContents()
                  )
                );
              }
            },
            {
              key: 'hasQuickReplies',
              value: function() {
                return (this.state.quickReplies || []).length > 0;
              }
            },
            {
              key: 'handleHideAttachments',
              value: function() {
                var e = this;
                this.setState({ attachmentOptionsVisible: !1, drawerOpen: !1 }, function() {
                  e.hasQuickReplies() &&
                    window.setTimeout(function() {
                      e.showAttachmentDrawer(Nu.quickReplies);
                    }, 300);
                });
              }
            },
            {
              key: 'getAttachmentButton',
              value: function(e, t) {
                var a = this;
                return E.a.createElement('div', {
                  className: e,
                  onClick: function() {
                    a.showAttachmentDrawer(t);
                  }
                });
              }
            },
            {
              key: 'getAttachmentOptions',
              value: function() {
                return E.a.createElement(
                  'div',
                  {
                    className:
                      Mu.a.attachment_buttons +
                      ' ' +
                      (this.state.attachmentOptionsVisible ? Mu.a.visible : '')
                  },
                  E.a.createElement('div', {
                    className: 'fe-x',
                    onClick: this.handleHideAttachments
                  }),
                  this.getAttachmentButton('fe-picture2', Nu.images),
                  this.getAttachmentButton('fe-video', Nu.videos),
                  this.getAttachmentButton('fe-mic', Nu.audio),
                  this.getAttachmentButton('fe-map-marker', Nu.location)
                );
              }
            },
            {
              key: 'handleContextExplorerClose',
              value: function() {
                this.setState({ contextExplorerVisible: !1 });
              }
            },
            {
              key: 'getContextExplorer',
              value: function() {
                return E.a.createElement(Fu, {
                  visible: this.state.contextExplorerVisible,
                  onClose: this.handleContextExplorerClose,
                  contents: this.state.context
                });
              }
            },
            {
              key: 'handleHideAttachmentDrawer',
              value: function() {
                this.setState({ drawerOpen: !1 });
              }
            },
            {
              key: 'showAttachmentDrawer',
              value: function(e) {
                var t = this;
                if (this.state.drawerOpen) {
                  if (e === this.state.drawerType) return;
                  this.handleHideAttachmentDrawer(),
                    window.setTimeout(function() {
                      t.showAttachmentDrawer(e);
                    }, 300);
                } else
                  this.setState(function(t) {
                    return { drawerOpen: !0, drawerType: e };
                  });
              }
            },
            {
              key: 'render',
              value: function() {
                var e,
                  t = this,
                  a = [],
                  n = Object(C.a)(this.state.events);
                try {
                  for (n.s(); !(e = n.n()).done; ) {
                    var i = e.value;
                    a.push(
                      E.a.createElement(
                        Au,
                        Object.assign({}, i, { key: i.type + '_' + String(i.created_on) })
                      )
                    );
                  }
                } catch (u) {
                  n.e(u);
                } finally {
                  n.f();
                }
                var s = this.props.popped && this.props.popped !== Se.SIMULATOR,
                  o = s || !this.state.visible ? Mu.a.sim_hidden : '',
                  r = s || this.state.visible ? Mu.a.tab_hidden : '',
                  l = { height: 366 - (this.state.drawerOpen ? this.state.drawerHeight - 20 : 0) };
                return (
                  this.state.drawerOpen && this.state.waitingForHint && (l.height += 25),
                  E.a.createElement(
                    'div',
                    { id: 'sim_container', className: Mu.a.sim_container },
                    E.a.createElement(
                      'div',
                      null,
                      E.a.createElement(
                        'div',
                        { id: 'simulator', className: Mu.a.simulator + ' ' + o, key: 'sim' },
                        this.getContextExplorer(),
                        E.a.createElement(
                          'div',
                          { className: Mu.a.screen },
                          E.a.createElement(
                            'div',
                            { className: Mu.a.header },
                            E.a.createElement('div', {
                              className: Mu.a.close + ' fe-x',
                              onClick: this.onToggle
                            })
                          ),
                          E.a.createElement(
                            'div',
                            { className: Mu.a.messages, style: l },
                            a,
                            E.a.createElement('div', {
                              id: 'bottom',
                              style: { float: 'left', clear: 'both', marginTop: 20 },
                              ref: this.bottomRef
                            })
                          ),
                          E.a.createElement(
                            'div',
                            { className: Mu.a.controls },
                            E.a.createElement('input', {
                              ref: this.inputBoxRef,
                              type: 'text',
                              onKeyUp: this.onKeyUp,
                              disabled: this.state.sprinting,
                              placeholder: this.state.active
                                ? 'Enter message'
                                : 'Press home to start again'
                            }),
                            E.a.createElement(
                              'div',
                              { className: Mu.a.show_attachments_button },
                              E.a.createElement('div', {
                                className: 'fe-paperclip',
                                onClick: function() {
                                  t.setState({ attachmentOptionsVisible: !0, drawerOpen: !1 });
                                }
                              })
                            )
                          ),
                          this.getAttachmentOptions(),
                          this.getDrawer(),
                          E.a.createElement(
                            'div',
                            { className: Mu.a.footer },
                            this.state.contextExplorerVisible
                              ? E.a.createElement(
                                  'div',
                                  { className: Mu.a.show_context_button },
                                  E.a.createElement(
                                    'div',
                                    {
                                      className: 'context-button',
                                      onClick: function() {
                                        t.setState({ contextExplorerVisible: !1 });
                                      }
                                    },
                                    E.a.createElement('span', { className: 'fe-x' })
                                  )
                                )
                              : E.a.createElement(
                                  'div',
                                  { className: Mu.a.show_context_button },
                                  E.a.createElement(
                                    'div',
                                    {
                                      className: 'context-button',
                                      onClick: function() {
                                        t.setState({ contextExplorerVisible: !0 });
                                      }
                                    },
                                    E.a.createElement('span', { className: 'fe-at-sign' })
                                  )
                                ),
                            E.a.createElement('span', {
                              className:
                                Mu.a.reset +
                                ' ' +
                                (this.state.active ? Mu.a.active : Mu.a.inactive),
                              onClick: this.onReset
                            })
                          )
                        )
                      )
                    ),
                    E.a.createElement(
                      'div',
                      { className: Mu.a.simulator_tab + ' ' + r, onClick: this.onToggle },
                      E.a.createElement('div', {
                        className: Mu.a.simulator_tab_icon + ' fe-smartphone'
                      }),
                      E.a.createElement(
                        'div',
                        { className: Mu.a.simulator_tab_text },
                        'Run in',
                        E.a.createElement('br', null),
                        'Simulator'
                      )
                    )
                  )
                );
              }
            }
          ]),
          a
        );
      })(E.a.Component);
      Gu.contextTypes = { config: bt };
      var Ku = Object(Fl.b)(
          function(e) {
            var t = e.flowContext,
              a = t.definition,
              n = t.nodes,
              i = t.assetStore,
              s = e.editorState;
            return {
              liveActivity: s.liveActivity,
              activity: s.activity,
              assetStore: i,
              definition: a,
              nodes: n,
              language: s.language
            };
          },
          function(e) {
            return Object(ve.bindActionCreators)({}, e);
          }
        )(Gu),
        Wu = a(108),
        Yu = a.n(Wu),
        Xu = a(34),
        Qu = a.n(Xu),
        Ju = Ft.t('sticky.title', 'New Note'),
        Zu = Ft.t('sticky.body', '...'),
        $u = {
          yellow: Qu.a.yellow,
          blue: Qu.a.blue,
          green: Qu.a.green,
          purple: Qu.a.purple,
          gray: Qu.a.gray
        },
        ec = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).dragging = !1),
              (n.ele = void 0),
              (n.debounceTextChanges = void 0),
              (n.showConfirmation = void 0),
              (n.DEFUALT_TITLE = 'New Note'),
              (n.DEFUALT_BODY = '...'),
              Object(b.react)(Object(g.a)(n), { include: [/^on/, /^get/, /^is/, /^handle/] }),
              (n.state = {
                title: n.props.sticky.title,
                body: n.props.sticky.body,
                color: n.props.sticky.color,
                showConfirmation: !1
              }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'isSelected',
                value: function() {
                  return this.props.selected;
                }
              },
              {
                key: 'onRef',
                value: function(e) {
                  return (this.ele = e);
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  this.showConfirmation && window.clearTimeout(this.showConfirmation),
                    this.debounceTextChanges && window.clearTimeout(this.debounceTextChanges);
                }
              },
              { key: 'handleDrag', value: function(e) {} },
              {
                key: 'handleDragStop',
                value: function(e) {
                  var t = I(e.finalPos[0], e.finalPos[1]),
                    a = t.left,
                    n = t.top;
                  (this.ele.style.left = ''.concat(a, 'px')),
                    (this.ele.style.top = ''.concat(n, 'px')),
                    (this.props.sticky.position = { left: a, top: n }),
                    this.props.updateSticky(this.props.uuid, this.props.sticky);
                }
              },
              {
                key: 'onUpdateText',
                value: function() {
                  var e = this;
                  this.debounceTextChanges && window.clearTimeout(this.debounceTextChanges),
                    (this.debounceTextChanges = window.setTimeout(function() {
                      var t = Object(y.a)({}, e.props.sticky);
                      (t.title = e.state.title),
                        (t.body = e.state.body),
                        e.props.updateSticky(e.props.uuid, t),
                        (e.debounceTextChanges = null);
                    }, 2e3));
                }
              },
              {
                key: 'handleChangeTitle',
                value: function(e) {
                  this.setState({ title: e.currentTarget.value }), this.onUpdateText();
                }
              },
              {
                key: 'handleChangeBody',
                value: function(e) {
                  this.setState({ body: e.currentTarget.value }), this.onUpdateText();
                }
              },
              {
                key: 'handleClickRemove',
                value: function(e) {
                  var t = this;
                  this.state.showConfirmation
                    ? this.props.updateSticky(this.props.uuid, null)
                    : (this.setState({ showConfirmation: !0 }),
                      (this.showConfirmation = window.setTimeout(function() {
                        t.setState({ showConfirmation: !1 });
                      }, 2e3)));
                }
              },
              {
                key: 'handleChangeColor',
                value: function(e) {
                  (this.props.sticky.color = e),
                    this.props.updateSticky(this.props.uuid, this.props.sticky),
                    this.setState({ color: e });
                }
              },
              {
                key: 'handleSelectForValue',
                value: function(e, t) {
                  e.value === t &&
                    window.setTimeout(function() {
                      e.select();
                    }, 0);
                }
              },
              {
                key: 'handleTitleFocused',
                value: function(e) {
                  this.handleSelectForValue(e.currentTarget, Ju);
                }
              },
              {
                key: 'handleBodyFocused',
                value: function(e) {
                  this.handleSelectForValue(e.currentTarget, Zu);
                }
              },
              {
                key: 'getColorChooser',
                value: function() {
                  var e = this;
                  return k.createElement(
                    'div',
                    { className: Qu.a.color_chooser_container },
                    k.createElement(
                      'div',
                      { className: Qu.a.color_chooser },
                      Object.keys($u).map(function(t) {
                        return k.createElement('div', {
                          key: e.props.uuid + t,
                          onClick: function() {
                            e.handleChangeColor(t);
                          },
                          className: Qu.a.color_option + ' ' + $u[t]
                        });
                      })
                    )
                  );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = [Qu.a.title_wrapper];
                  this.state.showConfirmation && e.push(Qu.a.removal);
                  var t = [Qu.a.sticky_container];
                  this.props.sticky.color || (this.props.sticky.color = 'yellow');
                  var a = [Qu.a.sticky];
                  this.isSelected() && a.push(Qu.a.selected), t.push($u[this.props.sticky.color]);
                  var n = this.getColorChooser();
                  return k.createElement(
                    'div',
                    {
                      key: this.props.uuid,
                      className: t.join(' '),
                      'data-spec': 'sticky-container',
                      ref: this.onRef,
                      id: this.props.uuid
                    },
                    k.createElement(
                      'div',
                      { className: a.join(' ') },
                      k.createElement(
                        'div',
                        { className: e.join(' ') },
                        k.createElement(
                          'div',
                          { className: Qu.a.remove_button, onClick: this.handleClickRemove },
                          k.createElement('span', { className: 'fe-x' })
                        ),
                        k.createElement('div', { className: Qu.a.confirmation }, 'Remove?'),
                        k.createElement(Yu.a, {
                          className: Qu.a.title,
                          value: this.state.title,
                          onChange: this.handleChangeTitle,
                          onFocusCapture: this.handleTitleFocused
                        })
                      ),
                      k.createElement(
                        'div',
                        { className: Qu.a.body_wrapper },
                        k.createElement(Yu.a, {
                          className: Qu.a.body,
                          value: this.state.body,
                          onChange: this.handleChangeBody,
                          onFocusCapture: this.handleBodyFocused
                        }),
                        n
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        tc = Object(Fl.b)(
          function(e) {
            return { definition: e.flowContext.definition };
          },
          function(e) {
            return Object(ve.bindActionCreators)({ updateSticky: el }, e);
          },
          null,
          { forwardRef: !1 }
        )(ec),
        ac = a(231).jsPlumb.importDefaults,
        nc = {
          anchor: ['Continuous', { shape: 'Rectangle', faces: ['top', 'left', 'right'] }],
          endpoint: [
            'Rectangle',
            {
              width: 23,
              height: 23,
              cssClass: 'plumb-endpoint',
              hoverClass: 'plumb-endpoint-hover'
            }
          ],
          dropOptions: { tolerance: 'touch', hoverClass: 'plumb-drop-hover', isTarget: !1 },
          dragAllowedWhenFull: !1,
          deleteEndpointsOnEmpty: !0,
          isTarget: !1
        },
        ic = {
          anchor: 'BottomCenter',
          maxConnections: 1,
          dragAllowedWhenFull: !1,
          deleteEndpointsOnEmpty: !0,
          isSource: !0
        },
        sc = function(e, t) {
          return [
            'Continuous',
            {
              shape: 'Dot',
              faces:
                e.getBoundingClientRect().bottom + D / 3 < t.getBoundingClientRect().top
                  ? ['top']
                  : ['right', 'left']
            }
          ];
        },
        oc = [
          'Flowchart',
          { stub: 12, midpoint: 0.75, alwaysRespectStubs: !1, gap: [0, 5], cornerRadius: 3 }
        ],
        rc = (function() {
          function e() {
            Object(m.a)(this, e),
              (this.jsPlumb = void 0),
              (this.pendingConnections = {}),
              (this.pendingConnectionTimeout = void 0),
              (this.animateInterval = null),
              (this.onLoadFunction = null),
              (this.jsPlumb = ac({
                DragOptions: { cursor: 'pointer', zIndex: 1e3 },
                DropOptions: { tolerance: 'touch', hoverClass: 'plumb-hover' },
                Endpoint: 'Rectangle',
                EndpointStyle: { strokeStyle: 'transparent' },
                PaintStyle: { strokeWidth: 3.5 },
                ConnectionsDetachable: !0,
                Connector: oc,
                ConnectionOverlays: [
                  ['PlainArrow', { location: 0.999, width: 12, length: 12, cssClass: 'jtk-arrow' }]
                ]
              })),
              (this.debug = this.debug.bind(this)),
              (this.setSourceEnabled = this.setSourceEnabled.bind(this)),
              (this.makeSource = this.makeSource.bind(this)),
              (this.makeTarget = this.makeTarget.bind(this)),
              (this.connectExit = this.connectExit.bind(this)),
              (this.setDragSelection = this.setDragSelection.bind(this)),
              (this.clearDragSelection = this.clearDragSelection.bind(this)),
              (this.removeFromDragSelection = this.removeFromDragSelection.bind(this)),
              (this.cancelDurationRepaint = this.cancelDurationRepaint.bind(this)),
              (this.remove = this.remove.bind(this)),
              (this.handlePendingConnections = this.handlePendingConnections.bind(this)),
              (this.checkForPendingConnections = this.checkForPendingConnections.bind(this)),
              (this.connect = this.connect.bind(this)),
              (this.bind = this.bind.bind(this)),
              (this.repaint = this.repaint.bind(this)),
              (this.recalculate = this.recalculate.bind(this)),
              (this.reset = this.reset.bind(this)),
              (this.updateClass = this.updateClass.bind(this)),
              (this.rerouteAnchors = this.rerouteAnchors.bind(this));
          }
          return (
            Object(_.a)(e, [
              {
                key: 'setContainer',
                value: function(e) {
                  this.jsPlumb.setContainer(e);
                }
              },
              {
                key: 'debug',
                value: function() {
                  return this.jsPlumb;
                }
              },
              {
                key: 'setSourceEnabled',
                value: function(e, t) {
                  this.jsPlumb.setSourceEnabled(e, t);
                }
              },
              {
                key: 'makeSource',
                value: function(e) {
                  return this.jsPlumb.makeSource(e, ic);
                }
              },
              {
                key: 'makeTarget',
                value: function(e) {
                  this.jsPlumb.makeTarget(e, nc);
                }
              },
              {
                key: 'connectExit',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                  this.connect(
                    ''.concat(e.uuid, ':').concat(t.uuid),
                    t.destination_uuid,
                    a,
                    e.exits.findIndex(function(e) {
                      return e.uuid === t.uuid;
                    }),
                    e.exits.length
                  );
                }
              },
              {
                key: 'updateClass',
                value: function(e, t, a, n) {
                  var i = ''.concat(e.uuid, ':').concat(t.uuid),
                    s = this.jsPlumb.select({ source: i });
                  n ? s.addClass(a) : s.removeClass(a);
                }
              },
              {
                key: 'removeFromDragSelection',
                value: function(e) {
                  this.jsPlumb.removeFromDragSelection(e);
                }
              },
              {
                key: 'setDragSelection',
                value: function(e) {
                  var t = this;
                  this.cancelDurationRepaint(),
                    this.jsPlumb.clearDragSelection(),
                    Object.keys(e).forEach(function(e) {
                      return t.jsPlumb.addToDragSelection(e);
                    });
                }
              },
              {
                key: 'clearDragSelection',
                value: function() {
                  this.jsPlumb.clearDragSelection();
                }
              },
              {
                key: 'cancelDurationRepaint',
                value: function() {
                  this.animateInterval &&
                    (window.clearInterval(this.animateInterval), (this.animateInterval = null));
                }
              },
              {
                key: 'handlePendingConnections',
                value: function() {
                  var e = this,
                    t = {};
                  Object.keys(this.pendingConnections).length;
                  this.jsPlumb.batch(function() {
                    for (var a in e.pendingConnections)
                      if (e.pendingConnections.hasOwnProperty(a)) {
                        var n = e.pendingConnections[a],
                          i = n.source,
                          s = n.target,
                          o = n.className,
                          r = n.slot,
                          l = n.totalSlots,
                          u = s
                            ? ['Bottom', sc(document.getElementById(i), document.getElementById(s))]
                            : [];
                        if (null != i) {
                          e.jsPlumb.select({ source: i }).delete({ fireEvent: !1 });
                          var c = l < 5 ? 0.75 : 0.35,
                            d = c + 0.15 * r;
                          r > l / 2 && (d = c - 0.05 + 0.15 * (l - r)),
                            (d = Math.max(Math.min(0.9, d), 0.1));
                          var p = [].concat(oc);
                          (p[1].midpoint = d),
                            null != s &&
                              e.jsPlumb.connect({
                                source: i,
                                target: s,
                                anchors: u,
                                fireEvent: !1,
                                cssClass: o,
                                detachable: !o,
                                connector: p
                              });
                        }
                        null != s && (t[s] = !0), delete e.pendingConnections[a];
                      }
                  }, !1),
                    this.onLoadFunction && (this.onLoadFunction(), (this.onLoadFunction = null));
                }
              },
              {
                key: 'triggerLoaded',
                value: function(e) {
                  e &&
                    (0 === Object.keys(this.pendingConnections).length && e(),
                    (this.onLoadFunction = e));
                }
              },
              {
                key: 'checkForPendingConnections',
                value: function() {
                  var e = this;
                  this.pendingConnectionTimeout &&
                    window.clearTimeout(this.pendingConnectionTimeout),
                    (this.pendingConnectionTimeout = window.setTimeout(function() {
                      e.handlePendingConnections();
                    }, 0));
                }
              },
              {
                key: 'connect',
                value: function(e, t) {
                  var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                    n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
                    i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0;
                  (this.pendingConnections[
                    ''
                      .concat(e, ':')
                      .concat(t, ':')
                      .concat(a)
                  ] = { source: e, target: t, className: a, slot: n, totalSlots: i }),
                    this.checkForPendingConnections();
                }
              },
              {
                key: 'bind',
                value: function(e, t) {
                  return this.jsPlumb.bind(e, t);
                }
              },
              {
                key: 'repaint',
                value: function(e) {
                  e
                    ? (this.jsPlumb.recalculateOffsets(e), this.jsPlumb.repaint(e))
                    : (this.jsPlumb.recalculateOffsets(), this.jsPlumb.repaintEverything());
                }
              },
              {
                key: 'remove',
                value: function(e) {
                  this.jsPlumb.isSource(e)
                    ? (this.jsPlumb.unmakeSource(e), this.jsPlumb.remove(e))
                    : this.jsPlumb.isTarget(e) && this.jsPlumb.deleteConnectionsForElement(e);
                }
              },
              {
                key: 'rerouteAnchors',
                value: function(e) {
                  var t = this;
                  e.forEach(function(e) {
                    var a,
                      n = e.id,
                      i = t.jsPlumb
                        .getConnections({ target: n })
                        .concat(t.jsPlumb.getConnections({ source: n })),
                      s = Object(C.a)(i);
                    try {
                      for (s.s(); !(a = s.n()).done; ) {
                        var o = a.value;
                        o.endpoints[1].setAnchor(
                          sc(o.endpoints[0].element, o.endpoints[1].element)
                        );
                      }
                    } catch (r) {
                      s.e(r);
                    } finally {
                      s.f();
                    }
                  });
                }
              },
              {
                key: 'revalidate',
                value: function(e) {
                  var t = this;
                  this.jsPlumb.revalidate(e),
                    (function(e, t) {
                      var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                      e.timeout && window.clearTimeout(e.timeout),
                        (e.timeout = window.setTimeout(a || e, t));
                    })(this.rerouteAnchors, 200, function() {
                      t.rerouteAnchors(e);
                    });
                }
              },
              {
                key: 'recalculate',
                value: function(e) {
                  var t = this;
                  window.setTimeout(function() {
                    t.jsPlumb.revalidate(e);
                  }, 100);
                }
              },
              {
                key: 'reset',
                value: function() {
                  this.jsPlumb.reset();
                }
              },
              {
                key: 'getPlumb',
                value: function() {
                  return this.jsPlumb;
                }
              }
            ]),
            e
          );
        })(),
        lc = a(15),
        uc = (function() {
          function e(t, a) {
            Object(m.a)(this, e),
              (this.props = void 0),
              (this.state = void 0),
              (this.props = t),
              (this.state = a || { showUUIDs: !1 });
          }
          return (
            Object(_.a)(e, [
              {
                key: 'showUUIDs',
                value: function() {
                  var e = lc(this.state, { $merge: { showUUIDs: !0 } });
                  return this.props.mergeEditorState({ debug: e }), e;
                }
              }
            ]),
            e
          );
        })(),
        cc = a(153),
        dc = a.n(cc),
        pc = 3,
        hc = function(e) {
          return e.suspendedElementId === e.targetId && null !== e.source;
        },
        mc = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e, n) {
            var i;
            return (
              Object(m.a)(this, a),
              ((i = t.call(this, e, n)).Plumber = void 0),
              (i.nodeContainerUUID = void 0),
              (i.ghost = void 0),
              (i.nodeContainerUUID = $()),
              (i.Plumber = new rc()),
              n.config.debug && (window.fe = new uc(e, i.props.debug)),
              Object(b.react)(Object(g.a)(i), {
                include: [/Ref$/, /^on/, /^is/, /^get/, /^handle/]
              }),
              i
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'ghostRef',
                value: function(e) {
                  return (this.ghost = e);
                }
              },
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this;
                  this.Plumber.bind('connection', function(t) {
                    return e.props.updateConnection(t.sourceId, t.targetId);
                  }),
                    this.Plumber.bind('beforeDrag', function(t) {
                      e.beforeConnectionDrag(t);
                    }),
                    this.Plumber.bind('connectionDrag', function(t) {
                      e.props.onConnectionDrag(t, e.context.config.flowType);
                    }),
                    this.Plumber.bind('connectionDragStop', function(t) {
                      return e.onConnectorDrop(t);
                    }),
                    this.Plumber.bind('beforeStartDetach', function(t) {
                      return !e.props.translating && e.context.config.mutable;
                    }),
                    this.Plumber.bind('beforeDetach', function(e) {
                      return !0;
                    }),
                    this.Plumber.bind('beforeDrop', function(t) {
                      return e.onBeforeConnectorDrop(t);
                    }),
                    this.Plumber.triggerLoaded(this.context.config.onLoad);
                }
              },
              {
                key: 'componentWillUnmount',
                value: function() {
                  this.Plumber.reset();
                }
              },
              {
                key: 'onBeforeConnectorDrop',
                value: function(e) {
                  this.props.resetNodeEditingState();
                  var t = e.sourceId.split(':')[0];
                  try {
                    ul(this.props.nodes, t, e.targetId);
                  } catch (a) {
                    return !1;
                  }
                  return !0;
                }
              },
              {
                key: 'onConnectorDrop',
                value: function(e) {
                  var t = this.props.ghostNode;
                  if (W(t) && !hc(e)) {
                    this.Plumber.recalculate(t.node.uuid);
                    var a = pi(t);
                    this.Plumber.connect(a.nodeUUID + ':' + a.exitUUID, t.node.uuid);
                    var n = (this.ghost &&
                        I(this.ghost.ele.offsetLeft, this.ghost.ele.offsetTop)) || {
                        left: 0,
                        top: 0
                      },
                      i = n.left,
                      s = n.top;
                    this.props.ghostNode.ui.position = { left: i, top: s };
                    var o = null;
                    t.node.actions && 1 === t.node.actions.length && (o = t.node.actions[0]),
                      this.props.onOpenNodeEditor({ originalNode: t, originalAction: o });
                  }
                  return (
                    hc(e) && this.props.mergeEditorState({ ghostNode: null }),
                    document.removeEventListener('mousemove', window.ghostListener),
                    !0
                  );
                }
              },
              {
                key: 'beforeConnectionDrag',
                value: function(e) {
                  return (
                    e.source && e.source.dispatchEvent(new Event('disconnect')),
                    !this.props.translating
                  );
                }
              },
              {
                key: 'handleStickyCreation',
                value: function(e) {
                  var t = this.props.definition._ui.stickies || {},
                    a = e.uuid;
                  return k.createElement(tc, {
                    key: a,
                    uuid: a,
                    sticky: t[a],
                    selected: e.selected
                  });
                }
              },
              {
                key: 'handleNodeCreation',
                value: function(e) {
                  var t = 1 === Object.keys(this.props.nodes).length;
                  return k.createElement(mu, {
                    onlyNode: t,
                    startingNode: 0 === e.idx,
                    selected: e.selected,
                    key: e.uuid,
                    'data-spec': 'node',
                    nodeUUID: e.uuid,
                    plumberMakeTarget: this.Plumber.makeTarget,
                    plumberRemove: this.Plumber.remove,
                    plumberRecalculate: this.Plumber.recalculate,
                    plumberMakeSource: this.Plumber.makeSource,
                    plumberConnectExit: this.Plumber.connectExit,
                    plumberUpdateClass: this.Plumber.updateClass
                  });
                }
              },
              {
                key: 'getNodes',
                value: function() {
                  var e = this;
                  return pl(this.props.nodes).map(function(t, a) {
                    return {
                      uuid: t.node.uuid,
                      position: t.ui.position,
                      elementCreator: e.handleNodeCreation,
                      config: t,
                      idx: a
                    };
                  });
                }
              },
              {
                key: 'getStickies',
                value: function() {
                  var e = this,
                    t = this.props.definition._ui.stickies || {};
                  return Object.keys(t).map(function(a, n) {
                    return {
                      uuid: a,
                      elementCreator: e.handleStickyCreation,
                      position: t[a].position,
                      idx: n
                    };
                  });
                }
              },
              {
                key: 'getDragNode',
                value: function() {
                  return W(this.props.ghostNode)
                    ? k.createElement(
                        'div',
                        {
                          'data-spec': 'ghost-node',
                          key: this.props.ghostNode.node.uuid,
                          style: { position: 'absolute', display: 'block', visibility: 'hidden' }
                        },
                        k.createElement(mu, {
                          onlyNode: !1,
                          selected: !1,
                          startingNode: !1,
                          ref: this.ghostRef,
                          ghost: !0,
                          nodeUUID: this.props.ghostNode.node.uuid,
                          plumberMakeTarget: this.Plumber.makeTarget,
                          plumberRemove: this.Plumber.remove,
                          plumberRecalculate: this.Plumber.recalculate,
                          plumberMakeSource: this.Plumber.makeSource,
                          plumberConnectExit: this.Plumber.connectExit,
                          plumberUpdateClass: this.Plumber.updateClass
                        })
                      )
                    : null;
                }
              },
              {
                key: 'getSimulator',
                value: function() {
                  var e = this;
                  return K(
                    this.context.config.endpoints && this.context.config.endpoints.simulateStart
                  )(
                    k.createElement(Ku, {
                      key: 'simulator',
                      popped: this.props.popped,
                      mergeEditorState: this.props.mergeEditorState,
                      onToggled: function(t, a) {
                        e.props.mergeEditorState({ popped: t ? a : null });
                      }
                    })
                  );
                }
              },
              {
                key: 'getNodeEditor',
                value: function() {
                  return K(null !== this.props.nodeEditorSettings)(
                    k.createElement(yu, {
                      key: 'node-editor',
                      helpArticles: this.context.config.help,
                      plumberConnectExit: this.Plumber.connectExit
                    })
                  );
                }
              },
              {
                key: 'handleDoubleClick',
                value: function(e) {
                  var t = e.left,
                    a = e.top;
                  this.props.updateSticky($(), {
                    position: I(t - 90 + F, a - 40),
                    title: Ju,
                    body: Zu
                  });
                }
              },
              {
                key: 'getEmptyFlow',
                value: function() {
                  var e = this;
                  return k.createElement(
                    'div',
                    { key: 'create_node', className: dc.a.empty_flow },
                    k.createElement(
                      Pe.a,
                      { i18nKey: 'empty_flow_message' },
                      k.createElement('h1', null, "Let's get started"),
                      k.createElement(
                        'div',
                        null,
                        'We recommend starting your flow by sending a message. This message will be sent to anybody right after they join the flow. This is your chance to send a single message or ask them a question.'
                      )
                    ),
                    k.createElement(le, {
                      name: Ft.t('buttons.create_message', 'Create Message'),
                      onClick: function() {
                        var t = hl(null, null, 1, e.context.config.flowType);
                        e.props.onOpenNodeEditor({
                          originalNode: t,
                          originalAction: t.node.actions[0]
                        });
                      }
                    })
                  );
                }
              },
              {
                key: 'handleDragging',
                value: function(e) {
                  var t = this;
                  e.forEach(function(e) {
                    try {
                      var a = document.getElementById(e),
                        n = a.querySelectorAll('.jtk-connected');
                      t.Plumber.revalidate([a].concat(Object(ge.a)(n)));
                    } catch (i) {}
                  });
                }
              },
              {
                key: 'handleCanvasLoaded',
                value: function() {
                  this.Plumber.setContainer('canvas');
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this.getNodes(),
                    t = this.getStickies().concat(e);
                  return k.createElement(
                    'div',
                    null,
                    0 === e.length
                      ? this.getEmptyFlow()
                      : k.createElement(k.Fragment, null, this.getSimulator()),
                    this.getNodeEditor(),
                    k.createElement(jl, {
                      mutable: this.context.config.mutable,
                      draggingNew: !!this.props.ghostNode && !this.props.nodeEditorSettings,
                      newDragElement: this.getDragNode(),
                      onDragging: this.handleDragging,
                      uuid: this.nodeContainerUUID,
                      dragActive: this.props.dragActive,
                      mergeEditorState: this.props.mergeEditorState,
                      onRemoveNodes: this.props.onRemoveNodes,
                      draggables: t,
                      onDoubleClick: this.handleDoubleClick,
                      onUpdatePositions: this.props.onUpdateCanvasPositions,
                      onLoaded: this.handleCanvasLoaded
                    }),
                    k.createElement('div', { id: 'activity_recent_messages' })
                  );
                }
              }
            ]),
            a
          );
        })(k.PureComponent);
      mc.contextTypes = { config: bt };
      var _c,
        gc = Object(Fl.b)(
          function(e) {
            var t = e.flowContext,
              a = t.definition,
              n = t.metadata,
              i = t.nodes,
              s = e.editorState,
              o = s.ghostNode,
              r = s.debug,
              l = s.translating,
              u = s.popped,
              c = s.dragActive;
            return {
              nodeEditorSettings: e.nodeEditor.settings,
              definition: a,
              nodes: i,
              metadata: n,
              ghostNode: o,
              debug: r,
              translating: l,
              popped: u,
              dragActive: c
            };
          },
          function(e) {
            return Object(ve.bindActionCreators)(
              {
                mergeEditorState: Dr,
                resetNodeEditingState: Yr,
                onConnectionDrag: $r,
                onOpenNodeEditor: al,
                onUpdateCanvasPositions: Zr,
                onRemoveNodes: Jr,
                updateConnection: Vr,
                updateSticky: el
              },
              e
            );
          }
        )(mc),
        vc = a(60),
        fc = a.n(vc),
        yc = a(80),
        bc = a.n(yc),
        kc = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e, n) {
            var i;
            return (
              Object(m.a)(this, a),
              (i = t.call(this, e, n)),
              Object(b.react)(Object(g.a)(i), { include: [/^handle/] }),
              i
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleLanguageChanged',
                value: function(e) {
                  this.props.handleLanguageChange(e);
                }
              },
              {
                key: 'handleLanguageSort',
                value: function(e, t) {
                  return 'base' === e.id
                    ? -1
                    : 'base' === t.id
                    ? 1
                    : void 0 !== e.order && void 0 !== t.order
                    ? e.order - t.order
                    : e.name.localeCompare(t.name);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e = this;
                  if (!this.props.language) return null;
                  var t = Object.keys(this.props.languages.items)
                    .map(function(t) {
                      return e.props.languages.items[t];
                    })
                    .sort(this.handleLanguageSort);
                  return 1 === t.length
                    ? null
                    : k.createElement(
                        'div',
                        { className: 'language-selector' },
                        t.map(function(t, a) {
                          return k.createElement(
                            'div',
                            { key: 'lang_' + t.id, className: bc.a.language },
                            a > 0
                              ? k.createElement('div', { className: bc.a.separator }, '|')
                              : null,
                            k.createElement(
                              'div',
                              {
                                className:
                                  bc.a.language_link +
                                  ' ' +
                                  (e.props.language.id === t.id ? bc.a.active : ''),
                                onClick: function() {
                                  e.handleLanguageChanged(t);
                                }
                              },
                              t.name
                            )
                          );
                        })
                      );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Ec = Object(Fl.b)(
          function(e) {
            var t = e.flowContext.assetStore,
              a = e.editorState.language;
            return { languages: t.languages, language: a };
          },
          function(e) {
            return Object(ve.bindActionCreators)({ handleLanguageChange: Lr }, e);
          }
        )(kc),
        Cc = a(46),
        wc = a.n(Cc),
        Sc = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).poppedEle = void 0),
              (n.state = { width: 258 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidUpdate',
                value: function() {
                  this.state.width !== this.poppedEle.offsetWidth &&
                    this.setState({ width: this.poppedEle.offsetWidth });
                }
              },
              {
                key: 'handlePoppedRef',
                value: function(e) {
                  return (this.poppedEle = e);
                }
              },
              {
                key: 'handleTabClick',
                value: function() {
                  this.props.onShow();
                }
              },
              {
                key: 'handleClose',
                value: function() {
                  this.props.onHide();
                }
              },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    'div',
                    {
                      className:
                        'pop_wrapper ' +
                        wc.a.pop_wrapper +
                        ' ' +
                        (this.props.visible ? wc.a.visible : ''),
                      style: { right: -this.state.width, top: this.props.top }
                    },
                    k.createElement(
                      'div',
                      { className: wc.a.tab_wrapper },
                      k.createElement(
                        'div',
                        {
                          className: wc.a.tab,
                          style: { background: this.props.color },
                          onClick: this.handleTabClick
                        },
                        k.createElement(
                          'div',
                          { className: wc.a.icon },
                          k.createElement('span', { className: this.props.icon })
                        ),
                        k.createElement('div', { className: wc.a.label }, this.props.label)
                      )
                    ),
                    k.createElement(
                      'div',
                      {
                        ref: this.handlePoppedRef,
                        className: wc.a.popped,
                        style: {
                          borderColor: this.props.color,
                          right: this.props.visible ? 15 + this.state.width : 0,
                          top: -100
                        }
                      },
                      k.createElement(
                        'div',
                        { className: wc.a.header, style: { background: this.props.color } },
                        k.createElement('div', {
                          className: wc.a.close + ' fe-x',
                          onClick: this.handleClose
                        }),
                        k.createElement('div', { className: wc.a.header_label }, this.props.header)
                      ),
                      k.createElement(
                        'div',
                        { className: wc.a.body, style: { background: this.props.color } },
                        this.props.children
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component),
        Nc = a(154),
        Oc = a.n(Nc),
        xc = a(38),
        jc = a.n(xc),
        Tc = St.a.bind(jc.a),
        Ac = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).onRevisionClicked = function(e) {
                return function(t) {
                  t.stopPropagation(),
                    t.preventDefault(),
                    nt(n.props.assetStore.revisions, e.id).then(function(t) {
                      n.props.loadFlowDefinition(t, n.props.assetStore),
                        n.setState({ revision: e });
                    });
                };
              }),
              (n.onRevertClicked = function(e) {
                return function(e) {
                  e.stopPropagation(),
                    e.preventDefault(),
                    n.props.createNewRevision(),
                    n.setState({ visible: !1, revision: null });
                };
              }),
              (n.state = { revisions: [], revision: null, definition: null, visible: !1 }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'handleUpdateRevisions',
                value: function() {
                  var e = this;
                  if (null !== this.props.assetStore) {
                    var t = this.props.assetStore.revisions;
                    return Je(t.endpoint + '?version=' + N, t.type, t.id || 'id').then(function(t) {
                      t.length > 0 && (t[0].content.current = !0), e.setState({ revisions: t });
                    });
                  }
                }
              },
              {
                key: 'handleTabClicked',
                value: function() {
                  var e = this;
                  this.props.onToggled(!this.state.visible, Se.REVISION_HISTORY),
                    this.setState(
                      function(e) {
                        return { visible: !e.visible };
                      },
                      function() {
                        e.state.visible
                          ? e.handleUpdateRevisions()
                          : e.state.revision &&
                            e.state.revision.id !== e.state.revisions[0].id &&
                            nt(e.props.assetStore.revisions, e.state.revisions[0].id).then(function(
                              t
                            ) {
                              e.props.loadFlowDefinition(t, e.props.assetStore),
                                e.setState({ revision: null });
                            });
                      }
                    );
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this,
                    a = Tc(
                      ((e = {}),
                      Object(S.a)(e, jc.a.visible, this.state.visible),
                      Object(S.a)(
                        e,
                        jc.a.hidden,
                        this.props.popped && this.props.popped !== Se.REVISION_HISTORY
                      ),
                      e)
                    );
                  return E.a.createElement(
                    'div',
                    { className: a },
                    E.a.createElement('div', { className: jc.a.mask }),
                    E.a.createElement(
                      Sc,
                      {
                        header: Ft.t('revisions.header', 'Revisions'),
                        color: '#8e5ea7',
                        icon: 'fe-time',
                        label: Ft.t('revisions.label', 'Revision History'),
                        top: '360px',
                        visible: this.state.visible,
                        onShow: this.handleTabClicked,
                        onHide: this.handleTabClicked
                      },
                      E.a.createElement(
                        'div',
                        { className: jc.a.explorer_wrapper },
                        E.a.createElement(
                          'div',
                          { className: jc.a.explorer },
                          E.a.createElement(
                            'div',
                            { className: jc.a.revisions },
                            this.state.revisions.map(function(e) {
                              var a = e.content,
                                n = t.state.revision && e.id === t.state.revision.id,
                                i = a.current || n ? jc.a.selected : '';
                              return E.a.createElement(
                                'div',
                                {
                                  className: jc.a.revision + ' ' + i,
                                  key: 'revision_' + e.id,
                                  onClick: t.onRevisionClicked(e)
                                },
                                K(a.current)(
                                  E.a.createElement(
                                    'div',
                                    { className: jc.a.button + ' ' + jc.a.current },
                                    'current'
                                  )
                                ),
                                K('published' === a.status)(
                                  E.a.createElement(
                                    'div',
                                    { className: jc.a.button + ' ' + jc.a.publish },
                                    ' published '
                                  )
                                ),
                                K(n && !a.current)(
                                  E.a.createElement(
                                    'div',
                                    { onClick: t.onRevertClicked(e), className: jc.a.button },
                                    'revert'
                                  )
                                ),
                                E.a.createElement(
                                  'div',
                                  { className: jc.a.created_on },
                                  Oc()(new Date(a.created_on), 'mmmm d, yyyy, h:MM TT', t.props.utc)
                                ),
                                E.a.createElement(
                                  'div',
                                  { className: jc.a.email },
                                  a.user.name || a.user.email
                                )
                              );
                            })
                          )
                        )
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(E.a.Component),
        Rc = a(49),
        Uc = a.n(Rc),
        Dc = St.a.bind(Uc.a),
        Pc = function(e) {
          return (e.action_uuid || e.node_uuid) + (e.language || '');
        },
        Fc = function(e, t) {
          var a = t[e.node_uuid],
            n = null;
          if (e.action_uuid && a) {
            var i = e.action_uuid
              ? a.node.actions.findIndex(function(t) {
                  return t.uuid === e.action_uuid;
                })
              : null;
            if (i > -1) {
              var s = a.node.actions[i];
              n = { action: s, config: hr(s.type), index: i };
            }
          }
          return { renderNode: a, renderAction: n };
        },
        Ic = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              ((n = t.call(this, e)).state = {
                visible: !1,
                selectedIssue: null,
                issueDetails: n.buildIssueDetails()
              }),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/, /^render/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidUpdate',
                value: function(e) {
                  (this.props.issues === e.issues &&
                    e.nodes === this.props.nodes &&
                    this.props.languages === e.languages) ||
                    this.setState({ issueDetails: this.buildIssueDetails() });
                }
              },
              {
                key: 'buildIssueDetails',
                value: function() {
                  var e = {};
                  if (Object.keys(this.props.nodes).length > 0)
                    for (var t = 0, a = Object.values(this.props.issues); t < a.length; t++) {
                      var n,
                        i = a[t],
                        s = Object(C.a)(i);
                      try {
                        for (s.s(); !(n = s.n()).done; ) {
                          var o = n.value,
                            r = Pc(o),
                            l = e[r];
                          if (l) l.issues.push(o);
                          else {
                            var u = null;
                            o.language &&
                              this.props.languages &&
                              (u = this.props.languages[o.language]);
                            var c = Fc(o, this.props.nodes);
                            !c.renderNode ||
                              (o.action_uuid && !c.renderAction) ||
                              (l = { issues: [o], renderObjects: c, language: u });
                          }
                          l && (e[r] = l);
                        }
                      } catch (d) {
                        s.e(d);
                      } finally {
                        s.f();
                      }
                    }
                  return Object.values(e).sort(function(e, t) {
                    if (e.language && !t.language) return 1;
                    if (!e.language && t.language) return -1;
                    if (e.language && t.language && e.language.name !== t.language.name)
                      return e.language.name.localeCompare(t.language.name);
                    var a =
                      e.renderObjects.renderNode.ui.position.top -
                      t.renderObjects.renderNode.ui.position.top;
                    return 0 !== a
                      ? a
                      : e.renderObjects.renderNode.node.uuid ===
                          t.renderObjects.renderNode.node.uuid &&
                        e.renderObjects.renderAction &&
                        t.renderObjects.renderAction
                      ? e.renderObjects.renderAction.index - t.renderObjects.renderAction.index
                      : 0;
                  });
                }
              },
              {
                key: 'handleTabClicked',
                value: function() {
                  this.props.onToggled(!this.state.visible, Se.ISSUES_TAB),
                    this.setState(function(e) {
                      return { visible: !e.visible };
                    });
                }
              },
              {
                key: 'handleIssueClicked',
                value: function(e) {
                  var t = this;
                  this.props.onIssueClicked(e),
                    window.setTimeout(function() {
                      t.props.onIssueOpened(e);
                    }, 750);
                }
              },
              {
                key: 'render',
                value: function() {
                  var e,
                    t = this,
                    a = 0,
                    n = null,
                    i = this.state.issueDetails.map(function(e) {
                      a += e.issues.length;
                      var i = null;
                      e.language &&
                        e.language !== n &&
                        (i = E.a.createElement(
                          'div',
                          { className: Uc.a.language },
                          e.language.name
                        )),
                        (n = e.language);
                      var s = null;
                      if (!e.renderObjects.renderNode) return null;
                      s = e.renderObjects.renderAction
                        ? e.renderObjects.renderAction.config
                        : hr(mr(e.renderObjects.renderNode));
                      var o = e.issues.map(function(e, t) {
                        return E.a.createElement(
                          'div',
                          { key: Pc(e) + t, className: Uc.a.message },
                          E.a.createElement('div', { className: Uc.a.header }, s.name, ':'),
                          ' ',
                          rt(e)
                        );
                      });
                      return E.a.createElement(
                        'div',
                        { key: Pc(e.issues[0]) + '_detail' },
                        i,
                        E.a.createElement(
                          'div',
                          {
                            className: Uc.a.details,
                            onClick: function() {
                              return t.handleIssueClicked(e);
                            }
                          },
                          null,
                          E.a.createElement('div', { className: Uc.a.issues_code }, o)
                        )
                      );
                    }),
                    s = Dc(
                      ((e = {}),
                      Object(S.a)(e, Uc.a.visible, this.state.visible),
                      Object(S.a)(
                        e,
                        Uc.a.hidden,
                        this.props.popped && this.props.popped !== Se.ISSUES_TAB
                      ),
                      e)
                    );
                  return E.a.createElement(
                    'div',
                    { className: s },
                    E.a.createElement('div', { className: Uc.a.mask }),
                    E.a.createElement(
                      Sc,
                      {
                        header: ''.concat(Ft.t('issues.label', 'Flow Issues'), ' (').concat(a, ')'),
                        label: Ft.t('issues.header', 'Flow Issues'),
                        color: 'tomato',
                        icon: 'fe-warning',
                        top: '416px',
                        visible: this.state.visible,
                        onShow: this.handleTabClicked,
                        onHide: this.handleTabClicked
                      },
                      E.a.createElement('div', { className: Uc.a.issues_wrapper }, i)
                    )
                  );
                }
              }
            ]),
            a
          );
        })(E.a.Component),
        Mc = a(155),
        Lc = a(156),
        zc = a.n(Lc),
        Bc = Object(ve.combineReducers)({ flowContext: De, editorState: Sr, nodeEditor: aa }),
        qc = { flowContext: xe, editorState: wr, nodeEditor: $t },
        Vc = [zc.a],
        Hc = a(20),
        Gc = a.n(Hc);
      !(function(e) {
        (e.COMPLETE = 'complete'), (e.MISSING = 'missing');
      })(_c || (_c = {}));
      var Kc,
        Wc = function(e, t, a) {
          return e.translations
            .filter(function(e) {
              switch (t) {
                case _c.COMPLETE:
                  return !!e.to && e.type === a;
                case _c.MISSING:
                  return !e.to && e.type === a;
              }
              return !0;
            })
            .map(function(e) {
              return e[t === _c.MISSING ? 'from' : 'to'];
            })
            .join(', ');
        },
        Yc = function(e, t, a, n) {
          var i = [];
          return (
            t.forEach(function(t) {
              for (var s = t.split('.'), o = a, r = []; s.length > 0 && o; ) {
                s.length > 0 && o.uuid && (r = (n || {})[o.uuid]);
                var l = s.shift();
                r && (r = r[l]), (o = o[l]);
              }
              o &&
                (r && (r = r.join(', ')),
                Array.isArray(o) &&
                  (o = o
                    .map(function(e) {
                      return e.name ? e.name : e.arguments ? e.arguments.join(' ') : e;
                    })
                    .join(', ')),
                o && i.push({ type: e, attribute: t, from: o, to: r }));
            }),
            i
          );
        },
        Xc = function(e) {
          return 'categories' === e
            ? Rt.a.t('translation.attributes.categories', 'Categories')
            : 'cases' === e
            ? Rt.a.t('translation.attributes.cases', 'Rules')
            : 'text' === e
            ? Rt.a.t('translation.attributes.text', 'Message')
            : 'quick_replies' === e
            ? Rt.a.t('translation.attributes.quick_relpies', 'Quick Replies')
            : 'templating.variables' === e
            ? Rt.a.t('translation.attributes.templates', 'Template Variables')
            : 'subject' === e
            ? Rt.a.t('translation.attributes.subject', 'Subject')
            : 'body' === e
            ? Rt.a.t('translation.attributes.body', 'Body')
            : (t = e)
            ? t
                .split('_')
                .join(' ')
                .toLowerCase()
            : t;
          var t;
        },
        Qc = function(e) {
          return e.node_uuid + e.action_uuid;
        },
        Jc = St.a.bind(Gc.a);
      !(function(e) {
        (e.PROPERTY = 'property'), (e.CATEGORY = 'category'), (e.CASE = 'case');
      })(Kc || (Kc = {}));
      var Zc = (function(e) {
        Object(v.a)(a, e);
        var t = Object(f.a)(a);
        function a(e, n) {
          var i;
          return (
            Object(m.a)(this, a),
            ((i = t.call(this, e)).state = {
              visible: !1,
              selectedTranslation: null,
              translationBundles: [],
              optionsVisible: !1,
              pctComplete: 0,
              translationFilters: e.translationFilters || { categories: !0, rules: !0 }
            }),
            Object(b.react)(Object(g.a)(i), { include: [/^handle/, /^render/, /^toggle/] }),
            i
          );
        }
        return (
          Object(_.a)(a, [
            {
              key: 'componentWillUnmount',
              value: function() {
                this.state.visible && this.handleTabClicked();
              }
            },
            {
              key: 'componentDidUpdate',
              value: function(e, t) {
                (e.translationFilters === this.props.translationFilters &&
                  e.localization === this.props.localization &&
                  e.language === this.props.language &&
                  t.visible &&
                  t.translationFilters === this.state.translationFilters) ||
                  this.handleUpdateTranslations();
              }
            },
            {
              key: 'handleUpdateTranslations',
              value: function() {
                var e = this,
                  t = [];
                Object.keys(this.props.nodes).forEach(function(a) {
                  var n = e.props.nodes[a];
                  if (
                    n.node.router &&
                    (e.state.translationFilters.categories || e.state.translationFilters.rules)
                  ) {
                    var i = hr(mr(n)),
                      s = [];
                    if (e.state.translationFilters.categories) {
                      var o = ['name'];
                      n.node.router.categories.forEach(function(t) {
                        s.push.apply(s, Object(ge.a)(Yc(Kc.CATEGORY, o, t, e.props.localization)));
                      });
                    }
                    if (e.state.translationFilters.rules) {
                      var r = ['arguments'],
                        l = wi(n.node);
                      l &&
                        l.cases.forEach(function(t) {
                          s.push.apply(s, Object(ge.a)(Yc(Kc.CASE, r, t, e.props.localization)));
                        });
                    }
                    s.length > 0 &&
                      t.push({
                        typeConfig: i,
                        node_uuid: a,
                        translations: s,
                        translated: s.filter(function(e) {
                          return !!e.to;
                        }).length
                      });
                  } else
                    n.node.actions.forEach(function(n) {
                      var i = hr(n.type),
                        s = Yc(Kc.PROPERTY, i.localizeableKeys || [], n, e.props.localization);
                      s.length > 0 &&
                        t.push({
                          typeConfig: i,
                          node_uuid: a,
                          action_uuid: n.uuid,
                          translations: s,
                          translated: s.filter(function(e) {
                            return !!e.to;
                          }).length
                        });
                    });
                });
                var a = { total: 0, complete: 0 };
                t.reduce(function(e, t) {
                  return (e.total += t.translations.length), (e.complete += t.translated), e;
                }, a);
                var n = a.total > 0 ? Math.round((a.complete / a.total) * 100) : 0,
                  i = t
                    .filter(function(e) {
                      return e.translated < e.translations.length;
                    })
                    .sort(function(e, t) {
                      return (
                        t.translations.length -
                        t.translated -
                        (e.translations.length - e.translated)
                      );
                    });
                (n === this.state.pctComplete &&
                  i.length === this.state.translationBundles.length) ||
                  this.setState({ pctComplete: n, translationBundles: i });
              }
            },
            {
              key: 'handleTabClicked',
              value: function() {
                this.props.onToggled(!this.state.visible, Se.TRANSLATOR_TAB),
                  this.setState(function(e) {
                    return { visible: !e.visible };
                  });
              }
            },
            {
              key: 'toggleOptions',
              value: function() {
                this.setState({ optionsVisible: !this.state.optionsVisible });
              }
            },
            {
              key: 'toggleCategories',
              value: function(e) {
                var t = this;
                this.setState(
                  {
                    translationFilters: {
                      categories: e,
                      rules: this.state.translationFilters.rules
                    }
                  },
                  function() {
                    t.props.onTranslationFilterChanged(t.state.translationFilters);
                  }
                );
              }
            },
            {
              key: 'toggleRules',
              value: function(e) {
                var t = this;
                this.setState(
                  {
                    translationFilters: {
                      rules: e,
                      categories: this.state.translationFilters.categories
                    }
                  },
                  function() {
                    t.props.onTranslationFilterChanged(t.state.translationFilters);
                  }
                );
              }
            },
            {
              key: 'renderMissing',
              value: function(e, t, a) {
                return t
                  ? E.a.createElement(
                      'div',
                      { key: this.props.language.id + e, className: Gc.a.item },
                      E.a.createElement('div', { className: Gc.a.text + ' ' + Gc.a.from_text }, t),
                      E.a.createElement('div', { className: Gc.a.text + ' ' + Gc.a.attribute }, a)
                    )
                  : null;
              }
            },
            {
              key: 'handleTranslationClicked',
              value: function(e) {
                var t = this;
                this.props.onTranslationClicked(e),
                  window.setTimeout(function() {
                    t.props.onTranslationOpened(e);
                  }, 750);
              }
            },
            {
              key: 'handleChangeLanguageClick',
              value: function(e) {
                this.context.config.onChangeLanguage(
                  this.props.language.id,
                  this.props.language.name
                ),
                  e.preventDefault(),
                  e.stopPropagation();
              }
            },
            {
              key: 'render',
              value: function() {
                var e,
                  t,
                  a,
                  n,
                  i = this,
                  s = this.state.optionsVisible && this.context.config.onChangeLanguage,
                  o = Jc(
                    ((e = {}),
                    Object(S.a)(e, Gc.a.visible, this.state.visible),
                    Object(S.a)(
                      e,
                      Gc.a.hidden,
                      this.props.popped && this.props.popped !== Se.TRANSLATOR_TAB
                    ),
                    e)
                  ),
                  r = Jc(
                    ((t = {}),
                    Object(S.a)(t, Gc.a.options, !0),
                    Object(S.a)(t, Gc.a.options_visible, this.state.optionsVisible),
                    Object(S.a)(t, Gc.a.change_visible, s),
                    t)
                  ),
                  l = Jc(
                    ((a = {}),
                    Object(S.a)(a, Gc.a.filled, !0),
                    Object(S.a)(a, Gc.a.hundredpct, 100 === this.state.pctComplete),
                    a)
                  ),
                  u = Jc(
                    ((n = {}),
                    Object(S.a)(n, Gc.a.translations_wrapper, !0),
                    Object(S.a)(n, Gc.a.complete, 0 === this.state.translationBundles.length),
                    n)
                  );
                return E.a.createElement(
                  'div',
                  { className: o },
                  E.a.createElement(
                    Sc,
                    {
                      header: ''
                        .concat(this.props.language.name, ' ')
                        .concat(Ft.t('translation.label', 'Translations')),
                      label: Ft.t('translation.header', 'Flow Translation'),
                      color: '#777',
                      icon: 'fe-language',
                      top: '243px',
                      visible: this.state.visible,
                      onShow: this.handleTabClicked,
                      onHide: this.handleTabClicked
                    },
                    E.a.createElement(
                      'div',
                      { key: 'translation_wrapper', className: u },
                      this.state.translationBundles.map(function(e) {
                        return E.a.createElement(
                          'div',
                          {
                            key: i.props.language.id + Qc(e),
                            className: Gc.a.translate_block,
                            onClick: function() {
                              i.handleTranslationClicked(e);
                            }
                          },
                          E.a.createElement(
                            'div',
                            { className: Gc.a.needs_translation },
                            E.a.createElement(
                              'div',
                              { className: Gc.a.type_name },
                              e.typeConfig.name
                            ),
                            i.renderMissing(
                              Qc(e) + 'categories',
                              Wc(e, _c.MISSING, Kc.CATEGORY),
                              Xc('categories')
                            ),
                            i.renderMissing(
                              Qc(e) + 'rules',
                              Wc(e, _c.MISSING, Kc.CASE),
                              Xc('cases')
                            ),
                            e.translations
                              .filter(function(e) {
                                return !e.to && e.type === Kc.PROPERTY;
                              })
                              .map(function(t) {
                                return i.renderMissing(Qc(e) + t.from, t.from, Xc(t.attribute));
                              })
                          )
                        );
                      })
                    ),
                    E.a.createElement(
                      'div',
                      { className: r, onClick: this.toggleOptions },
                      E.a.createElement(
                        'div',
                        { className: Gc.a.header },
                        E.a.createElement(
                          'div',
                          { className: Gc.a.progress_bar },
                          E.a.createElement('div', {
                            style: { width: ''.concat(this.state.pctComplete, '%') },
                            className: l
                          })
                        ),
                        E.a.createElement(
                          'div',
                          { className: Gc.a.toggle },
                          E.a.createElement('span', { className: 'fe-arrow-up' })
                        )
                      ),
                      E.a.createElement(
                        'div',
                        { className: Gc.a.filters },
                        E.a.createElement(
                          'div',
                          { className: Gc.a.checkboxes },
                          E.a.createElement(
                            'div',
                            null,
                            E.a.createElement(qa, {
                              name: Ft.t('forms.categories', 'categories'),
                              checked: this.state.translationFilters.categories,
                              description: 'Categories',
                              checkboxClassName: Gc.a.checkbox,
                              onChange: this.toggleCategories
                            })
                          ),
                          E.a.createElement(
                            'div',
                            null,
                            E.a.createElement(qa, {
                              name: Ft.t('forms.rules', 'rules'),
                              checked: this.state.translationFilters.rules,
                              description: 'Rule Arguments',
                              checkboxClassName: Gc.a.checkbox,
                              onChange: this.toggleRules
                            })
                          )
                        ),
                        E.a.createElement(
                          'div',
                          { className: Gc.a.pct_complete },
                          this.state.pctComplete,
                          '%'
                        )
                      ),
                      E.a.createElement(
                        'div',
                        { className: Gc.a.changeLanguage },
                        s &&
                          E.a.createElement(
                            'button',
                            { onClick: this.handleChangeLanguageClick },
                            Ft.t('forms.use_as_default_language', 'Use as default language')
                          )
                      )
                    )
                  )
                );
              }
            }
          ]),
          a
        );
      })(E.a.Component);
      Zc.contextTypes = { config: bt };
      var $c = a(232).default,
        ed = (function() {
          var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : qc,
            t = Object(ve.createStore)(
              Bc,
              e,
              Object(Mc.composeWithDevTools)(ve.applyMiddleware.apply(void 0, Vc))
            );
          return t;
        })(),
        td = { config: bt },
        ad = (function(e) {
          Object(v.a)(a, e);
          var t = Object(f.a)(a);
          function a(e) {
            var n;
            return (
              Object(m.a)(this, a),
              (n = t.call(this, e)),
              Object(b.react)(Object(g.a)(n), { include: [/^handle/] }),
              n
            );
          }
          return (
            Object(_.a)(a, [
              {
                key: 'componentDidMount',
                value: function() {
                  var e = this.context.config,
                    t = e.endpoints,
                    a = e.flow,
                    n = e.forceSaveOnLoad;
                  this.props.fetchFlow(t, a, n);
                }
              },
              {
                key: 'handleDownloadClicked',
                value: function() {
                  !(function(e, t) {
                    var a =
                        'data:text/json;charset=utf-8,' +
                        encodeURIComponent(JSON.stringify(e, null, 2)),
                      n = document.createElement('a');
                    n.setAttribute('href', a),
                      n.setAttribute('download', t + '.json'),
                      document.body.appendChild(n),
                      n.click(),
                      n.remove();
                  })(dl(this.props.definition, this.props.nodes), 'definition');
                }
              },
              {
                key: 'handleVisibilityChanged',
                value: function(e) {
                  this.props.mergeEditorState({ visible: e, activityInterval: 5e3 });
                }
              },
              {
                key: 'getAlertModal',
                value: function() {
                  var e = this;
                  return this.props.modalMessage
                    ? k.createElement(
                        vu,
                        { width: '600px', show: !0 },
                        k.createElement(
                          me,
                          {
                            className: fc.a.alert_modal,
                            title: this.props.modalMessage.title,
                            headerClass: 'alert',
                            buttons: {
                              primary: {
                                name: 'Ok',
                                onClick: function() {
                                  e.props.mergeEditorState({ modalMessage: null });
                                }
                              }
                            }
                          },
                          k.createElement(
                            'div',
                            { className: fc.a.alert_body },
                            this.props.modalMessage.body
                          )
                        )
                      )
                    : null;
                }
              },
              {
                key: 'getSavingIndicator',
                value: function() {
                  return this.props.saving
                    ? k.createElement(
                        'div',
                        { id: 'saving_animation', className: fc.a.saving },
                        k.createElement(
                          _e,
                          null,
                          k.createElement(Jl, { units: 5, color: '#3498db', size: 7 })
                        )
                      )
                    : null;
                }
              },
              {
                key: 'getFooter',
                value: function() {
                  return !this.props.fetchingFlow && this.context.config.showDownload
                    ? k.createElement(
                        'div',
                        { className: fc.a.footer },
                        k.createElement(
                          'div',
                          { className: fc.a.download_button },
                          k.createElement(le, {
                            name: Ft.t('buttons.download', 'Download'),
                            onClick: this.handleDownloadClicked,
                            type: O.primary
                          })
                        )
                      )
                    : null;
                }
              },
              {
                key: 'handleLanguageSetting',
                value: function(e) {
                  e.language
                    ? this.props.handleLanguageChange(e.language)
                    : this.props.handleLanguageChange(this.props.baseLanguage);
                }
              },
              {
                key: 'handleOpenIssue',
                value: function(e) {
                  this.handleLanguageSetting(e),
                    this.props.onOpenNodeEditor({
                      originalNode: e.renderObjects.renderNode,
                      originalAction: e.renderObjects.renderAction
                        ? e.renderObjects.renderAction.action
                        : null
                    });
                }
              },
              {
                key: 'handleScrollToNode',
                value: function(e, t) {
                  var a = this;
                  this.props.scrollToNode === e &&
                    this.props.scrollToAction === t &&
                    this.props.mergeEditorState({ scrollToNode: null, scrollToAction: null }),
                    ne(function() {
                      a.props.mergeEditorState({ scrollToNode: e, scrollToAction: t });
                    });
                }
              },
              {
                key: 'handleScrollToTranslation',
                value: function(e) {
                  this.handleScrollToNode(e.node_uuid, e.action_uuid);
                }
              },
              {
                key: 'handleOpenTranslation',
                value: function(e) {
                  var t = this.props.nodes[e.node_uuid],
                    a = e.action_uuid
                      ? t.node.actions.find(function(t) {
                          return t.uuid === e.action_uuid;
                        })
                      : null;
                  this.props.onOpenNodeEditor({ originalNode: t, originalAction: a });
                }
              },
              {
                key: 'handleScrollToIssue',
                value: function(e) {
                  this.handleLanguageSetting(e);
                  var t = e.issues[0];
                  this.handleScrollToNode(t.node_uuid, t.action_uuid);
                }
              },
              {
                key: 'handleTabPopped',
                value: function(e, t) {
                  e
                    ? this.props.mergeEditorState({ popped: t })
                    : this.props.mergeEditorState({ popped: null });
                }
              },
              { key: 'componentDidUpdate', value: function(e) {} },
              {
                key: 'render',
                value: function() {
                  return k.createElement(
                    $c,
                    { onChange: this.handleVisibilityChanged },
                    k.createElement(
                      'div',
                      {
                        id: 'editor-container',
                        className: this.props.translating ? fc.a.translating : void 0,
                        'data-spec': 'editor-container'
                      },
                      this.getFooter(),
                      this.getAlertModal(),
                      k.createElement(
                        'div',
                        { className: fc.a.editor, 'data-spec': 'editor' },
                        K(
                          Object.keys(this.props.nodes || {}).length > 0 &&
                            this.props.languages &&
                            Object.keys(this.props.languages.items).length > 0
                        )(k.createElement(Ec, null)),
                        this.getSavingIndicator(),
                        K(this.props.definition && this.props.language && !this.props.fetchingFlow)(
                          k.createElement(gc, null)
                        ),
                        K(
                          this.props.definition &&
                            this.props.translating &&
                            !this.props.fetchingFlow
                        )(
                          k.createElement(Zc, {
                            language: this.props.language,
                            languages: this.props.languages ? this.props.languages.items : {},
                            localization:
                              this.props.definition && this.props.language
                                ? this.props.definition.localization[this.props.language.id]
                                : {},
                            onTranslationClicked: this.handleScrollToTranslation,
                            onTranslationOpened: this.handleOpenTranslation,
                            onTranslationFilterChanged: this.props.updateTranslationFilters,
                            translationFilters: this.props.definition
                              ? this.props.definition._ui.translation_filters
                              : null,
                            nodes: this.props.nodes,
                            onToggled: this.handleTabPopped,
                            popped: this.props.popped
                          })
                        ),
                        k.createElement(Ac, {
                          loadFlowDefinition: this.props.loadFlowDefinition,
                          createNewRevision: this.props.createNewRevision,
                          assetStore: this.props.assetStore,
                          onToggled: this.handleTabPopped,
                          popped: this.props.popped
                        }),
                        K(Object.keys(this.props.issues).length > 0)(
                          k.createElement(Ic, {
                            issues: this.props.issues,
                            onIssueClicked: this.handleScrollToIssue,
                            onIssueOpened: this.handleOpenIssue,
                            languages: this.props.languages ? this.props.languages.items : {},
                            nodes: this.props.nodes,
                            onToggled: this.handleTabPopped,
                            popped: this.props.popped
                          })
                        ),
                        k.createElement('div', { id: 'portal-root' }),
                        k.createElement('div', { id: 'canvas-portal' })
                      )
                    )
                  );
                }
              }
            ]),
            a
          );
        })(k.Component);
      ad.contextTypes = td;
      var nd = Object(Fl.b)(
          function(e) {
            var t = e.flowContext,
              a = t.definition,
              n = t.issues,
              i = t.nodes,
              s = t.assetStore,
              o = t.baseLanguage,
              r = e.editorState,
              l = r.translating,
              u = r.language,
              c = r.fetchingFlow,
              d = r.simulating,
              p = r.modalMessage,
              h = r.saving,
              m = r.scrollToAction,
              _ = r.scrollToNode;
            return {
              popped: r.popped,
              baseLanguage: o,
              modalMessage: p,
              saving: h,
              simulating: d,
              assetStore: s,
              translating: l,
              language: u,
              fetchingFlow: c,
              definition: a,
              issues: n,
              nodes: i,
              languages: s ? s.languages : null,
              scrollToAction: m,
              scrollToNode: _
            };
          },
          function(e) {
            return Object(ve.bindActionCreators)(
              {
                fetchFlow: Ir,
                loadFlowDefinition: Fr,
                createNewRevision: Pr,
                mergeEditorState: Dr,
                onOpenNodeEditor: al,
                handleLanguageChange: Lr,
                updateTranslationFilters: nl
              },
              e
            );
          }
        )(ad),
        id = function(e) {
          var t = e.config;
          return k.createElement(
            qo,
            { config: Object(y.a)({}, t) },
            k.createElement(Fl.a, { store: ed }, k.createElement(nd, null))
          );
        };
      Boolean(
        'localhost' === window.location.hostname ||
          '[::1]' === window.location.hostname ||
          window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
      );
      'undefined' === typeof customElements ||
        customElements.get('temba-textinput') ||
        a
          .e(3)
          .then(a.t.bind(null, 257, 7))
          .then(function() {
            console.log('Loading temba components');
          }),
        (window.showFlowEditor = function(e, t) {
          var a;
          t.httpTimeout && ((a = t.httpTimeout), (ze.a.defaults.timeout = a)),
            au.a.render(E.a.createElement(id, { config: t }), e);
        }),
        'serviceWorker' in navigator &&
          navigator.serviceWorker.ready.then(function(e) {
            e.unregister();
          });
    }
  ],
  [[161, 1, 2]]
]);
//# sourceMappingURL=main.66b91d65.chunk.js.map
